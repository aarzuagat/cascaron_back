(function(t){function e(e){for(var s,n,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,n=1;n<a.length;n++){var r=a[n];0!==o[r]&&(s=!1)}s&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},n={1:0},o={1:0},i=[];function r(t){return c.p+"js/"+({}[t]||t)+"."+{2:"20424eaa",3:"aeab6720",4:"d3405189",5:"8623659b"}[t]+".js"}function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={2:1,3:1,4:1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=new Promise((function(e,a){for(var s="css/"+({}[t]||t)+"."+{2:"f8d674c6",3:"54a21dc1",4:"e8c23a2e",5:"31d6cfe0"}[t]+".css",o=c.p+s,i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var l=i[r],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===s||u===o))return e()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){l=d[r],u=l.getAttribute("data-href");if(u===s||u===o)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var s=e&&e.target&&e.target.src||o,i=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=s,delete n[t],p.parentNode.removeChild(p),a(i)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){n[t]=0})));var s=o[t];if(0!==s)if(s)e.push(s[2]);else{var i=new Promise((function(e,a){s=o[t]=[e,a]}));e.push(s[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=r(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(p);var a=o[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",d.name="ChunkLoadError",d.type=s,d.request=n,a[1](d)}o[t]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var p=u;i.push([0,0]),a()})({0:function(t,e,a){t.exports=a("2f39")},"0ad5":function(t,e,a){"use strict";a("0d92")},"0d92":function(t,e,a){},1:function(t,e){},1145:function(t,e,a){"use strict";a("529d")},"1e4c":function(t,e,a){"use strict";a.r(e),a.d(e,"p",(function(){return n})),a.d(e,"n",(function(){return o}));var s=a("2a19");function n(t){s["a"].create({message:"".concat(t),type:"positive"})}function o(t){s["a"].create({message:"".concat(t," "),type:"negative"})}},"2ace":function(t,e,a){},"2b26":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r}));a("d3b7"),a("e6cf"),a("b0c0");var s=a("758b"),n=a("1e4c"),o=a("f508");function i(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&o["a"].show(),new Promise((function(t,e){s["a"].get("categories").then((function(e){o["a"].hide(),t(e.data.data)})).catch((function(t){o["a"].hide(),Object(n["n"])("Las categorías no están disponible en estos momentos"),e(t)}))}))}function r(t){return o["a"].show(),new Promise((function(e,a){s["a"].post("categories",t).then((function(a){Object(n["p"])("Categoría ".concat(t.name," agregada correctamente")),o["a"].hide(),e(a.data.data)})).catch((function(e){var s;o["a"].hide(),Object(n["n"])("La Categoría ".concat(null!==(s=t.name)&&void 0!==s?s:""," no pudo ser agregada en estos momentos")),a(e)}))}))}},"2ee3":function(t,e,a){},"2f39":function(t,e,a){"use strict";a.r(e);var s=a("7ec2"),n=a.n(s),o=a("c973"),i=a.n(o),r=(a("ac1f"),a("5319"),a("5c7d"),a("9f29"),a("ae0c"),a("7d6e"),a("e54f"),a("4848"),a("985d"),a("31cd"),a("2b0e")),c=a("df1a"),l=a("42d2"),u=a("b05d"),d=a("9c64"),p=a("2a19"),f=a("515f"),m=a("f508");r["default"].use(u["a"],{config:{plugins:["LocalStorage","SessionStorage","Meta","Notify"]},lang:c["a"],iconSet:l["a"],plugins:{Meta:d["a"],Notify:p["a"],Cookies:f["a"],Loading:m["a"]}});var h=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"q-app"}},[e("router-view")],1)},v=[],b={name:"App"},g=b,_=a("2877"),C=Object(_["a"])(g,h,v,!1,null,null,null),w=C.exports,q=a("4360"),x=a("8c4f"),y=a("448a"),k=a.n(y),j=(a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("99af"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"log"})}),S=[],O={created:function(){var t=this;this.$store.dispatch("mystore/logoutUser").then((function(){t.$router.push({name:"home"})}))}},Q=O,$=Object(_["a"])(Q,j,S,!1,null,"b8553b3a",null),P=$.exports,I=[{path:"logout",name:"logout",component:P}],D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-white dark-blue"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-12 col-sm-10"},[e("q-input",{staticClass:"no-padding full-width",attrs:{filled:"",dense:"",label:"Fecha","label-color":"white",rules:[t.$rules.required()]},on:{input:t.findStock},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-calendar",color:"white"}},[e("q-popup-proxy",{ref:"qDateProxy2",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{minimal:"",mask:"DD/MM/YYYY",options:t.optionStartFilter},on:{input:function(e){t.closeCalendar("qDateProxy2"),t.findStock}},model:{value:t.date_start,callback:function(e){t.date_start=e},expression:"date_start"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.date_start,callback:function(e){t.date_start=e},expression:"date_start"}})],1),e("div",{staticClass:"col-12 col-sm text-center"},[e("q-btn",{attrs:{"no-caps":"",dense:"",label:"Filtrar",icon:"mdi-filter"},on:{click:t.findStock}})],1)])]),e("div",{staticClass:"col-12"},[e("MyTitle",{attrs:{title:"Listado de operaciones realizadas"}})],1),t.stocks.length?e("div",{staticClass:"col-12"},[e("StockOperationList",{attrs:{stock:t.stocks},on:{update:t.findStock}})],1):e("div",{staticClass:"col-12"},[e("NoData")],1),t.stocks.length>20?e("div",{staticClass:"col-12 text-center q-py-sm"},[e("q-btn",{attrs:{label:"Ver más"},on:{click:function(e){t.end+=10}}})],1):t._e()])},R=[],A=(a("b0c0"),a("4de4"),a("caad"),a("2532"),a("83b9")),T=a("f08d"),L=a("37ee"),N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[t.lite?t._e():e("div",{staticClass:"col-12 q-py-md"},[t._m(0)]),e("div",{staticClass:"col-12"},t._l(t.stock,(function(a,s){return e("StockOperationListItem",{key:s,attrs:{operation:a,index:s+1,lite:t.lite},on:{update:function(e){return t.$emit("update")}}})})),1)])},F=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-center"},[e("div",{staticClass:"col-1"},[t._v("No.")]),e("div",{staticClass:"col"},[t._v("Fecha de compra")]),e("div",{staticClass:"col"},[t._v("Nombre")]),e("div",{staticClass:"col text-right"},[t._v("Precio de venta")]),e("div",{staticClass:"col"},[t._v("Cantidades vendidas")]),e("div",{staticClass:"col"},[t._v("Acciones")])])}],E=function(){var t,e=this,a=e._self._c;return a("div",{staticClass:"row text-center justify-center items-center"},[e.lite?a("div",{staticClass:"col-12 q-py-md"},[a("div",{staticClass:"row text-left"},[e._v("\n      Fecha de compra: "+e._s(e.$formatterDate(e.operation.created_at))+"\n      "),a("br"),e._v("Nombre: "+e._s(null!==(t=e.operation.lote.product.name)&&void 0!==t?t:"-")+"\n      "),a("br"),e._v("Precio de venta: "+e._s(e.$formatterCurrency(e.sell_price))+"\n      "),a("br"),e._v("Cantidades vendidas: "+e._s(e.operation.quantity)+"\n    ")])]):a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[e._v("\n        "+e._s(e.index)+"\n      ")]),a("div",{staticClass:"col"},[e._v("\n        "+e._s(e.$formatterDateTime(e.operation.created_at))+"\n      ")]),a("div",{staticClass:"col"},[e._v("\n        "+e._s(e.name)+"\n      ")]),a("div",{staticClass:"col text-right"},[e._v("\n        "+e._s(e.$formatterCurrency(e.sell_price))+"\n      ")]),a("div",{staticClass:"col text-center"},[e._v("\n        "+e._s(e.operation.quantity)+"\n      ")]),e.lite?e._e():a("div",{staticClass:"col"},[a("div",{staticClass:"row items-center flex-center"},[a("StockOperationCancel",{attrs:{operation:e.operation},on:{update:function(t){return e.$emit("update")}}}),a("StockOperationChange",{attrs:{operation:e.operation},on:{update:function(t){return e.$emit("update")}}})],1)])])]),e.lite?e._e():a("div",{staticClass:"col-12"},[a("q-separator",{staticClass:"full-width",attrs:{color:"white"}})],1)])},B=[],M=(a("a9e3"),function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(e){t.canceling=!0}}},[e("q-icon",{attrs:{name:"mdi-cancel",color:"red",size:"sm"}}),e("q-tooltip",[t._v("Cancelar")])],1),e("q-dialog",{ref:"mymodal",model:{value:t.canceling,callback:function(e){t.canceling=e},expression:"canceling"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v('Cancelar pedido de producto "'+t._s(t.operation.lote.product.name)+'"')]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-form",{on:{submit:t.submit}},[e("q-card-section",[e("div",{staticClass:"row text-white flex-center"},[e("q-radio",{attrs:{"keep-color":"",val:"complete",label:"Completa",color:"white","checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye"},model:{value:t.cancel_value,callback:function(e){t.cancel_value=e},expression:"cancel_value"}}),e("q-radio",{attrs:{"keep-color":"",val:"partial",label:"Parcial",color:"white","checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye"},model:{value:t.cancel_value,callback:function(e){t.cancel_value=e},expression:"cancel_value"}})],1),e("div",{staticClass:"row"},["complete"===t.cancel_value?e("div",{staticClass:"col-12 text-white text-justify"},[t._v("\n                  ¿Seguro que desea cancelar esta compra en su totalidad?\n                ")]):t._e(),e("div",{staticClass:"col-12 text-white text-justify"},[e("div",{staticClass:"row text-left"},[e("div",{staticClass:"col-12"},[e("MyTitle",{attrs:{title:"Detalles de la compra"}})],1),e("div",{staticClass:"col-12 q-pb-sm text-right"},[t._v("\n                      Fecha de compra: "+t._s(t.$formatterDate(t.operation.created_at))+"\n                      "),e("br"),t._v("Nombre: "+t._s(t.operation.lote.product.name)+"\n                      "),e("br"),t._v("Precio de venta: "+t._s(t.$formatterCurrency(t.operation.lote.sell_price))+"\n                      "),e("br"),t._v("Cantidades vendidas: "+t._s(t.operation.quantity)+"\n                    ")])])]),"partial"===t.cancel_value?e("div",{staticClass:"col-12 text-white text-center"},["Todas las unidades"===t.operation.lote.product.tag?e("div",[e("i",[t._v("Escoja los productos que "),e("b",[t._v("desea reponer")]),t._v(" al stock")]),e("br"),t._l(t.operation.tags,(function(a){return e("q-checkbox",{key:a.id,attrs:{"keep-color":"",val:a.id,label:a.tag,color:"white","checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye"},model:{value:t.partial_list,callback:function(e){t.partial_list=e},expression:"partial_list"}})}))],2):e("div",{staticClass:"q-py-md"},[e("q-input",{attrs:{label:"Cantidad a devolver",dense:"",rules:[t.$rules.numeric()],color:"white","label-color":"white"},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}})],1)]):t._e(),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{filled:"",type:"textarea",rules:[t.$rules.required()],placeholder:"Explique por qué está cancelando esta compra"},model:{value:t.details,callback:function(e){t.details=e},expression:"details"}})],1)])]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"no-caps":"",label:"Cancelar",dense:"",color:"warning"}}),e("q-btn",{attrs:{"no-caps":"",label:"Confirmar cancelación",dense:"",color:"primary",type:"submit"}})],1)],1)],1)],1)])])],1)}),Y=[],z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-sm"},[t.lite_version?e("p",{class:"text-".concat(t.align," bb text-white")},[t._v(t._s(t.title))]):e("p",{class:"text-h5 text-".concat(t.align," bb text-white")},[t._v(t._s(t.title))])])},V=[],U={props:{title:{type:String},lite_version:{type:Boolean,default:!1},align:{type:String,default:"right"}},data:function(){return{}}},W=U,X=(a("1145"),Object(_["a"])(W,z,V,!1,null,null,null)),Z=X.exports,J={name:"StockOperationCancel",components:{MyTitle:Z,StockOperationList:Vt},props:{operation:{type:Object}},data:function(){return{canceling:!1,cancel_value:"partial",details:"",quantity:1,partial_list:[]}},methods:{submit:function(){var t=this;return i()(n()().mark((function e(){var a;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={is_partial:"partial"===t.cancel_value,operation:t.operation.id,details:t.details,quantity:t.quantity,partial_list:t.partial_list,name:t.operation.lote.product.name},e.next=3,Object(A["c"])(a);case 3:t.canceling=!1,t.details="",t.partial_list=[],t.$emit("update");case 7:case"end":return e.stop()}}),e)})))()}},mounted:function(){}},H=J,K=a("9c40"),G=a("0016"),tt=a("05c0"),et=a("24e8"),at=a("f09f"),st=a("65c6"),nt=a("2c91"),ot=a("0378"),it=a("a370"),rt=a("3786"),ct=a("8f8e"),lt=a("27f9"),ut=a("4b7e"),dt=a("7f67"),pt=a("eebe"),ft=a.n(pt),mt=Object(_["a"])(H,M,Y,!1,null,null,null),ht=mt.exports;ft()(mt,"components",{QBtn:K["a"],QIcon:G["a"],QTooltip:tt["a"],QDialog:et["a"],QCard:at["a"],QToolbar:st["a"],QSpace:nt["a"],QForm:ot["a"],QCardSection:it["a"],QRadio:rt["a"],QCheckbox:ct["a"],QInput:lt["a"],QCardActions:ut["a"]}),ft()(mt,"directives",{ClosePopup:dt["a"]});var vt=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"white",align:"left"},on:{click:function(e){t.changing=!0}}},[e("q-icon",{attrs:{name:"mdi-swap-horizontal",color:"info",size:"sm"}}),e("q-tooltip",[t._v("Cambiar venta")])],1),e("q-dialog",{ref:"mymodal",on:{"before-show":t.findProducts},model:{value:t.changing,callback:function(e){t.changing=e},expression:"changing"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v('Cambiar pedido de "'+t._s(t.operation.lote.product.name)+'"')]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-form",{on:{submit:t.submit}},[e("q-card-section",[e("div",{staticClass:"row text-white"},[e("div",{staticClass:"col-12"},[e("MyTitle",{attrs:{title:"Detalles de la compra"}})],1),e("div",{staticClass:"col-12 q-pb-sm text-right"},[t._v("\n                  Fecha de compra: "+t._s(t.$formatterDate(t.operation.created_at))+"\n                  "),e("br"),t._v("Nombre: "+t._s(t.operation.lote.product.name)+"\n                  "),e("br"),t._v("Precio de venta: "+t._s(t.$formatterCurrency(t.operation.lote.sell_price))+"\n                  "),e("br"),t._v("Cantidades vendidas: "+t._s(t.operation.quantity)+"\n                ")])]),e("div",{staticClass:"col-12 text-white text-center q-py-sm"},[t._l(t.allTags,(function(a,s){return"Todas las unidades"===t.operation.lote.product.tag?e("StockOperationChangeItem",{key:a.id,attrs:{item:a,index:s+1},on:{deleted:t.updateThis}}):t._e()})),"Todas las unidades"!==t.operation.lote.product.tag?e("q-input",{attrs:{dense:""},model:{value:t.quantity_selected,callback:function(e){t.quantity_selected=e},expression:"quantity_selected"}}):t._e()],2),e("div",{staticClass:"col-12"},[e("q-select",{attrs:{options:t.products,"option-label":function(t){return t.name},"label-color":"white",dense:"","options-dense":"","options-dark":"",label:"Escoja el producto nuevo",loading:0===t.products_all.length},model:{value:t.product_selected,callback:function(e){t.product_selected=e},expression:"product_selected"}})],1),t.products.length&&t.isProductTag?e("div",{staticClass:"col-12 q-pt-sm"},[e("q-select",{attrs:{options:t.tags,"option-label":function(t){return t.tag},"label-color":"white",dense:"",multiple:"","options-dense":"","options-dark":"",label:"Escoja las etiquetas de los productos"},model:{value:t.tags_selected,callback:function(e){t.tags_selected=e},expression:"tags_selected"}})],1):t._e(),t.products.length&&""!==t.product_selected&&!t.isProductTag?e("div",{staticClass:"col-12"},[e("q-input",{attrs:{"label-color":"white",dense:"",rules:[t.$rules.required(),t.$rules.minValue(1),t.$rules.numeric()],label:"Escoja la cantidad de unidades"},model:{value:t.quantity_selected,callback:function(e){t.quantity_selected=e},expression:"quantity_selected"}})],1):t._e(),e("div",{staticClass:"col-12 q-pt-sm"},[e("q-input",{attrs:{filled:"",autogrow:"",placeholder:"Explique por qué está eliminando esta compra"},model:{value:t.details,callback:function(e){t.details=e},expression:"details"}})],1)]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"no-caps":"",label:"Cancelar",dense:"",color:"warning"}}),e("q-btn",{attrs:{"no-caps":"",label:"Confirmar cancelación",dense:"",color:"primary",type:"submit"}})],1)],1)],1)],1)])])],1)},bt=[],gt=(a("0481"),a("4069"),a("d81d"),a("920e")),_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row q-pt-xs text-center"},[e("div",{staticClass:"col-1"},[t._v(t._s(t.index))]),e("div",{staticClass:"col-5"},[t._v(t._s(t.item.tag))]),e("div",{staticClass:"col-2"},[e("SOChangeItemDelete",{attrs:{item:t.item},on:{deleted:function(e){return t.$emit("deleted",t.item)}}})],1)])},Ct=[],wt=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{attrs:{icon:"mdi-trash-can",dense:"",color:"negative"},on:{click:function(e){t.deleting=!0}}}),e("q-dialog",{ref:"mymodal",model:{value:t.deleting,callback:function(e){t.deleting=e},expression:"deleting"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Eliminar producto de órden")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-form",{on:{submit:t.deleteItem}},[e("q-card-section",{staticClass:"q-mt-sm text-white"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t._v("\n                  ¿Seguro que desea eliminar este elemento de la órden?\n                ")]),e("div",{staticClass:"col-12 q-pt-sm"},[e("q-input",{attrs:{filled:"",autogrow:"",rules:[t.$rules.required()],placeholder:"Explique por qué está eliminando esta compra"},model:{value:t.details,callback:function(e){t.details=e},expression:"details"}})],1)])]),e("FormCardAction",{attrs:{"custom-label":"Eliminar producto"}})],1)],1)],1)])])],1)},qt=[],xt=a("4425"),yt={components:{FormCardAction:xt["a"]},props:{item:{type:Object}},data:function(){return{deleting:!1,details:""}},methods:{deleteItem:function(){var t=this;return i()(n()().mark((function e(){var a,s;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={id:t.item.id,tag:t.item.tag,details:t.details},e.next=3,Object(A["b"])(a);case 3:s=e.sent,console.log(s),t.deleting=!1,t.$emit("deleted");case 7:case"end":return e.stop()}}),e)})))()}}},kt=yt,jt=Object(_["a"])(kt,wt,qt,!1,null,null,null),St=jt.exports;ft()(jt,"components",{QBtn:K["a"],QDialog:et["a"],QCard:at["a"],QToolbar:st["a"],QSpace:nt["a"],QForm:ot["a"],QCardSection:it["a"],QInput:lt["a"]}),ft()(jt,"directives",{ClosePopup:dt["a"]});var Ot={components:{SOChangeItemDelete:St},props:{item:{type:Object},index:{type:Number}},data:function(){return{}}},Qt=Ot,$t=Object(_["a"])(Qt,_t,Ct,!1,null,null,null),Pt=$t.exports,It={name:"StockOperationCancel",components:{StockOperationChangeItem:Pt,MyTitle:Z,StockOperationList:Vt},props:{operation:{type:Object}},computed:{isProductTag:function(){return this.tags.length>0},tags:function(){var t;return""===this.product_selected?[]:null!==(t=this.product_selected.lotes.map((function(t){return t.tags})).flat(1))&&void 0!==t?t:[]}},data:function(){return{changing:!1,details:"",partial_list:[],products:[],products_all:[],product_selected:"",tags_selected:[],quantity_selected:0,allTags:[]}},methods:{updateThis:function(t){console.log(t),this.allTags=this.allTags.filter((function(e){return e.tag!==t.tag}))},findProducts:function(){var t=this;return i()(n()().mark((function e(){var a;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(gt["e"])(!1);case 2:a=e.sent,t.products=t.products_all=a;case 4:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return i()(n()().mark((function e(){var a;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={operation:t.operation.id,details:t.details,name:t.operation.lote.product.name,product_selected:t.product_selected,tags_selected:t.tags_selected.map((function(t){return t.id})),quantity_selected:t.quantity_selected},e.next=3,Object(A["a"])(a);case 3:t.changing=!1,t.details="",t.partial_list=[],t.product_selected="",t.tags_selected=[],t.quantity_selected=0,t.$emit("update");case 10:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.allTags=this.operation.tags}},Dt=It,Rt=a("ddd8"),At=Object(_["a"])(Dt,vt,bt,!1,null,null,null),Tt=At.exports;ft()(At,"components",{QBtn:K["a"],QIcon:G["a"],QTooltip:tt["a"],QDialog:et["a"],QCard:at["a"],QToolbar:st["a"],QSpace:nt["a"],QForm:ot["a"],QCardSection:it["a"],QInput:lt["a"],QSelect:Rt["a"],QCardActions:ut["a"]}),ft()(At,"directives",{ClosePopup:dt["a"]});var Lt={name:"StockOperationListItem",components:{StockOperationChange:Tt,StockOperationCancel:ht},props:{operation:{type:Object},index:{type:Number},lite:{type:Boolean,default:!1}},computed:{sell_price:function(){var t,e,a;return null!==(t=null===(e=this.operation)||void 0===e||null===(a=e.lote)||void 0===a?void 0:a.sell_price)&&void 0!==t?t:0},name:function(){var t,e,a,s;return null!==(t=null===(e=this.operation)||void 0===e||null===(a=e.lote)||void 0===a||null===(s=a.product)||void 0===s?void 0:s.name)&&void 0!==t?t:"-"}},data:function(){return{}},methods:{}},Nt=Lt,Ft=a("eb85"),Et=Object(_["a"])(Nt,E,B,!1,null,null,null),Bt=Et.exports;ft()(Et,"components",{QSeparator:Ft["a"]});var Mt={name:"StockOperationList",components:{StockOperationListItem:Bt},props:{stock:{type:Array},lite:{type:Boolean,default:!1}},data:function(){return{}}},Yt=Mt,zt=Object(_["a"])(Yt,N,F,!1,null,null,null),Vt=zt.exports,Ut=a("bd4c"),Wt={components:{MyTitle:Z,StockOperationList:Vt,NoData:L["a"],StockListItem:T["a"]},data:function(){return{stocks:[],stocks_all:[],start:0,end:20,name:"",categories:[],products:[],date_start:Ut["b"].formatDate(Date.now(),"DD/MM/YYYY")}},methods:{closeCalendar:function(t){this.$refs[t].hide()},optionStartFilter:function(t){var e=Date.now(),a=Ut["b"].formatDate(e,"YYYY/MM/DD");return t<=a},filterStock:function(){var t=this;if(!this.stocks_all.length||!this.name)return this.stocks=this.stocks_all,!1;this.stocks=this.stocks_all.filter((function(e){return e.name.toLowerCase().includes(t.name.toLowerCase())}))},findStock:function(){var t=this;return i()(n()().mark((function e(){var a,s;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={date:t.date_start},e.next=3,Object(A["e"])(!0,a);case 3:s=e.sent,t.stocks=t.stocks_all=s.data.data;case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.findStock()}},Xt=Wt,Zt=(a("7bef"),a("7cbe")),Jt=a("52ee"),Ht=a("8572"),Kt=Object(_["a"])(Xt,D,R,!1,null,null,null),Gt=Kt.exports;ft()(Kt,"components",{QInput:lt["a"],QIcon:G["a"],QPopupProxy:Zt["a"],QDate:Jt["a"],QBtn:K["a"],QField:Ht["a"]}),ft()(Kt,"directives",{ClosePopup:dt["a"]});var te=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-white dark-blue"},[e("div",{staticClass:"col-12"},[e("MyTitle",{attrs:{title:"Estadísticas de ventas"}})],1),e("div",{staticClass:"col-12"},[e("div",{staticClass:"row q-gutter-sm items-center justify-center"},[e("div",{staticClass:"col-12 col-md flex-center flex text-center"},[e("q-input",{staticClass:"no-padding full-width",attrs:{filled:"",dense:"",label:"Fecha inicio","label-color":"white",rules:[t.$rules.required()]},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-calendar",color:"white"}},[e("q-popup-proxy",{ref:"qDateProxy2",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{minimal:"",mask:"DD/MM/YYYY",options:t.optionStartFilter},on:{input:function(e){return t.closeCalendar("qDateProxy2")}},model:{value:t.date_start,callback:function(e){t.date_start=e},expression:"date_start"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.date_start,callback:function(e){t.date_start=e},expression:"date_start"}})],1),e("div",{staticClass:"col-12 col-md text-center flex flex-center"},[e("q-input",{staticClass:"no-padding full-width",attrs:{filled:"",dense:"",label:"Fecha final","label-color":"white"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-calendar",color:"white"}},[e("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{minimal:"",mask:"DD/MM/YYYY",options:t.optionEndFilter},on:{input:function(e){return t.closeCalendar("qDateProxy")}},model:{value:t.date_end,callback:function(e){t.date_end=e},expression:"date_end"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.date_end,callback:function(e){t.date_end=e},expression:"date_end"}})],1),e("div",{staticClass:"col-12 col-md text-center flex flex-center"},[e("q-btn",{attrs:{"no-caps":"",dense:"",label:"Filtrar",icon:"mdi-filter"},on:{click:t.findStock}})],1)])]),t.stocks.length?e("div",{staticClass:"col-12"},[e("ColumnChart",{key:t.key,attrs:{dataseries:t.columnSeries[1],categories:t.columnSeries[0],title:"Ventas por productos"}})],1):t._e(),t.incidents.length?e("div",{staticClass:"col-12"},[e("ColumnChart",{key:t.key,attrs:{dataseries:t.columnSeriesIncidents[1],categories:t.columnSeriesIncidents[0],title:"Incidentes"}})],1):e("div",{staticClass:"col-12"},[e("NoData")],1),t.stocks.length>20?e("div",{staticClass:"col-12 text-center q-py-sm"},[e("q-btn",{attrs:{label:"Ver más"},on:{click:function(e){t.end+=10}}})],1):t._e()])},ee=[],ae=(a("4e82"),a("159b"),function(){var t=this,e=t._self._c;return e("div",[e("highcharts",{ref:"chart",attrs:{options:t.chartOptions}})],1)}),se=[],ne=a("4452"),oe={name:"ColumnChart",components:{highcharts:ne["Chart"]},props:{dataseries:{type:Array},title:{type:String},categories:{type:Array},subtext:{type:String}},data:function(){return{chartOptions:{chart:{type:"column"},credits:{enabled:!1},title:{text:this.title},xAxis:{categories:this.categories,crosshair:!0},yAxis:{min:0,title:{text:this.subtext}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:this.dataseries}}}},ie=oe,re=Object(_["a"])(ie,ae,se,!1,null,null,null),ce=re.exports,le=a("fa7d"),ue=a("758b"),de=a("1e4c");function pe(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&m["a"].show(),new Promise((function(t,e){ue["a"].get("incidents").then((function(e){m["a"].hide(),t(e.data.data)})).catch((function(t){m["a"].hide(),Object(de["n"])("Los incidentes no están disponibles en estos momentos"),e(t)}))}))}function fe(t){m["a"].show();var e=t.author;return new Promise((function(a,s){ue["a"].post("incidents",t).then((function(t){Object(de["p"])("Incidente de ".concat(e," agregado correctamente")),m["a"].hide(),a(t.data.data)})).catch((function(t){m["a"].hide(),Object(de["n"])("El incidente de ".concat(e," no pudo ser agregado en estos momentos")),s(t)}))}))}function me(t){m["a"].show();var e=t.id;return t=Object(le["f"])(t),t._method="put",new Promise((function(a,s){ue["a"].put("incidents/".concat(e),t).then((function(t){Object(de["p"])("Incidente actualizado correctamente"),m["a"].hide(),a(t.data.data)})).catch((function(t){m["a"].hide(),Object(de["n"])("El incidente no pudo ser actualizado en estos momentos"),s(t)}))}))}function he(t){m["a"].show();var e=t.author,a=t.id;return new Promise((function(s,n){ue["a"].delete("incidents/".concat(a),{_method:"delete"}).then((function(t){Object(de["p"])("Incidente de ".concat(e," eliminado correctamente")),m["a"].hide(),s(t.data.data)})).catch((function(e){var a;m["a"].hide(),Object(de["n"])("El incidente de ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser eliminado en estos momentos")),n(e)}))}))}function ve(t){return m["a"].show(),new Promise((function(e,a){ue["a"].post("incidents-filter",t).then((function(t){Object(de["p"])("Incidentes obtenidos correctamente"),m["a"].hide(),e(t.data.data)})).catch((function(t){m["a"].hide(),Object(de["n"])("Los incidentes no pudieron ser obtenidos en estos momentos"),a(t)}))}))}var be={components:{ColumnChart:ce,MyTitle:Z,StockOperationList:Vt,NoData:L["a"],StockListItem:T["a"]},computed:{columnSeries:function(){var t=Object(le["g"])(this.stocks.map((function(t){return t.lote.product.name}))),e=[],a=this.stocks.filter((function(t){return t.quantity>0})).sort((function(t,e){return t.quantity>e.quantity}));return t.forEach((function(t){var s={name:t,data:[a.filter((function(e){return e.lote.product.name===t})).map((function(t){return t.quantity})).reduce((function(t,e){return t+e}),0)]};e.push(s)})),console.log(e),[["Productos"],e]},columnSeriesIncidents:function(){var t=this,e=Object(le["g"])(this.incidents.map((function(t){return t.author}))),a=[];return e.forEach((function(e){var s={name:e,data:[t.incidents.filter((function(t){return t.author===e})).length]};a.push(s)})),console.log(a),[["Trabajadores"],a]}},data:function(){return{incidents:[],stocks:[],stocks_all:[],start:0,end:20,name:"",categories:[],products:[],date_start:"",date_end:"",filtered:!1,key:0}},methods:{closeCalendar:function(t){this.filtered=!0,this.$refs[t].hide()},optionStartFilter:function(t){var e=Date.now(),a=Ut["b"].formatDate(e,"YYYY/MM/DD");return t<=a},optionEndFilter:function(t){this.filtered=!0;var e=Object(le["c"])(this.date_start),a=Date.now(),s=Ut["b"].formatDate(e,"YYYY/MM/DD"),n=Ut["b"].formatDate(a,"YYYY/MM/DD");return t>=s&&t<=n},filterStock:function(){var t=this;if(!this.stocks_all.length||!this.name)return this.stocks=this.stocks_all,!1;this.stocks=this.stocks_all.filter((function(e){return e.name.toLowerCase().includes(t.name.toLowerCase())}))},findStock:function(){var t=this;return i()(n()().mark((function e(){var a,s,o,i;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.date_start,t.filtered||(a="1/1/2010"),s=t.date_end,o={start:a,end:s},e.next=6,Object(A["d"])(o);case 6:i=e.sent,t.stocks=t.stocks_all=i,t.key++;case 9:case"end":return e.stop()}}),e)})))()},findIncidents:function(){var t=this;return i()(n()().mark((function e(){var a,s,o;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.date_start,t.filtered||(a="1/1/2010"),s=t.date_end,o={start:a,end:s},e.next=6,ve(o);case 6:t.incidents=e.sent,t.key++;case 8:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.date_start=Ut["b"].formatDate(Date.now(),"DD/MM/YYYY"),this.date_end=Ut["b"].formatDate(Date.now(),"DD/MM/YYYY"),this.findStock(),this.findIncidents()}},ge=be,_e=(a("a808"),Object(_["a"])(ge,te,ee,!1,null,null,null)),Ce=_e.exports;ft()(_e,"components",{QInput:lt["a"],QIcon:G["a"],QPopupProxy:Zt["a"],QDate:Jt["a"],QBtn:K["a"],QField:Ht["a"]}),ft()(_e,"directives",{ClosePopup:dt["a"]});var we=[{path:"operaciones",name:"operations",component:Gt},{path:"estadisticas",name:"statics",component:Ce}],qe=function(){var t=this,e=t._self._c;return e("q-page",{attrs:{padding:""}},[e("IncidentList")],1)},xe=[],ye=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("MyTitle",{attrs:{title:"Lista de incidentes"}})],1),e("div",{staticClass:"col-12 text-right"},[e("IncidentAdd")],1),t.incidents.length?e("div",{staticClass:"col-12"},[t._m(0),t._l(t.incidents,(function(a,s){return e("IncidentItem",{key:s,attrs:{incident:a,index:s+1},on:{update:t.findIncidents}})}))],2):e("div",{staticClass:"col-12"},[e("NoData")],1)])},ke=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-white bb"},[e("div",{staticClass:"col-1"},[t._v("No.")]),e("div",{staticClass:"col"},[t._v("Causante")]),e("div",{staticClass:"col"},[t._v("Detalles")]),e("div",{staticClass:"col"},[t._v("Productos involucrados")]),e("div",{staticClass:"col-1"},[t._v("Acciones")])])}],je=(a("a4d3"),a("e01a"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-white"},[e("div",{staticClass:"col-1"},[t._v(" "+t._s(t.index))]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.incident.author))]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.incident.description))]),e("div",{staticClass:"col text-center"},t._l(t.incident.products,(function(a,s){return e("span",{key:a.id},[t._v(t._s(a.name)+"\n    "),s+1<t.incident.products.length?e("i",[t._v(",")]):t._e()])})),0),e("div",{staticClass:"col-1"},[e("div",{staticClass:"row"},[e("IncidentEdit",{attrs:{"incident-new":t.incident},on:{update:function(e){return t.$emit("update")}}}),e("IncidentDelete",{attrs:{"incident-new":t.incident},on:{update:function(e){return t.$emit("update")}}})],1)])])}),Se=[],Oe=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.showing=!0}}},[e("q-icon",{attrs:{name:"mdi-square-edit-outline",color:"red",size:"sm"}}),e("q-tooltip",{staticClass:"q-pl-sm"},[t._v("Editar incidente")])],1),e("q-dialog",{ref:"mymodal",model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Actualizar incidente")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-form",{on:{submit:t.submitAll}},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-12"},[e("q-input",{attrs:{rules:[t.$rules.required()],label:"Nombre del causante del incidente","input-class":"text-white","label-color":"white",dense:""},model:{value:t.incident.author,callback:function(e){t.$set(t.incident,"author",e)},expression:"incident.author"}})],1),e("div",{staticClass:"col-12"},[e("q-select",{attrs:{options:t.products,multiple:"","option-label":function(t){return t.name},"options-dense":"",rules:[t.$rules.required()],label:"Productos involucrados en el incidente","input-class":"text-white","label-color":"white",dense:"","options-dark":"",loading:0===t.products.length},model:{value:t.incident.products,callback:function(e){t.$set(t.incident,"products",e)},expression:"incident.products"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{rules:[t.$rules.required(),function(t){return t.length>5}],label:"Descripción del incidente","input-class":"text-white","label-color":"white",type:"textarea",dense:""},model:{value:t.incident.description,callback:function(e){t.$set(t.incident,"description",e)},expression:"incident.description"}})],1)]),e("FormCardAction",{attrs:{update:!0}})],1)],1)],1)])])],1)},Qe=[],$e=(a("2b26"),a("ffc9")),Pe={components:{FormCardAction:xt["a"],CategoryAdd:$e["a"]},props:{incidentNew:{type:Object}},data:function(){return{showing:!1,incident:{id:"",author:"",description:"",user_id:"",products:[]},products:[]}},methods:{findProducts:function(){var t=this;return i()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(gt["d"])();case 2:t.products=e.sent;case 3:case"end":return e.stop()}}),e)})))()},setItems:function(){this.incident=Object(le["a"])(this.incident,this.incidentNew)},submitAll:function(){var t=this;return i()(n()().mark((function e(){var a,s;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.incident,a.products_id=t.incident.products.map((function(t){return t.id})),e.next=4,me(a);case 4:s=e.sent,console.log(s),t.showing=!1,t.$emit("update");case 8:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.setItems(),this.findProducts()}},Ie=Pe,De=(a("d059"),a("b047")),Re=Object(_["a"])(Ie,Oe,Qe,!1,null,null,null),Ae=Re.exports;ft()(Re,"components",{QBtn:K["a"],QIcon:G["a"],QTooltip:tt["a"],QDialog:et["a"],QCard:at["a"],QToolbar:st["a"],QSpace:nt["a"],QForm:ot["a"],QInput:lt["a"],QSelect:Rt["a"],QField:Ht["a"],QChip:De["a"]}),ft()(Re,"directives",{ClosePopup:dt["a"]});var Te=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.showing=!0}},scopedSlots:t._u([{key:"default",fn:function(){return[e("q-icon",{attrs:{name:"mdi-trash-can",color:"red",size:"sm"}}),e("q-tooltip",{staticClass:"q-pl-sm"},[t._v("Eliminar incidente")])]},proxy:!0}])}),e("q-dialog",{ref:"mymodal",model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Eliminar incidente")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs text-white"},[e("div",{staticClass:"col-12"},[t._v('¿Seguro que desea eliminar el incidente de "'+t._s(t.incident.author)+'" del\n                  '+t._s(t.$formatterDate(t.incidentNew.created_at))+"?\n                ")]),e("div",{staticClass:"col-12 text-right q-gutter-xs"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"darkless-blue"}}),e("q-btn",{attrs:{label:"Eliminar",color:"dark",type:"submit"}})],1)])])],1)],1)],1)])])],1)},Le=[],Ne={components:{FormCardAction:xt["a"],CategoryAdd:$e["a"]},props:{incidentNew:{type:Object}},data:function(){return{showing:!1,incident:{id:"",author:"",description:"",user_id:"",products:[]}}},methods:{submit:function(){var t=this;return i()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,he(t.incident);case 2:e.sent,t.showing=!1,t.$emit("update");case 5:case"end":return e.stop()}}),e)})))()},setItems:function(){this.incident=Object(le["a"])(this.incident,this.incidentNew)}},mounted:function(){this.setItems()}},Fe=Ne,Ee=(a("507a"),Object(_["a"])(Fe,Te,Le,!1,null,null,null)),Be=Ee.exports;ft()(Ee,"components",{QBtn:K["a"],QIcon:G["a"],QTooltip:tt["a"],QDialog:et["a"],QCard:at["a"],QToolbar:st["a"],QSpace:nt["a"],QCardSection:it["a"],QForm:ot["a"],QField:Ht["a"],QChip:De["a"]}),ft()(Ee,"directives",{ClosePopup:dt["a"]});var Me={components:{IncidentDelete:Be,IncidentEdit:Ae},props:{incident:{type:Object},index:{type:Number}},data:function(){return{}}},Ye=Me,ze=Object(_["a"])(Ye,je,Se,!1,null,null,null),Ve=ze.exports,Ue=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{attrs:{label:"Agregar incidente","no-caps":"",dense:"","text-color":"white"},on:{click:function(e){t.adding=!0}}}),e("q-dialog",{ref:"mymodal",model:{value:t.adding,callback:function(e){t.adding=e},expression:"adding"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Agregar incidente")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-form",{on:{submit:t.submitAll}},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-12"},[e("q-input",{attrs:{rules:[t.$rules.required()],label:"Nombre del causante del incidente","input-class":"text-white","label-color":"white",dense:""},model:{value:t.incident.author,callback:function(e){t.$set(t.incident,"author",e)},expression:"incident.author"}})],1),e("div",{staticClass:"col-12"},[e("q-select",{attrs:{options:t.products,multiple:"","option-label":function(t){return t.name},"options-dense":"",rules:[t.$rules.required()],label:"Productos involucrados en el incidente","input-class":"text-white","label-color":"white",dense:"","options-dark":"",loading:0===t.products.length},model:{value:t.incident.products,callback:function(e){t.$set(t.incident,"products",e)},expression:"incident.products"}})],1),e("div",{staticClass:"col-12"},[e("q-input",{attrs:{rules:[t.$rules.required(),function(t){return t.length>5}],label:"Descripción del incidente","input-class":"text-white","label-color":"white",type:"textarea",dense:""},model:{value:t.incident.description,callback:function(e){t.$set(t.incident,"description",e)},expression:"incident.description"}})],1)]),e("FormCardAction")],1)],1)],1)])])],1)},We=[],Xe={name:"IncidentAdd",components:{FormCardAction:xt["a"]},data:function(){return{adding:!1,incident:{author:"",description:"",user_id:"",products:[]},products:[]}},methods:{findProducts:function(){var t=this;return i()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(gt["d"])();case 2:t.products=e.sent;case 3:case"end":return e.stop()}}),e)})))()},submitAll:function(){var t=this;return i()(n()().mark((function e(){var a;return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(le["f"])(t.incident),a.products_id=t.incident.products.map((function(t){return t.id})),e.next=4,fe(a);case 4:e.sent,t.adding=!1;case 6:case"end":return e.stop()}}),e)})))()},cleanAll:function(){this.incident={author:"",description:"",user_id:"",products:[]}}},mounted:function(){this.findProducts()}},Ze=Xe,Je=Object(_["a"])(Ze,Ue,We,!1,null,null,null),He=Je.exports;ft()(Je,"components",{QBtn:K["a"],QDialog:et["a"],QCard:at["a"],QToolbar:st["a"],QSpace:nt["a"],QForm:ot["a"],QInput:lt["a"],QSelect:Rt["a"]}),ft()(Je,"directives",{ClosePopup:dt["a"]});var Ke={components:{IncidentAdd:He,MyTitle:Z,NoData:L["a"],IncidentItem:Ve},data:function(){return{incidents:[]}},methods:{findIncidents:function(){var t=this;return i()(n()().mark((function e(){return n()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:t.incidents=e.sent,console.log(t.incidents);case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.findIncidents()}},Ge=Ke,ta=Object(_["a"])(Ge,ye,ke,!1,null,null,null),ea=ta.exports,aa={components:{IncidentList:ea}},sa=aa,na=a("9989"),oa=Object(_["a"])(sa,qe,xe,!1,null,null,null),ia=oa.exports;ft()(oa,"components",{QPage:na["a"]});var ra=[{path:"incidentes",name:"incident",component:ia}],ca=function(){var t=this,e=t._self._c;return e("q-page",{attrs:{padding:""}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("MyTitle",{attrs:{title:"Videos tutoriales de LoveApp"}})],1),t._l(t.list,(function(t,a){return e("div",{key:a,staticClass:"col-12 col-sm-4 q-px-sm"},[e("TutorialItem",{attrs:{item:t,index:a+1}})],1)}))],2)])},la=[],ua=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row bg-dark-blue q-mb-sm items-center"},[e("div",{staticClass:"col-12 text-white q-pa-sm"},[e("my-title",{attrs:{lite_version:"",align:"center",title:"Video ".concat(t.index,": ").concat(t.item.description)}}),e("VideoItem",{attrs:{url:t.item.url}})],1)])},da=[],pa=function(){var t=this,e=t._self._c;return e("q-video",{attrs:{ratio:t.ratio,src:t.fullUrl}})},fa=[],ma={props:{url:{type:String},ratio:{type:Number,default:16/9}},computed:{fullUrl:function(){return"https://lovebeta.thecloudgroup.tech/"+this.url}},data:function(){return{}}},ha=ma,va=a("6ac0"),ba=Object(_["a"])(ha,pa,fa,!1,null,null,null),ga=ba.exports;ft()(ba,"components",{QVideo:va["a"]});var _a={components:{MyTitle:Z,VideoItem:ga},props:{index:{type:Number},item:{type:Object}},data:function(){return{}}},Ca=_a,wa=Object(_["a"])(Ca,ua,da,!1,null,null,null),qa=wa.exports,xa={components:{MyTitle:Z,TutorialItem:qa},data:function(){return{list:[{url:"videos/1.webm",description:"Introducción a LoveApp"},{url:"videos/2.webm",description:"Crear un producto"},{url:"videos/3.webm",description:"Imprimir etiquetas"},{url:"videos/4.webm",description:"Editar un producto"}]}}},ya=xa,ka=Object(_["a"])(ya,ca,la,!1,null,null,null),ja=ka.exports;ft()(ka,"components",{QPage:na["a"]});var Sa=[{path:"tutorial",name:"tutorial",component:ja}],Oa=[{path:"/",component:function(){return Promise.all([a.e(0),a.e(3)]).then(a.bind(null,"713b"))},children:[{path:"",name:"home",component:function(){return a.e(2).then(a.bind(null,"218b"))}},{path:"stock",name:"stock",component:function(){return a.e(4).then(a.bind(null,"3895"))}}].concat(k()(I),k()(we),k()(ra),k()(Sa))},{path:"*",component:function(){return a.e(5).then(a.bind(null,"e51e"))}}],Qa=Oa;r["default"].use(x["a"]);var $a=function(){var t=new x["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:Qa,mode:"history",base:"/"});return t},Pa=function(){return Ia.apply(this,arguments)};function Ia(){return Ia=i()(n()().mark((function t(){var e,a,s;return n()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof q["a"]){t.next=6;break}return t.next=3,Object(q["a"])({Vue:r["default"]});case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=q["a"];case 7:if(e=t.t0,"function"!==typeof $a){t.next=14;break}return t.next=11,$a({Vue:r["default"],store:e});case 11:t.t1=t.sent,t.next=15;break;case 14:t.t1=$a;case 15:return a=t.t1,e.$router=a,s={router:a,store:e,render:function(t){return t(w)}},s.el="#q-app",t.abrupt("return",{app:s,store:e,router:a});case 20:case"end":return t.stop()}}),t)}))),Ia.apply(this,arguments)}var Da=a("a925"),Ra={failed:"Action failed",success:"Action was successful"},Aa={"en-US":Ra};r["default"].use(Da["a"]);var Ta=new Da["a"]({locale:"en-us",fallbackLocale:"en-us",messages:Aa}),La=function(t){var e=t.app;e.i18n=Ta};p["a"].setDefaults({position:"top",timeout:2500,textColor:"white",actions:[{icon:"close",color:"white"}]}),r["default"].prototype.$notify=a("1e4c");var Na=a("7037"),Fa=a.n(Na),Ea=(a("00b4"),a("b5ae")),Ba=a("78ef");r["default"].prototype.$rules={is:function(t,e){return e=void 0!==e&&e,function(a){var s;switch(Fa()(t)){case"string":s=String(a)===t;break;case"number":s=Number(a)===t;break;default:s=a===t}return s||e}},required:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Ea["required"](e)||t}},minLength:function(t,e){return e=void 0!==e&&e,function(a){return Ea["minLength"](t)(a)||e}},maxLength:function(t,e){return e=void 0!==e&&e,function(a){return Ea["maxLength"](t)(a)||e}},minValue:function(t,e){return e=void 0!==e&&e,function(a){return Ea["minValue"](t)(a)||e}},maxValue:function(t,e){return e=void 0!==e&&e,function(a){return Ea["maxValue"](t)(a)||e}},between:function(t,e,a){return a=void 0!==a&&a,function(s){return Ea["between"](t,e)(s)||a}},betweenLength:function(t,e,a){return a=void 0!==a&&a,function(s){return Ea["minLength"](t)(s)&&Ea["maxLength"](e)(s)||a}},alpha:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Ea["alpha"](e)||t}},alphaNum:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Ea["alphaNum"](e)||t}},numeric:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Ea["numeric"](e)||t}},integer:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Ea["integer"](e)||t}},decimal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Ea["decimal"](e)||t}},email:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Ea["email"](e)||t}},ipAddress:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Ea["ipAddress"](e)||t}},macAddress:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){return Ea["macAddress"](t)(a)||e}},url:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Ea["url"](e)||t}},or:function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];var s=!1;return"string"===typeof e[e.length-1]&&(s=e.pop()),function(t){return Ea["or"].apply(Ea,e)(t)||s}},and:function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];var s=!1;return"string"===typeof e[e.length-1]&&(s=e.pop()),function(t){return Ea["and"].apply(Ea,e)(t)||s}},not:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){return Ea["not"](t)(a)||e}},version:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return Object(Ba["regex"])("version",/^([1-9]\d*).([1-9]\d*).([1-9]\d*).([1-9]\d*)$/)(e)||t}},dni:function(){return function(t){var e,a,s,n=/^[XYZ]?\d{5,8}[A-Z]$/,o=t.toUpperCase();return!0===n.test(o)&&(e=o.substr(0,o.length-1),e=e.replace("X",0),e=e.replace("Y",1),e=e.replace("Z",2),a=o.substr(o.length-1,1),e%=23,s="TRWAGMYFPDXBNJZSQVHLCKET",s=s.substring(e,e+1),s==a)}},password:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){var a=/[a-zA-Z]/.test(e),s=/[0-9]/.test(e);return a&&s||t}}};var Ma=function(t){return Object(le["b"])(t)},Ya=function(t){return Object(le["c"])(t)},za=function(t){return Object(le["d"])(t)};r["default"].prototype.$formatterCurrency=Ma,r["default"].prototype.$formatterDate=Ya,r["default"].prototype.$formatterDateTime=za;var Va="/";function Ua(){return Wa.apply(this,arguments)}function Wa(){return Wa=i()(n()().mark((function t(){var e,a,s,o,i,c,l,u,d;return n()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pa();case 2:e=t.sent,a=e.app,s=e.store,o=e.router,i=!1,c=function(t){i=!0;var e=Object(t)===t?o.resolve(t).route.fullPath:t;window.location.href=e},l=window.location.href.replace(window.location.origin,""),u=[La,void 0,void 0,void 0],d=0;case 11:if(!(!1===i&&d<u.length)){t.next=29;break}if("function"===typeof u[d]){t.next=14;break}return t.abrupt("continue",26);case 14:return t.prev=14,t.next=17,u[d]({app:a,router:o,store:s,Vue:r["default"],ssrContext:null,redirect:c,urlPath:l,publicPath:Va});case 17:t.next=26;break;case 19:if(t.prev=19,t.t0=t["catch"](14),!t.t0||!t.t0.url){t.next=24;break}return window.location.href=t.t0.url,t.abrupt("return");case 24:return console.error("[Quasar] boot error:",t.t0),t.abrupt("return");case 26:d++,t.next=11;break;case 29:if(!0!==i){t.next=31;break}return t.abrupt("return");case 31:new r["default"](a);case 32:case"end":return t.stop()}}),t,null,[[14,19]])}))),Wa.apply(this,arguments)}Ua()},"31cd":function(t,e,a){},3789:function(t,e,a){"use strict";a("b0c0"),a("a4d3"),a("e01a");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.showing=!0}}},[e("q-icon",{attrs:{name:"mdi-square-edit-outline",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Editar producto")])],1),e("q-dialog",{ref:"mymodal",model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Editar producto")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs"},[e("div",{staticClass:"col-12 col-md-3 text-center"},[e("q-btn",{staticClass:"q-pa-md text-white",staticStyle:{background:"#2B2E36"},attrs:{round:"",size:"xl","no-caps":""},on:{click:function(e){return t.$refs.photofile.$el.click()}}},[t.photo_url?t._e():e("span",{staticStyle:{"font-size":"14px"}},[t._v("Añadir foto")]),t.photo_url?e("q-avatar",{attrs:{size:"8rem"}},[e("img",{attrs:{src:t.photo_url,alt:"dsdsd"}})]):t._e()],1),e("q-file",{ref:"photofile",staticClass:"hidden",attrs:{hidden:"",accept:".jpg, image/*"},on:{input:t.urlImage},model:{value:t.product.photo,callback:function(e){t.$set(t.product,"photo",e)},expression:"product.photo"}})],1),e("div",{staticClass:"col-12 col-md q-mt-sm q-mt-none-md text-white"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-4"},[t._v("\n                      Nombre:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.required()]},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Categoría:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.categories,"options-dense":"","option-label":function(t){return t.name},"label-color":"white",outlined:"",dense:"","use-input":"",clearable:"","popup-content-class":t.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue",placeholder:t.product.category_id?"":"Seleccione una categoría",color:"white",rules:[t.$rules.required()]},on:{filter:t.fnCategories},scopedSlots:t._u([{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[e("CategoryAdd",{staticClass:"full-width",attrs:{"full-width":!0},on:{newCategory:t.addCategory}})],1)],1)]},proxy:!0}]),model:{value:t.product.category_id,callback:function(e){t.$set(t.product,"category_id",e)},expression:"product.category_id"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Descripción:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:t.$q.screen.gt.sm?"Moet con sabor a fresa para invitados VIP.":"Descripción",color:"white",outlined:"","input-class":"text-white",dense:"",autogrow:"",type:"textarea"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Impresión etiqueta:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.tags,"options-dense":"","label-color":"white",outlined:"",dense:"","use-input":"","popup-content-class":"bg-dark-blue text-white"},model:{value:t.product.tag,callback:function(e){t.$set(t.product,"tag",e)},expression:"product.tag"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row items-center"},[t.$q.screen.gt.sm?e("div",{staticClass:"col text-center q-px-sm"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:t.$q.screen.gt.sm?"Editar producto":"Crear","no-caps":"",color:"red-5",size:"sm",rounded:"",dense:""}})],1):t._e()])])]),t.$q.screen.lt.md?e("div",{staticClass:"row q-pt-md"},[e("div",{staticClass:"col-12 text-center"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:"Editar producto","no-caps":"",color:"red-5",size:"md",rounded:"",dense:""}})],1)]):t._e()]),e("div",{staticClass:"col-1"})])])],1)],1)],1)])])],1)},n=[],o=a("7ec2"),i=a.n(o),r=a("c973"),c=a.n(r),l=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("e260"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("fa7d")),u=a("920e"),d=a("2b26"),p=a("ffc9"),f={components:{CategoryAdd:p["a"]},props:{productNew:{type:Object},liteVersion:{type:Boolean,default:!1},categories_all:{type:Array}},data:function(){return{showing:!1,product:{id:null,name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:null},tags:["Todas las unidades","Sin etiqueta"],photo_url:null,categories:[]}},methods:{submit:function(){var t=this;return c()(i()().mark((function e(){var a;return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.photo_url){e.next=3;break}return t.$notify.n("Debe agregar la foto del producto"),e.abrupt("return",!1);case 3:return a=Object(l["e"])(t.product),a.get("photo")||a.delete("photo"),e.next=7,Object(u["g"])(a);case 7:e.sent,t.showing=!1,t.$emit("updated");case 10:case"end":return e.stop()}}),e)})))()},setItems:function(){this.product=Object(l["a"])(this.product,this.productNew),this.photo_url="https://lovebeta.thecloudgroup.tech/"+this.product.photo,this.product.photo=[]},fnCategories:function(t,e,a){var s=this;e((function(){if(""===t)s.categories=s.categories_all;else{var e=t.toLowerCase();s.categories=s.categories_all.filter((function(t){var a;return null===t||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},findCategories:function(t){var e=this;return c()(i()().mark((function a(){return i()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(d["a"])(t);case 2:e.categories=e.categories_all=a.sent;case 3:case"end":return a.stop()}}),a)})))()},urlImage:function(){this.photo_url=URL.createObjectURL(this.product.photo)},addCategory:function(t){this.categories_all.push(t),this.product.category_id=t},cleanProduct:function(){this.product={name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:"Sin etiqueta"},this.photo_url=""}},mounted:function(){this.setItems()}},m=f,h=(a("ea85"),a("2877")),v=a("9c40"),b=a("0016"),g=a("24e8"),_=a("f09f"),C=a("65c6"),w=a("2c91"),q=a("a370"),x=a("0378"),y=a("cb32"),k=a("7d53"),j=a("27f9"),S=a("ddd8"),O=a("66e5"),Q=a("4074"),$=a("8572"),P=a("b047"),I=a("7f67"),D=a("eebe"),R=a.n(D),A=Object(h["a"])(m,s,n,!1,null,null,null);e["a"]=A.exports;R()(A,"components",{QBtn:v["a"],QIcon:b["a"],QDialog:g["a"],QCard:_["a"],QToolbar:C["a"],QSpace:w["a"],QCardSection:q["a"],QForm:x["a"],QAvatar:y["a"],QFile:k["a"],QInput:j["a"],QSelect:S["a"],QItem:O["a"],QItemSection:Q["a"],QField:$["a"],QChip:P["a"]}),R()(A,"directives",{ClosePopup:I["a"]})},"37ee":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 flex-center flex"},[e("LottiePlayer",{attrs:{path:"https://assets2.lottiefiles.com/private_files/lf30_e3pteeho.json"}})],1),t._m(0)])},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-12 text-center"},[e("h5",{staticClass:"text-white"},[t._v("No hay elementos para mostrar")])])}],o=(a("b0c0"),function(){var t=this,e=t._self._c;return e("VueLottiePlayer",{attrs:{name:t.name,loop:"",path:t.path}})}),i=[],r=(a("a9e3"),a("7b07")),c={components:{VueLottiePlayer:r["a"]},props:{path:{type:String},name:{type:[String,Number],default:"image"+Math.random()}},data:function(){return{}}},l=c,u=a("2877"),d=Object(u["a"])(l,o,i,!1,null,null,null),p=d.exports,f={components:{LottiePlayer:p},data:function(){return{}}},m=f,h=Object(u["a"])(m,s,n,!1,null,null,null);e["a"]=h.exports},4360:function(t,e,a){"use strict";var s={};a.r(s),a.d(s,"loggedIn",(function(){return p})),a.d(s,"accessToken",(function(){return f})),a.d(s,"user",(function(){return m})),a.d(s,"cookiesAccept",(function(){return h})),a.d(s,"firebaseToken",(function(){return v}));var n={};a.r(n),a.d(n,"updateLocalStorage",(function(){return g})),a.d(n,"destroyToken",(function(){return _})),a.d(n,"SetUser",(function(){return C})),a.d(n,"SetCookiesAccept",(function(){return w})),a.d(n,"SetFirebaseToken",(function(){return q}));var o={};a.r(o),a.d(o,"loginUser",(function(){return k})),a.d(o,"logoutUser",(function(){return j})),a.d(o,"getDataUser",(function(){return S})),a.d(o,"setCookiesAccept",(function(){return O})),a.d(o,"setFirebaseToken",(function(){return Q}));var i=a("2b0e"),r=a("2f62"),c=a("515f"),l=a("9516"),u=a.n(l),d="39293508030`234012-12=2=123123*&Q$*Q*$Q)(*(*)(*)(*$))($)(()(QJDAUD&QY*UEQE-+4324s";new u.a(d);function p(t){return null!=t.accessToken}function f(t){return t.accessToken}function m(t){return t.user}function h(t){return!0===t.cookies_accepted}function v(t){return t.firebaseToken}var b=function(){return{user:c["a"].get("lovetcguser"),accessToken:c["a"].get("lovetcgtoken"),cookies_accepted:c["a"].get("loveCookies"),firebaseToken:c["a"].get("lovefirebaseToken")}},g=function(t,e){var a=e.access;c["a"].set("lovetcgtoken",a,{expires:"8h",path:"/"}),t.accessToken=a},_=function(t){c["a"].remove("lovetcgtoken"),c["a"].remove("lovetcguser"),t.accessToken=t.user=null},C=function(t,e){c["a"].set("lovetcguser",e,{expires:"8h 5m",path:"/"}),t.user=e},w=function(t,e){c["a"].set("loveCookies",e,{path:"/",expires:"100h 5m"}),t.Cookies_accepted=e},q=function(t,e){c["a"].set("lovefirebaseToken",e,{path:"/",expires:100}),t.lovefirebaseToken=e},x=(a("d3b7"),a("e6cf"),a("fa7d")),y=a("758b");function k(t,e){return new Promise((function(a,s){y["a"].post("/auth/login",Object(x["e"])(e)).then((function(e){t.commit("updateLocalStorage",{access:e.data.access_token}),t.dispatch("getDataUser",e.data.access_token),a(e)})).catch((function(t){console.log(t),s(t)}))}))}function j(t){if(console.log("estoy loggin out"),t.getters.loggedIn)return new Promise((function(e,a){t.commit("destroyToken"),e(!0)}))}function S(t){return new Promise((function(e,a){y["a"].post("/auth/me").then((function(a){t.commit("SetUser",a.data),e()})).catch((function(t){a(t)}))}))}function O(t){t.commit("SetCookiesAccept",!0)}function Q(t,e){t.commit("SetFirebaseToken",e)}var $={namespaced:!0,state:b,getters:s,mutations:n,actions:o};i["default"].use(r["a"]);e["a"]=function(){return new r["a"].Store({modules:{mystore:$},strict:!1})}},4425:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("q-card-actions",{attrs:{align:"right"}},[t.lite?t._e():e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue","no-caps":t.capittal_letters}}),t.lite?t._e():e("q-btn",{attrs:{disable:!t.available,label:t.customLabel?t.customLabel:t.update?"Actualizar":"Crear",type:"submit",color:t.color,"no-caps":t.capittal_letters}}),t.lite?e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!t.available,label:t.customLabel?t.customLabel:t.update?"Actualizar":"Crear",color:t.color,"no-caps":t.capittal_letters}}):t._e()],1)},n=[],o=(a("a9e3"),{name:"FormCardAction",props:{update:{type:Boolean,default:!1},capittal_letters:{type:Boolean,default:!0},lite:{type:Boolean,default:!1},available:{type:[Boolean,Number],default:!0},customLabel:{type:String,default:null},color:{type:String,default:"darkless-blue"}},data:function(){return{}}}),i=o,r=a("2877"),c=a("4b7e"),l=a("9c40"),u=a("7f67"),d=a("eebe"),p=a.n(d),f=Object(r["a"])(i,s,n,!1,null,null,null);e["a"]=f.exports;p()(f,"components",{QCardActions:c["a"],QBtn:l["a"]}),p()(f,"directives",{ClosePopup:u["a"]})},"4f65":function(t,e,a){},"507a":function(t,e,a){"use strict";a("529b")},"529b":function(t,e,a){},"529d":function(t,e,a){},"57fb":function(t,e,a){"use strict";a("b0c0"),a("a4d3"),a("e01a");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.adding=!0}}},[e("q-icon",{attrs:{name:"mdi-numeric-positive-1",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Añadir stock")])],1),e("q-dialog",{ref:"mymodal",model:{value:t.adding,callback:function(e){t.adding=e},expression:"adding"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v('Agregar al stock del producto "'+t._s(t.product.name)+'"')]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs"},[e("div",{staticClass:"col-12 col-md-3 text-center"},[e("q-btn",{staticClass:"q-pa-md text-white",staticStyle:{background:"#2B2E36"},attrs:{round:"",size:"xl","no-caps":""}},[t.photo_url?e("q-avatar",{attrs:{size:"8rem"}},[e("img",{attrs:{src:t.photo_url,alt:"dsdsd"}})]):t._e()],1)],1),e("div",{staticClass:"col-12 col-md q-mt-sm q-mt-none-md text-white"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-4"},[t._v("\n                      Nombre:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",disable:"",rules:[t.$rules.required()]},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Descripción:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:t.$q.screen.gt.sm?"Moet con sabor a fresa para invitados VIP.":"Descripción",color:"white",outlined:"","input-class":"text-white",dense:"",autogrow:"",disable:"",type:"textarea"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Impresión etiqueta:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.tags,"options-dense":"","label-color":"white",outlined:"",dense:"","use-input":"",disable:"","popup-content-class":"bg-dark-blue text-white"},model:{value:t.product.tag,callback:function(e){t.$set(t.product,"tag",e)},expression:"product.tag"}})],1)]),e("div",{staticClass:"row items-center justify-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Precio Coste:\n                    ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"row justify-center q-mt-md"},[e("div",{staticClass:"col"},[e("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"34.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()]},model:{value:t.product.cost_price,callback:function(e){t.$set(t.product,"cost_price",e)},expression:"product.cost_price"}})],1),e("div",{staticClass:"col-4 text-center q-pt-sm"},[t._v(" Precio Venta:")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"44.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()]},model:{value:t.product.sell_price,callback:function(e){t.$set(t.product,"sell_price",e)},expression:"product.sell_price"}})],1)])])]),e("div",{staticClass:"row items-center justify-center"},[e("div",{staticClass:"col-4"},[t._v("\n                      Unidades a agregar:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{staticClass:"bordered",attrs:{"label-color":"white",outlined:"",dense:"",suffix:t.$q.screen.gt.sm?"unidades":"u","input-class":"text-white",rules:[t.$rules.required(),t.$rules.decimal()]},model:{value:t.product.quantity,callback:function(e){t.$set(t.product,"quantity",e)},expression:"product.quantity"}})],1)]),e("div",{staticClass:"row q-pt-md"},[e("div",{staticClass:"col-12 text-center"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:"Agregar al stock","no-caps":"",color:"red-5",size:"md",rounded:"",dense:""}})],1)])]),e("div",{staticClass:"col-1"})])])],1)],1)],1)])])],1)},n=[],o=a("7ec2"),i=a.n(o),r=a("c973"),c=a.n(r),l=a("fa7d"),u=a("83b9"),d={props:{liteVersion:{type:Boolean,default:!1},productNew:{type:Object}},computed:{photo_url:function(){return"https://lovebeta.thecloudgroup.tech/"+this.product.photo}},data:function(){return{adding:!1,product:{id:"",name:"",photo:"",description:"",quantity:1,cost_price:"",sell_price:"",tag:""},tags:["Todas las unidades","Sin etiqueta"]}},methods:{submit:function(){var t=this;return c()(i()().mark((function e(){return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["g"])(t.product);case 2:e.sent,t.adding=!1,t.$emit("updated");case 5:case"end":return e.stop()}}),e)})))()},setItems:function(){this.product=Object(l["a"])(this.product,this.productNew),this.product.quantity=1}},mounted:function(){this.setItems()}},p=d,f=a("2877"),m=a("9c40"),h=a("0016"),v=a("24e8"),b=a("f09f"),g=a("65c6"),_=a("2c91"),C=a("a370"),w=a("0378"),q=a("cb32"),x=a("27f9"),y=a("ddd8"),k=a("7f67"),j=a("eebe"),S=a.n(j),O=Object(f["a"])(p,s,n,!1,null,null,null);e["a"]=O.exports;S()(O,"components",{QBtn:m["a"],QIcon:h["a"],QDialog:v["a"],QCard:b["a"],QToolbar:g["a"],QSpace:_["a"],QCardSection:C["a"],QForm:w["a"],QAvatar:q["a"],QInput:x["a"],QSelect:y["a"]}),S()(O,"directives",{ClosePopup:k["a"]})},"64b2":function(t,e,a){"use strict";a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start full-width"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.showing=!0}},scopedSlots:t._u([{key:"default",fn:function(){return[e("q-icon",{attrs:{name:"mdi-trash-can",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Eliminar producto")])]},proxy:!0}])}),e("q-dialog",{ref:"mymodal",model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Eliminar producto")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs text-white"},[e("div",{staticClass:"col-12"},[t._v('¿Seguro que desea eliminar el producto con nombre "'+t._s(t.product.name)+'"?')]),e("div",{staticClass:"col-12 text-right q-gutter-xs"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"darkless-blue"}}),e("q-btn",{attrs:{label:"Eliminar",color:"dark",type:"submit"}})],1)])])],1)],1)],1)])])],1)},n=[],o=a("7ec2"),i=a.n(o),r=a("c973"),c=a.n(r),l=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("e260"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("fa7d")),u=a("920e"),d=a("2b26"),p=a("ffc9"),f=a("4425"),m={components:{FormCardAction:f["a"],CategoryAdd:p["a"]},props:{productNew:{type:Object},categories_all:{type:Array},liteVersion:{type:Boolean,default:!1}},data:function(){return{showing:!1,product:{id:null,name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:null},tags:["Todas las unidades","Sin etiqueta"],photo_url:null,categories:[]}},methods:{submit:function(){var t=this;return c()(i()().mark((function e(){return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["a"])(t.product);case 2:e.sent,t.showing=!1,t.$emit("updated");case 5:case"end":return e.stop()}}),e)})))()},setItems:function(){this.product=Object(l["a"])(this.product,this.productNew),this.photo_url="https://lovebeta.thecloudgroup.tech/"+this.product.photo,this.product.photo=[]},fnCategories:function(t,e,a){var s=this;e((function(){if(""===t)s.categories=s.categories_all;else{var e=t.toLowerCase();s.categories=s.categories_all.filter((function(t){var a;return null===t||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},findCategories:function(t){var e=this;return c()(i()().mark((function a(){return i()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(d["a"])(t);case 2:e.categories=e.categories_all=a.sent;case 3:case"end":return a.stop()}}),a)})))()},urlImage:function(){this.photo_url=URL.createObjectURL(this.product.photo)},addCategory:function(t){this.categories_all.push(t),this.product.category_id=t},cleanProduct:function(){this.product={name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:"Sin etiqueta"},this.photo_url=""}},mounted:function(){this.setItems()}},h=m,v=(a("6650"),a("2877")),b=a("9c40"),g=a("0016"),_=a("24e8"),C=a("f09f"),w=a("65c6"),q=a("2c91"),x=a("a370"),y=a("0378"),k=a("8572"),j=a("b047"),S=a("7f67"),O=a("eebe"),Q=a.n(O),$=Object(v["a"])(h,s,n,!1,null,null,null);e["a"]=$.exports;Q()($,"components",{QBtn:b["a"],QIcon:g["a"],QDialog:_["a"],QCard:C["a"],QToolbar:w["a"],QSpace:q["a"],QCardSection:x["a"],QForm:y["a"],QField:k["a"],QChip:j["a"]}),Q()($,"directives",{ClosePopup:S["a"]})},6650:function(t,e,a){"use strict";a("2ace")},"6f7b":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row",class:t.lite_mode?"":"full-width"},[t.able?e("q-btn",{class:t.lite_mode?"":"full-width",attrs:{"no-caps":"",align:t.lite_mode?"center":"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:t.printTags}},[e("q-icon",{attrs:{name:"mdi-printer",color:"red",size:"sm"}}),t.lite_mode?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Imprimir etiqueta")]),e("q-tooltip",[t._v("Impresión de etiquetas")])],1):t._e()],1)},n=[],o=a("7ec2"),i=a.n(o),r=a("c973"),c=a.n(r),l=a("920e"),u={props:{lote:{type:Object},product:{type:Object,default:null},lite_mode:{type:Boolean,default:!1},product_mode:{type:Boolean,default:!1}},computed:{able:function(){return this.product_mode?"Todas las unidades"===this.product.tag:"Todas las unidades"===this.lote.product.tag}},data:function(){return{}},methods:{printTags:function(){var t=this;return c()(i()().mark((function e(){var a,s;return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},t.product_mode||(a={lote_id:t.lote.id}),t.product_mode&&null!==t.product&&(a.product_id=t.product.id),e.next=5,Object(l["b"])(a);case 5:s=e.sent,console.log(s);case 7:case"end":return e.stop()}}),e)})))()}}},d=u,p=a("2877"),f=a("9c40"),m=a("0016"),h=a("05c0"),v=a("eebe"),b=a.n(v),g=Object(p["a"])(d,s,n,!1,null,null,null);e["a"]=g.exports;b()(g,"components",{QBtn:f["a"],QIcon:m["a"],QTooltip:h["a"]})},"758b":function(t,e,a){"use strict";a("d9e2"),a("d3b7"),a("e6cf"),a("99af"),a("ac1f"),a("5319");var s=a("bc3a"),n=a.n(s),o=a("515f"),i=a("4360"),r=a("1e4c"),c=a("2b0e"),l=n.a.create({baseURL:"https://lovebeta.thecloudgroup.tech/api/",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}});l.interceptors.request.use((function(t){return t.metadata={startTime:new Date},t.headers.authorization="Bearer "+o["a"].get("lovetcgtoken"),t}),(function(t){if(404===t.response.status)throw new Error("".concat(t.config.url," not found"));return Promise.reject(t)})),l.interceptors.response.use((function(t){return t.metadata={duration:new Date-t.config.metadata.startTime},t}),(function(t){if(t.response&&401===t.response.status){var e=Object(i["a"])().getters["mystore/accessToken"],a={Authorization:"Bearer "+e};e?l.post("".concat("https://lovebeta.thecloudgroup.tech/api/","auth/refresh?token=").concat(e),{},{headers:a}).then((function(e){var a=e.data.access_token;return o["a"].set("lovetcgtoken",a),l.defaults.headers.common["Authorization"]="Bearer "+a,l._retry=!0,l.request(t.config),l(t.config)})).catch((function(t){console.log("error",t)})):Object(i["a"])().dispatch("mystore/logoutUser").then((function(){Object(r["n"])("Sesión caducada. Debe volver a autenticarse"),window.location.replace("/")})).catch((function(t){console.log(t)}))}else{if(!t.response||404!==t.response.status)return Promise.reject(t);var s=o["a"].get("lovetcgtoken");s&&l.post("".concat("https://lovebeta.thecloudgroup.tech/api/","auth/refresh?token=").concat(s)).then((function(t){console.log(t);t.data;l._retry=!0})).catch((function(t){console.log("error",t)}))}})),c["default"].prototype.$axios=l,e["a"]=l},"77c5":function(t,e,a){},"7bef":function(t,e,a){"use strict";a("2ee3")},"7cc9":function(t,e,a){},"83b9":function(t,e,a){"use strict";a.d(e,"f",(function(){return i})),a.d(e,"g",(function(){return r})),a.d(e,"e",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return p}));a("d3b7"),a("e6cf"),a("b0c0");var s=a("758b"),n=a("f508"),o=a("1e4c");function i(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&n["a"].show(),new Promise((function(t,e){s["a"].get("lotes").then((function(e){n["a"].hide(),t(e)})).catch((function(t){n["a"].hide(),Object(o["n"])("El stock no está disponible en estos momentos"),e(t)}))}))}function r(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";n["a"].show();var i=null!==(e=t[a])&&void 0!==e?e:t.get(a);return new Promise((function(e,a){s["a"].post("lotes",t).then((function(t){Object(o["p"])("Lote ".concat(i," agregado correctamente")),n["a"].hide(),e(t.data.data)})).catch((function(e){var s;n["a"].hide(),Object(o["n"])("El lote ".concat(null!==(s=t.name)&&void 0!==s?s:""," no pudo ser agregado en estos momentos")),a(e)}))}))}function c(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;return t&&n["a"].show(),new Promise((function(t,a){console.log(e),s["a"].post("stock-operation-all",e).then((function(e){n["a"].hide(),t(e)})).catch((function(t){n["a"].hide(),Object(o["n"])("El stock no está disponible en estos momentos"),a(t)}))}))}function l(t){n["a"].show();var e=t.name;return new Promise((function(a,i){s["a"].post("stock-operation-cancel",t).then((function(t){Object(o["p"])("Operación ".concat(e," cancelada correctamente")),n["a"].hide(),a(t.data.data)})).catch((function(e){var a;n["a"].hide(),Object(o["n"])("La operación ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser cancelada en estos momentos")),i(e)}))}))}function u(t){return n["a"].show(),new Promise((function(e,a){s["a"].post("filter-operations",t).then((function(t){Object(o["p"])("Ventas obtenidas correctamente"),n["a"].hide(),e(t.data.data)})).catch((function(t){n["a"].hide(),Object(o["n"])("Las ventas no pudieron ser obtenidas en estos momentos"),a(t)}))}))}function d(t){n["a"].show();var e=t.name;return new Promise((function(a,i){s["a"].post("stock-operation-change",t).then((function(t){Object(o["p"])("Operación ".concat(e," cancelada correctamente")),n["a"].hide(),a(t.data.data)})).catch((function(e){var a;n["a"].hide(),Object(o["n"])("La operación ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser cancelada en estos momentos")),i(e)}))}))}function p(t){n["a"].show();var e=t.tag;return new Promise((function(a,i){s["a"].post("stock-operation-delete-item",t).then((function(t){Object(o["p"])("Elemento ".concat(e," eliminado correctamente")),n["a"].hide(),a(t.data.data)})).catch((function(e){var a;n["a"].hide(),Object(o["n"])("La elemento ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser eliminado en estos momentos")),i(e)}))}))}},"920e":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return r})),a.d(e,"f",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"a",(function(){return u})),a.d(e,"h",(function(){return d})),a.d(e,"b",(function(){return p})),a.d(e,"e",(function(){return f}));a("d3b7"),a("e6cf"),a("b0c0"),a("e260"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861");var s=a("758b"),n=a("f508"),o=a("1e4c");function i(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&n["a"].show(),new Promise((function(t,e){s["a"].get("products").then((function(e){n["a"].hide(),t(e)})).catch((function(t){n["a"].hide(),Object(o["n"])("Los productos no están disponibles en estos momentos"),e(t)}))}))}function r(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&n["a"].show(),new Promise((function(t,e){s["a"].get("products-lite").then((function(e){n["a"].hide(),t(e.data.data)})).catch((function(t){n["a"].hide(),Object(o["n"])("Los productos no están disponibles en estos momentos"),e(t)}))}))}function c(t){var e;n["a"].show();var a=null!==(e=t.get("name"))&&void 0!==e?e:t.name;return new Promise((function(e,i){s["a"].post("products",t).then((function(t){Object(o["p"])("Producto ".concat(a," agregado correctamente")),n["a"].hide(),e(t.data.data)})).catch((function(e){var a;n["a"].hide(),Object(o["n"])("El producto ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser agregado en estos momentos")),i(e)}))}))}function l(t){var e,a;n["a"].show();var i=null!==(e=t.get("name"))&&void 0!==e?e:t.name,r=null!==(a=t.get("id"))&&void 0!==a?a:t.id;return t.append("_method","put"),new Promise((function(e,a){s["a"].post("products/".concat(r),t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){Object(o["p"])("Producto ".concat(i," actualizado correctamente")),n["a"].hide(),e(t.data.data)})).catch((function(e){var s;n["a"].hide(),Object(o["n"])("El producto ".concat(null!==(s=t.name)&&void 0!==s?s:""," no pudo ser actualizado en estos momentos")),a(e)}))}))}function u(t){n["a"].show();var e=t.name,a=t.id;return new Promise((function(i,r){s["a"].delete("products/".concat(a),{_method:"delete"}).then((function(t){Object(o["p"])("Producto ".concat(e," eliminado correctamente")),n["a"].hide(),i(t.data.data)})).catch((function(e){var a;n["a"].hide(),Object(o["n"])("El producto ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser eliminado en estos momentos")),r(e)}))}))}function d(t){var e;n["a"].show();var a=null!==(e=t.name)&&void 0!==e?e:t.get("name");return console.log(t),new Promise((function(e,i){s["a"].post("sellProduct",t).then((function(t){Object(o["p"])("Producto ".concat(a," en stock actualizado correctamente")),n["a"].hide(),e(t.data.data)})).catch((function(e){var a,s,r;n["a"].hide(),null!==e&&void 0!==e&&null!==(a=e.response)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.data?Object(o["n"])(e.response.data.data):Object(o["n"])("El producto ".concat(null!==(r=t.name)&&void 0!==r?r:""," en stock no pudo ser actualizado en estos momentos")),i(e)}))}))}function p(t){var e=this;n["a"].show();"lote ".concat(t.id);return new Promise((function(a,o){s["a"].post("tag-download",t,{responseType:"blob"}).then((function(t){if(e.$q.loading.hide(),t.status<400){var a=URL.createObjectURL(new Blob([t.data],{type:"application/pdf"}));window.open(a)}})).catch((function(t){n["a"].hide(),o(t)}))}))}function f(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&n["a"].show(),new Promise((function(t,e){s["a"].get("products-withTags").then((function(e){n["a"].hide(),t(e.data.data)})).catch((function(t){n["a"].hide(),Object(o["n"])("Los productos no están disponibles en estos momentos"),e(t)}))}))}},a808:function(t,e,a){"use strict";a("ec9e")},b3f2:function(t,e,a){"use strict";var s=a("9523"),n=a.n(s),o=(a("b0c0"),function(){var t,e,a=this,s=a._self._c;return s("div",[s("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(t){a.selling=!0}}},[s("q-icon",{attrs:{name:"fa fa-dollar-sign",color:"red",size:"sm"}}),s("span",{staticClass:"q-pl-sm"},[a._v("Vender producto")])],1),s("q-dialog",{ref:"mymodal",on:{"before-hide":a.cleanSearch},model:{value:a.selling,callback:function(t){a.selling=t},expression:"selling"}},[s("div",{staticClass:"row justify-center",staticStyle:{"max-width":"75vw",width:"70vw"}},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[s("q-toolbar",[s("div",{staticClass:"row"},[s("span",{staticClass:"text-red",class:a.$q.screen.lt.sm?"col-12":""},[a._v("Venta de productos - Paso\n                  "+a._s(a.part)+" |")]),0===a.part?s("span",{staticClass:"text-red",class:a.$q.screen.lt.sm?"col-12":""},[a._v("  Seleccione un producto")]):a._e(),1===a.part?s("span",{staticClass:"text-red",class:a.$q.screen.lt.sm?"col-12":""},[a._v("  Cantidad de unidades a vender")]):a._e(),2===a.part?s("span",{staticClass:"text-red",class:a.$q.screen.lt.sm?"col-12":""},[a._v("  Marcar qué productos salen del stock")]):a._e()]),s("q-space"),s("q-btn",{attrs:{flat:"",round:"",dense:"",color:"info",icon:"mdi-keyboard-backspace",disable:0===a.part},on:{click:function(t){a.part=a.part-1}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),s("div",{staticClass:"col-12"},[0===a.part?s("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",{staticClass:"q-mt-sm"},[s("div",{staticClass:"row q-gutter-xs custom_css"},[s("div",{staticClass:"col-12"},[s("q-select",{staticClass:"col no-padding",attrs:(t={options:a.products_filtered,"options-dense":"","option-label":function(t){return t.name},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",loading:0===a.products_all.length&&!a.product,disable:0===a.products_all.length,dense:"","use-input":"",clearable:""},n()(t,"popup-content-class",a.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),n()(t,"label","Seleccione un producto"),n()(t,"color","white"),n()(t,"rules",[a.$rules.required()]),n()(t,"autofocus",""),t),on:{filter:a.filterProducts,input:a.setInitial,clear:function(t){a.tag=""},remove:function(t){a.tag=""}},model:{value:a.productSelect,callback:function(t){a.productSelect=t},expression:"productSelect"}})],1),s("div",{staticClass:"col-12"},[s("q-select",{staticClass:"col no-padding",attrs:(e={options:a.tagOptions,"options-dense":"","option-label":function(t){return t.tag},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",dense:"","use-input":"",clearable:""},n()(e,"popup-content-class",a.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),n()(e,"label","Seleccione una etiqueta"),n()(e,"color","white"),n()(e,"rules",[a.$rules.required()]),n()(e,"autofocus",""),n()(e,"disable",""===a.productSelect),e),on:{filter:a.fnProducts,input:a.changePart,clear:function(t){a.tag=""},remove:function(t){a.tag=""}},model:{value:a.tag,callback:function(t){a.tag=t},expression:"tag"}})],1),s("div",{staticClass:"col-12 text-right q-gutter-xs"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue"}})],1)])])],1):a._e(),1===a.part?s("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",{staticClass:"q-mt-sm"},[s("q-form",{on:{submit:a.secondPart}},[s("div",{staticClass:"row q-gutter-xs custom_css"},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",{staticClass:"q-mt-sm"},[s("div",{staticClass:"row q-gutter-xs"},[s("div",{staticClass:"col-12 col-md-3 text-center"},[s("q-btn",{staticClass:"q-pa-md text-white bg-darkless-blue",attrs:{round:"",size:"xl","no-caps":""}},[a.photo_url?s("q-avatar",{attrs:{size:"8rem"}},[s("img",{attrs:{src:a.photo_url,alt:"dsdsd"}})]):a._e()],1)],1),s("div",{staticClass:"col-12 col-md text-white"},[s("div",{staticClass:"row items-center"},[s("div",{staticClass:"col-4"},[a._v("\n                                Nombre:\n                              ")]),s("div",{staticClass:"col"},[s("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[a.$rules.required()],disable:""},model:{value:a.productReal.name,callback:function(t){a.$set(a.productReal,"name",t)},expression:"productReal.name"}})],1)]),s("div",{staticClass:"row items-center justify-center"},[s("div",{staticClass:"col-4"},[a._v("\n                                Precio Coste:\n                              ")]),s("div",{staticClass:"col"},[s("div",{staticClass:"row justify-center q-mt-md"},[s("div",{staticClass:"col"},[s("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"34.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[a.$rules.decimal(),a.$rules.required()],disable:""},model:{value:a.productReal.cost_price,callback:function(t){a.$set(a.productReal,"cost_price",t)},expression:"productReal.cost_price"}})],1),s("div",{staticClass:"col-4 text-center q-pt-sm"},[a._v(" Precio Venta:")]),s("div",{staticClass:"col"},[s("q-input",{attrs:{"label-color":"white",placeholder:"44.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[a.$rules.decimal(),a.$rules.required()]},model:{value:a.productReal.sell_price,callback:function(t){a.$set(a.productReal,"sell_price",t)},expression:"productReal.sell_price"}})],1)])])]),s("div",{staticClass:"row items-center justify-center"},[s("div",{staticClass:"col-4"},[a._v("\n                                Stock disponible:\n                              ")]),s("div",{staticClass:"col q-pr-xs"},[s("div",{staticClass:"row q-pr-sm"},[s("div",{staticClass:"col"},[s("q-input",{staticClass:"bordered full-width",attrs:{"label-color":"white",outlined:"",dense:"","input-class":"text-white",rules:[a.$rules.required(),a.$rules.decimal(),a.$rules.maxValue(a.realQuantity),a.$rules.minValue(1)],autofocus:""},model:{value:a.stock,callback:function(t){a.stock=t},expression:"stock"}})],1)])]),s("div",{staticClass:"col-5"},[a._v("\n                                Dispones de "+a._s(a.realQuantity)+" unidades máximas\n                              ")])])]),s("div",{staticClass:"col-1"})])])],1)],1),s("div",{staticClass:"col-12 text-center q-gutter-xs"},[s("q-btn",{attrs:{color:"red",rounded:"","no-caps":"",type:"submit",label:"Confirmar la venta y proceder a control de stock"}})],1)])])],1),a._v("\nz          ")],1):a._e(),2===a.part?s("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",{staticClass:"q-mt-sm"},[s("q-form",{on:{submit:a.submit}},[s("div",{staticClass:"row q-gutter-xs custom_css"},[a._l(a.sell,(function(t){var e;return s("div",{key:t.id,staticClass:"col-12"},[s("q-card",{staticClass:"bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",[s("div",{staticClass:"row q-gutter-xs"},[s("div",{staticClass:"col-12 col-md text-center"},[s("q-btn",{staticClass:"q-pa-md text-white bg-darkless-blue",attrs:{round:"",size:"md","no-caps":"",disable:""}},[a.photo_url?s("q-avatar",{attrs:{size:"6rem"}},[s("img",{attrs:{src:a.photo_url,alt:"dsdsd"}})]):a._e()],1)],1),s("div",{staticClass:"col-12 col-md-9 text-white",class:a.$q.screen.lt.sm?"text-center":""},[s("div",{staticClass:"row q-pa-sm items-center justify-center"},[s("div",{staticClass:"col-12 col-md-3"},[a._v("\n                                Nombre:\n                              ")]),s("div",{staticClass:"col-12 col-md text-white"},[s("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[a.$rules.required()],disable:""},model:{value:t.name,callback:function(e){a.$set(t,"name",e)},expression:"item.name"}})],1)]),s("div",{staticClass:"row q-pa-sm items-center justify-center"},[s("div",{staticClass:"col-12 col-md-3"},[a._v("\n                                Código de Barras:\n                              ")]),s("div",{staticClass:"col-12 col-md text-white"},[s("q-select",{staticClass:"col no-padding",attrs:(e={options:a.tagOptions,"options-dense":"","option-label":function(t){return t.tag},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",dense:"","use-input":"",clearable:""},n()(e,"popup-content-class",a.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),n()(e,"label","Seleccione un producto"),n()(e,"color","white"),n()(e,"rules",[a.$rules.required()]),n()(e,"autofocus",""),e),on:{filter:a.fnTagByroducts},model:{value:t.code,callback:function(e){a.$set(t,"code",e)},expression:"item.code"}})],1)])])])])],1),t.id<a.sell.length-1?s("q-separator",{staticClass:"q-mx-lg",attrs:{color:"white",size:"1px"}}):a._e()],1)})),s("div",{staticClass:"col-12 text-center q-gutter-xs"},[s("q-btn",{attrs:{color:"red",rounded:"","no-caps":"",type:"submit",label:"Confirmar la venta y reducir el stock"}})],1)],2)])],1)],1):a._e()],1)])])],1)}),i=[],r=a("7ec2"),c=a.n(r),l=a("c973"),u=a.n(l),d=a("448a"),p=a.n(d),f=a("ded3"),m=a.n(f),h=(a("d81d"),a("0481"),a("4069"),a("caad"),a("2532"),a("4de4"),a("d3b7"),a("e260"),a("ddb0"),a("159b"),a("920e")),v=a("e222"),b=a("2f62"),g=a("ffc9"),_=a("fa7d"),C={components:{CategoryAdd:g["a"],ProductSearchItem:v["a"]},name:"ProductSellB",props:{lite_mode:{type:Boolean,default:!1},menu_mode:{type:Boolean,default:!1},sign_mode:{type:Boolean,default:!1},product:{type:Object,default:null},lote:{type:Object,default:null},products:{type:Array,default:null},tags:{type:Array,default:null}},computed:m()({photo_url:function(){var t;return"https://lovebeta.thecloudgroup.tech/"+(null===(t=this.productReal)||void 0===t?void 0:t.photo)||!1},realQuantity:function(){var t,e;return this.loteReal?this.loteReal.quantityStock:null!==(t=null===(e=this.productReal)||void 0===e?void 0:e.quantity)&&void 0!==t?t:0},tagOptions:function(){if(this.productSelect){var t,e=this.productSelect.lotes.map((function(t){return t.id})),a=this.sell.map((function(t){return t.code.id})).flat(1),s=function(t){return e.includes(t.lote_id)},n=function(t){return!a.includes(t.id)};return this.tags_filtered=this.tags_all=this.productSelect.lotes.flat(1).map((function(t){return t.tags})).flat(1),null!==(t=this.tags_all.filter(s).filter(n))&&void 0!==t?t:[]}return[]}},Object(b["b"])({logged:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{selling:!1,productReal:{id:0,photo:null,sell_price:0,cost_price:0,quantity:0,name:"",tag:"",lotes:[],lite:!1},productSelect:"",waiting:!1,part:0,stock:1,products_all:[],products_filtered:[],tags_all:[],tags_filtered:[],tag:[],sell:[],loteReal:null}},methods:{setInitial:function(){"Todas las unidades"!==this.productSelect.tag&&(this.product||(this.productReal=this.productSelect,this.tags_filtered=this.tags_all=this.productReal.lotes.flat(1).map((function(t){return t.tags})).flat(1)),this.destructure(this.productSelect),this.part=1)},changePart:function(){var t,e=this,a=this.productSelect,s=null===(t=this.productSelect.lotes)||void 0===t?void 0:t.filter((function(t){return t.id===e.tag.lote_id}))[0];this.productReal=Object(_["a"])(this.productReal,a),this.destructure(a),s&&(this.productReal.cost_price=s.cost_price,this.productReal.sell_price=s.sell_price,this.productReal.quantity=s.tags.filter((function(t){return!t.deleted_at})).length),this.part=1},destructure:function(t){this.productReal.lotes=t.lotes,this.productReal.photo=t.photo,this.productReal.name=t.name,this.productReal.tag=t.tag},secondPart:function(){var t=this;if("Todas las unidades"!==this.productReal.tag)this.productReal.lite=!0,this.submit();else{var e=p()(Array(parseInt(this.stock)-1).keys());this.sell=[];var a={id:0,name:this.productReal.name,code:this.tag};this.sell.push(a),e.forEach((function(e){var a={id:e+1,name:t.productReal.name,code:""};t.sell.push(a)})),this.part=2}},filterProducts:function(t,e,a){var s=this;e((function(){if(""===t)s.products_filtered=s.products_all;else{var e=t.toLowerCase();s.products_filtered=s.products_all.filter((function(t){var a;return null===t||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},fnProducts:function(t,e,a){var s=this;e((function(){if(""===t)s.products_filtered=s.products_all;else{var e=t.toLowerCase();s.products_filtered=s.products_all.filter((function(t){var a;return null===t||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},fnTagByroducts:function(t,e,a){var s=this,n=this.productReal.lotes.map((function(t){return t.id})),o=this.sell.map((function(t){return t.code.id})).flat(1),i=function(t){return n.includes(t.lote_id)},r=function(t){return!o.includes(t.id)};e((function(){if(""===t)s.tags_filtered=s.tags_all.filter(i);else{var e=t.toLowerCase();s.tags_filtered=s.tags_all.filter(i).filter(r).filter((function(t){var a;return null===t||void 0===t||null===(a=t.tag)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},cleanSearch:function(){this.part=0,this.productSelect="",this.$emit("updated")},submit:function(){var t=this;return u()(c()().mark((function e(){var a,s;return c()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={product:t.productReal,sell:t.sell,name:t.productReal.name,quantity:t.stock,lote:null!==(a=t.loteReal)&&void 0!==a?a:null},console.log(s),e.next=4,Object(h["h"])(Object(_["f"])(s));case 4:t.part=0,t.selling=!1,t.tag="",t.products_filtered=t.products_all=[],t.tags_filtered=t.tags_all=[],t.$emit("updated");case 10:case"end":return e.stop()}}),e)})))()},findProducts:function(){var t=arguments,e=this;return u()(c()().mark((function a(){var s,n,o;return c()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=!(t.length>0&&void 0!==t[0])||t[0],e.products_filtered=e.products_all=[],a.next=4,Object(h["c"])(s);case 4:n=a.sent,n.status<400&&(o=n.data.data,e.products_filtered=e.products_all=o,e.product&&("Sin etiqueta"!==e.product.tag&&(e.tags_filtered=e.tags_all=o.map((function(t){return t.lotes})).flat(1).map((function(t){return t.tags})).flat(1)),e.setItems()));case 6:case"end":return a.stop()}}),a)})))()},setItems:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.productSelect=t,this.productReal=Object(_["a"])(this.productReal,t),e?(this.productReal.lotes=this.productSelect.lotes=e,this.tags_filtered=this.tags_all=e.map((function(t){return t.tags})).flat(1)):(this.productReal.lotes=t.lotes,this.tags_filtered=this.tags_all=this.productReal.lotes.flat(1).map((function(t){return t.tags})).flat(1),console.log(this.productReal.lotes.map((function(t){return t.tags})).flat(1))),this.productReal.photo=t.photo,this.productReal.name=t.name,this.productReal.tag=t.tag,1===(null===e||void 0===e?void 0:e.length)&&(this.productReal.cost_price=e[0].cost_price,this.productReal.sell_price=e[0].sell_price)}},mounted:function(){this.productSelect=this.productReal=this.product,this.setItems(this.product),"Sin etiqueta"===this.product.tag&&(this.part=1)}},w=C,q=(a("0ad5"),a("2877")),x=a("9c40"),y=a("0016"),k=a("24e8"),j=a("f09f"),S=a("65c6"),O=a("2c91"),Q=a("a370"),$=a("ddd8"),P=a("0378"),I=a("cb32"),D=a("27f9"),R=a("eb85"),A=a("8572"),T=a("a12b"),L=a("7f67"),N=a("eebe"),F=a.n(N),E=Object(q["a"])(w,o,i,!1,null,null,null);e["a"]=E.exports;F()(E,"components",{QBtn:x["a"],QIcon:y["a"],QDialog:k["a"],QCard:j["a"],QToolbar:S["a"],QSpace:O["a"],QCardSection:Q["a"],QSelect:$["a"],QForm:P["a"],QAvatar:I["a"],QInput:D["a"],QSeparator:R["a"],QField:A["a"],QVirtualScroll:T["a"]}),F()(E,"directives",{ClosePopup:L["a"]})},bda9:function(t,e,a){"use strict";a("77c5")},d059:function(t,e,a){"use strict";a("7cc9")},e222:function(t,e,a){"use strict";a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col text-left"},[t._v(t._s(t.product.name))]),e("div",{staticClass:"col text-center"},[t._v(t._s(t.formatterCurrency(t.product.sell_price)))]),e("div",{staticClass:"col text-center"},[t._v(t._s(t.formatterCurrency(t.product.cost_price)))]),e("div",{staticClass:"col"},[t._v(t._s(t.product.category.name))]),t.loggedIn?e("div",{staticClass:"col-1 text-center"},[e("div",{staticClass:"row q-gutter-sm bg-darkless-blue text-center"},[1===t.user.role_id?e("ProductEdit",{staticClass:"col",attrs:{"lite-version":!0,"product-new":t.product},on:{updated:function(e){return t.$emit("updated")}}}):t._e(),1===t.user.role_id?e("ProductDelete",{staticClass:"col",attrs:{"lite-version":!0,"product-new":t.product},on:{updated:function(e){return t.$emit("updated")}}}):t._e()],1)]):t._e()])},n=[],o=a("ded3"),i=a.n(o),r=a("fa7d"),c=a("3789"),l=a("64b2"),u=a("2f62"),d={components:{ProductDelete:l["a"],ProductEdit:c["a"]},props:{product:{type:Object}},computed:i()({},Object(u["b"])({loggedIn:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{}},methods:{formatterCurrency:function(t){return Object(r["b"])(t)}}},p=d,f=a("2877"),m=Object(f["a"])(p,s,n,!1,null,null,null);e["a"]=m.exports},ea85:function(t,e,a){"use strict";a("4f65")},ec9e:function(t,e,a){},f08d:function(t,e,a){"use strict";a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-white items-center justify-center"},[e("div",{staticClass:"col-12"},[1===t.number?e("q-expansion-item",{staticClass:"full-width",attrs:{label:"Lotes",dense:"","expand-icon-class":"text-dark-blue q-px-sm"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"row full-width items-center"},[e("div",{staticClass:"col-1 text-center"},[t._v("No.")]),e("div",{staticClass:"col"},[t._v("Nombre")]),e("div",{staticClass:"col-2 text-center"},[t._v("Stock")]),e("div",{staticClass:"col-3"},[t._v(" Acciones")])])]},proxy:!0}],null,!1,1838198698)}):t._e()],1),e("div",{staticClass:"col-12"},[e("q-expansion-item",{staticClass:"full-width",class:t.number%2!==0?"bg-darkless-blue":"",attrs:{"expand-separator":"",icon:"perm_identity",label:"Lotes",dense:""},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"row full-width items-center"},[e("div",{staticClass:"col-1 text-center"},[t._v(t._s(t.number))]),e("div",{staticClass:"col"},[t._v(t._s(t.product.name))]),e("div",{staticClass:"col-2 text-center"},[t._v(t._s(t.product.quantity))]),e("div",{staticClass:"col-3"},[e("div",{staticClass:"row"},[e("stock-add",{attrs:{"lite-version":!0,"product-new":t.product},on:{updated:function(e){return t.$emit("updated")}}}),t.categories.length?e("product-edit",{attrs:{"product-new":t.product,"lite-version":!0,categories_all:t.categories},on:{updated:function(e){return t.$emit("updated")}}}):t._e(),t.product?e("ProductSellB",{attrs:{product:t.product,products:t.products,tags:t.tags},on:{updated:function(e){return t.$emit("updated")}}}):t._e()],1)])])]},proxy:!0}])},[e("q-card",[e("q-card-section",{staticClass:"bg-darkless-blue full-width"},[e("q-markup-table",{staticClass:"full-width",attrs:{dense:"","wrap-cells":"",bordered:"",separator:"cell",dark:""}},[e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("No.")]),e("th",{staticClass:"text-center"},[t._v("Fecha de venta")]),e("th",{staticClass:"text-center"},[t._v("En stock")]),e("th",{staticClass:"text-center"},[t._v("Unidades Total")]),e("th",{staticClass:"text-center"},[t._v("P/costo")]),e("th",{staticClass:"text-center"},[t._v("P/venta")]),e("th",{staticClass:"text-center"},[t._v("Creado")]),t.user&&1===t.user.role_id?e("th",{staticClass:"text-center"},[t._v("\n                Acciones\n              ")]):t._e()])]),e("tbody",t._l(t.lotes,(function(a,s){return e("StockItem",{key:a.id,attrs:{stock:a,number:s+1,products:t.products,product:t.product},on:{updated:function(e){return t.$emit("updated")}}})})),1)])],1)],1)],1)],1)])},n=[],o=a("ded3"),i=a.n(o),r=(a("a9e3"),a("4e82"),a("57fb")),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"}},[e("q-icon",{attrs:{name:"mdi-numeric-negative-1",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Disminuir stock")])],1)],1)},l=[],u={props:{liteVersion:{type:Boolean,default:!1}},data:function(){return{}}},d=u,p=a("2877"),f=a("9c40"),m=a("0016"),h=a("eebe"),v=a.n(h),b=Object(p["a"])(d,c,l,!1,null,null,null),g=b.exports;v()(b,"components",{QBtn:f["a"],QIcon:m["a"]});var _=a("3789"),C=function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticClass:"col-1 text-center"},[t._v(t._s(t.number))]),e("td",{staticClass:"col"},[t._v(t._s(t.formatterDate(t.stock.buy_date)))]),e("td",{staticClass:"col text-center"},[t._v(t._s(t.stock.quantityStock))]),e("td",{staticClass:"col text-center"},[t._v(t._s(t.stock.quantityReal))]),e("td",{staticClass:"col text-center"},[t._v(t._s(t.formatterCurrency(t.stock.cost_price||0)))]),e("td",{staticClass:"col text-center"},[t._v(t._s(t.formatterCurrency(t.stock.sell_price||0)))]),e("td",{staticClass:"col text-center"},[t._v(t._s(t.formatterDate(t.stock.created_at)))]),t.user&&1===t.user.role_id?e("td",{staticClass:"col text-center"},[e("div",{staticClass:"row items-center justify-center"},[e("TagPrint",{attrs:{lote:t.stock,lite_mode:!0}}),t.stock?e("ProductSellC",{attrs:{product:t.product,products:t.products,tags:t.tags,lote:t.stock},on:{updated:function(e){return t.$emit("updated")}}}):t._e()],1)]):t._e()])},w=[],q=a("fa7d"),x=a("6f7b"),y=a("2f62"),k=a("9523"),j=a.n(k),S=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(e){t.selling=!0}}},[e("q-icon",{attrs:{name:"fa fa-dollar-sign",color:"red",size:"sm"}}),e("span",{staticClass:"q-pl-sm"},[t._v("Vender producto")])],1),e("q-dialog",{ref:"mymodal",on:{"before-hide":t.cleanSearch},model:{value:t.selling,callback:function(e){t.selling=e},expression:"selling"}},[e("div",{staticClass:"row justify-center",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("div",{staticClass:"row"},[e("span",{staticClass:"text-red",class:t.$q.screen.lt.sm?"col-12":""},[t._v("Venta de productos - Paso\n                "+t._s(t.part)+" |")]),0===t.part?e("span",{staticClass:"text-red",class:t.$q.screen.lt.sm?"col-12":""},[t._v("  Seleccione un producto")]):t._e(),1===t.part?e("span",{staticClass:"text-red",class:t.$q.screen.lt.sm?"col-12":""},[t._v("  Cantidad de unidades a vender")]):t._e(),2===t.part?e("span",{staticClass:"text-red",class:t.$q.screen.lt.sm?"col-12":""},[t._v("  Marcar qué productos salen del stock")]):t._e()]),e("q-space"),e("q-btn",{attrs:{flat:"",round:"",dense:"",color:"info",icon:"mdi-keyboard-backspace",disable:1===t.part},on:{click:function(e){t.part=1}}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[1===t.part?e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.secondPart}},[e("div",{staticClass:"row q-gutter-xs custom_css"},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("div",{staticClass:"row q-gutter-xs"},[e("div",{staticClass:"col-12 col-md-3 text-center"},[e("q-btn",{staticClass:"q-pa-md text-white bg-darkless-blue",attrs:{round:"",size:"xl","no-caps":""}},[t.photo_url?e("q-avatar",{attrs:{size:"8rem"}},[e("img",{attrs:{src:t.photo_url,alt:"dsdsd"}})]):t._e()],1)],1),e("div",{staticClass:"col-12 col-md text-white"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-4"},[t._v("\n                              Nombre:\n                            ")]),e("div",{staticClass:"col"},[e("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.required()],disable:""},model:{value:t.productReal.name,callback:function(e){t.$set(t.productReal,"name",e)},expression:"productReal.name"}})],1)]),e("div",{staticClass:"row items-center justify-center"},[e("div",{staticClass:"col-4"},[t._v("\n                              Precio Coste:\n                            ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"row justify-center q-mt-md"},[e("div",{staticClass:"col"},[e("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"34.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()],disable:""},model:{value:t.productReal.cost_price,callback:function(e){t.$set(t.productReal,"cost_price",e)},expression:"productReal.cost_price"}})],1),e("div",{staticClass:"col-4 text-center q-pt-sm"},[t._v(" Precio Venta:")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"44.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()]},model:{value:t.productReal.sell_price,callback:function(e){t.$set(t.productReal,"sell_price",e)},expression:"productReal.sell_price"}})],1)])])]),e("div",{staticClass:"row items-center justify-center"},[e("div",{staticClass:"col-4"},[t._v("\n                              Stock disponible:\n                            ")]),e("div",{staticClass:"col q-pr-xs"},[e("div",{staticClass:"row q-pr-sm"},[e("div",{staticClass:"col"},[e("q-input",{staticClass:"bordered full-width",attrs:{"label-color":"white",outlined:"",dense:"","input-class":"text-white",rules:[t.$rules.required(),t.$rules.decimal(),t.$rules.maxValue(t.realQuantity),t.$rules.minValue(1)],autofocus:""},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}})],1)])]),e("div",{staticClass:"col-5"},[t._v("\n                              Dispones de "+t._s(t.realQuantity)+" unidades máximas\n                            ")])])]),e("div",{staticClass:"col-1"})])])],1)],1),e("div",{staticClass:"col-12 text-center q-gutter-xs"},[e("q-btn",{attrs:{color:"red",rounded:"","no-caps":"",type:"submit",label:"Confirmar la venta y proceder a control de stock"}})],1)])])],1),t._v("\n          z\n        ")],1):t._e(),2===t.part?e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs custom_css"},[t._l(t.sell,(function(a){var s;return e("div",{key:a.id,staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",[e("div",{staticClass:"row q-gutter-xs"},[e("div",{staticClass:"col-12 col-md text-center"},[e("q-btn",{staticClass:"q-pa-md text-white bg-darkless-blue",attrs:{round:"",size:"md","no-caps":"",disable:""}},[t.photo_url?e("q-avatar",{attrs:{size:"6rem"}},[e("img",{attrs:{src:t.photo_url,alt:"dsdsd"}})]):t._e()],1)],1),e("div",{staticClass:"col-12 col-md-9 text-white",class:t.$q.screen.lt.sm?"text-center":""},[e("div",{staticClass:"row q-pa-sm items-center justify-center"},[e("div",{staticClass:"col-12 col-md-3"},[t._v("\n                              Nombre:\n                            ")]),e("div",{staticClass:"col-12 col-md text-white"},[e("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.required()],disable:""},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"item.name"}})],1)]),e("div",{staticClass:"row q-pa-sm items-center justify-center"},[e("div",{staticClass:"col-12 col-md-3"},[t._v("\n                              Código de Barras:\n                            ")]),e("div",{staticClass:"col-12 col-md text-white"},[e("q-select",{staticClass:"col no-padding",attrs:(s={options:t.tagOptions,"options-dense":"","option-label":function(t){return t.tag},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",dense:"","use-input":"",clearable:""},j()(s,"popup-content-class",t.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),j()(s,"label","Seleccione un producto"),j()(s,"color","white"),j()(s,"rules",[t.$rules.required()]),j()(s,"autofocus",""),s),on:{filter:t.fnTagByroducts},model:{value:a.code,callback:function(e){t.$set(a,"code",e)},expression:"item.code"}})],1)])])])])],1),a.id<t.sell.length-1?e("q-separator",{staticClass:"q-mx-lg",attrs:{color:"white",size:"1px"}}):t._e()],1)})),e("div",{staticClass:"col-12 text-center q-gutter-xs"},[e("q-btn",{attrs:{color:"red",rounded:"","no-caps":"",type:"submit",label:"Confirmar la venta y reducir el stock"}})],1)],2)])],1)],1):t._e()],1)])])],1)},O=[],Q=a("7ec2"),$=a.n(Q),P=a("c973"),I=a.n(P),D=a("448a"),R=a.n(D),A=(a("d81d"),a("0481"),a("4069"),a("caad"),a("2532"),a("4de4"),a("d3b7"),a("e260"),a("ddb0"),a("159b"),a("920e")),T=a("e222"),L=a("ffc9"),N={components:{CategoryAdd:L["a"],ProductSearchItem:T["a"]},props:{lite_mode:{type:Boolean,default:!1},menu_mode:{type:Boolean,default:!1},sign_mode:{type:Boolean,default:!1},product:{type:Object,default:null},lote:{type:Object,default:null},products:{type:Array,default:null},tags:{type:Array,default:null}},computed:i()({photo_url:function(){var t;return"https://lovebeta.thecloudgroup.tech/"+(null===(t=this.productReal)||void 0===t?void 0:t.photo)||!1},realQuantity:function(){var t,e;return this.loteReal?this.loteReal.quantityStock:null!==(t=null===(e=this.productReal)||void 0===e?void 0:e.quantity)&&void 0!==t?t:0},tagOptions:function(){if(this.productSelect){var t,e=this.productSelect.lotes.map((function(t){return t.id})),a=this.sell.map((function(t){return t.code.id})).flat(1),s=function(t){return e.includes(t.lote_id)},n=function(t){return!a.includes(t.id)};return this.tags_filtered=this.tags_all=this.productSelect.lotes.flat(1).map((function(t){return t.tags})).flat(1),null!==(t=this.tags_all.filter(s).filter(n))&&void 0!==t?t:[]}return[]}},Object(y["b"])({logged:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{selling:!1,productReal:{id:0,photo:null,sell_price:0,cost_price:0,quantity:0,name:"",tag:"",lotes:[],lite:!1},productSelect:"",waiting:!1,part:0,stock:1,products_all:[],products_filtered:[],tags_all:[],tags_filtered:[],tag:[],sell:[],loteReal:null}},methods:{setInitial:function(){"Todas las unidades"!==this.productSelect.tag&&(this.product||(this.productReal=this.productSelect,this.tags_filtered=this.tags_all=this.productReal.lotes.flat(1).map((function(t){return t.tags})).flat(1)),this.destructure(this.productSelect),this.part=1)},changePart:function(){var t,e=this,a=this.productSelect,s=null===(t=this.productSelect.lotes)||void 0===t?void 0:t.filter((function(t){return t.id===e.tag.lote_id}))[0];this.productReal=Object(q["a"])(this.productReal,a),this.destructure(a),s&&(this.productReal.cost_price=s.cost_price,this.productReal.sell_price=s.sell_price,this.productReal.quantity=s.tags.filter((function(t){return!t.deleted_at})).length),this.part=1},destructure:function(t){this.productReal.lotes=t.lotes,this.productReal.photo=t.photo,this.productReal.name=t.name,this.productReal.tag=t.tag},secondPart:function(){var t=this;if("Todas las unidades"!==this.productReal.tag)this.productReal.lite=!0,this.submit();else{var e=R()(Array(parseInt(this.stock)).keys());this.sell=[],e.forEach((function(e){var a={id:e,name:t.productReal.name,code:""};t.sell.push(a)})),this.part=2}},filterProducts:function(t,e,a){var s=this;e((function(){if(""===t)s.products_filtered=s.products_all;else{var e=t.toLowerCase();s.products_filtered=s.products_all.filter((function(t){var a;return null===t||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},fnProducts:function(t,e,a){var s=this;e((function(){if(""===t)s.products_filtered=s.products_all;else{var e=t.toLowerCase();s.products_filtered=s.products_all.filter((function(t){var a;return null===t||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},fnTagByroducts:function(t,e,a){var s=this,n=this.productReal.lotes.map((function(t){return t.id})),o=this.sell.map((function(t){return t.code.id})).flat(1),i=function(t){return n.includes(t.lote_id)},r=function(t){return!o.includes(t.id)};e((function(){if(""===t)s.tags_filtered=s.tags_all.filter(i);else{var e=t.toLowerCase();s.tags_filtered=s.tags_all.filter(i).filter(r).filter((function(t){var a;return null===t||void 0===t||null===(a=t.tag)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},cleanSearch:function(){this.part=0,this.productSelect="",this.$emit("updated")},submit:function(){var t=this;return I()($()().mark((function e(){var a,s,n;return $()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={product:t.productReal,sell:t.sell,name:t.productReal.name,quantity:t.stock,lote:null!==(a=t.loteReal)&&void 0!==a?a:null},delete s.lote.tags,delete s.product.lotes,console.log(s),e.next=6,Object(A["h"])(Object(q["f"])(s));case 6:n=e.sent,console.log(n),t.part=0,t.selling=!1,t.tag="",t.products_filtered=t.products_all=[],t.tags_filtered=t.tags_all=[],t.$emit("updated");case 14:case"end":return e.stop()}}),e)})))()},findProducts:function(){var t=arguments,e=this;return I()($()().mark((function a(){var s,n,o;return $()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=!(t.length>0&&void 0!==t[0])||t[0],e.products_filtered=e.products_all=[],a.next=4,Object(A["c"])(s);case 4:n=a.sent,n.status<400&&(o=n.data.data,e.products_filtered=e.products_all=o,e.product&&("Sin etiqueta"!==e.product.tag&&(e.tags_filtered=e.tags_all=o.map((function(t){return t.lotes})).flat(1).map((function(t){return t.tags})).flat(1)),e.setItems()));case 6:case"end":return a.stop()}}),a)})))()},setItems:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.productSelect=t,this.productReal=Object(q["a"])(this.productReal,t),e?(this.productReal.lotes=this.productSelect.lotes=e,this.tags_filtered=this.tags_all=e.map((function(t){return t.tags})).flat(1)):(this.productReal.lotes=t.lotes,this.tags_filtered=this.tags_all=this.productReal.lotes.flat(1).map((function(t){return t.tags})).flat(1),console.log(this.productReal.lotes.map((function(t){return t.tags})).flat(1))),this.productReal.photo=t.photo,this.productReal.name=t.name,this.productReal.tag=t.tag,1===(null===e||void 0===e?void 0:e.length)&&(this.productReal.cost_price=e[0].cost_price,this.productReal.sell_price=e[0].sell_price)}},mounted:function(){this.loteReal=this.lote;var t=this.loteReal.product;this.setItems(t,[this.lote]),this.part=1}},F=N,E=(a("bda9"),a("24e8")),B=a("f09f"),M=a("65c6"),Y=a("2c91"),z=a("a370"),V=a("0378"),U=a("cb32"),W=a("27f9"),X=a("ddd8"),Z=a("eb85"),J=a("8572"),H=a("a12b"),K=a("7f67"),G=Object(p["a"])(F,S,O,!1,null,null,null),tt=G.exports;v()(G,"components",{QBtn:f["a"],QIcon:m["a"],QDialog:E["a"],QCard:B["a"],QToolbar:M["a"],QSpace:Y["a"],QCardSection:z["a"],QForm:V["a"],QAvatar:U["a"],QInput:W["a"],QSelect:X["a"],QSeparator:Z["a"],QField:J["a"],QVirtualScroll:H["a"]}),v()(G,"directives",{ClosePopup:K["a"]});var et={components:{ProductSellC:tt,TagPrint:x["a"]},props:{stock:{type:Object},number:{type:Number},product:{type:Object,default:null},tags:{type:Array,default:null},products:{type:Array,default:null}},computed:i()({},Object(y["b"])({user:"mystore/user"})),data:function(){return{}},methods:{formatterDate:function(t){return Object(q["c"])(t)},formatterCurrency:function(t){return Object(q["b"])(t)}}},at=et,st=Object(p["a"])(at,C,w,!1,null,null,null),nt=st.exports,ot=a("b3f2"),it={components:{ProductSellB:ot["a"],StockItem:nt,ProductEdit:_["a"],StockSubstract:g,StockAdd:r["a"]},props:{product:{type:Object},products:{type:Array},number:{type:Number},categories:{type:Array}},computed:i()({lotes:function(){return this.product.lotes.sort((function(t,e){return t.quantityStock>e.quantityStock}))}},Object(y["b"])({user:"mystore/user"})),data:function(){return{tags:[]}},methods:{},mounted:function(){}},rt=it,ct=a("3b73"),lt=a("2bb1"),ut=Object(p["a"])(rt,s,n,!1,null,null,null);e["a"]=ut.exports;v()(ut,"components",{QExpansionItem:ct["a"],QCard:B["a"],QCardSection:z["a"],QMarkupTable:lt["a"]})},fa7d:function(t,e,a){"use strict";a.d(e,"g",(function(){return i})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return c})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return u})),a.d(e,"d",(function(){return d})),a.d(e,"a",(function(){return p}));a("448a");var s=a("7037"),n=a.n(s),o=(a("63748"),a("e260"),a("d3b7"),a("ddb0"),a("4de4"),a("a434"),a("caad"),a("2532"),a("ac1f"),a("1276"),a("99af"),a("a15b"),a("4ec9"),a("3ca3"),a("d81d"),a("bd4c"));function i(t){return t.filter((function(t,e,a){return a.indexOf(t)===e}))}function r(t){var e=new FormData;for(var a in t)t[a]&&("object"===n()(t[a])&&t[a].hasOwnProperty("id")?e.append(a,t[a].id):"boolean"===typeof t[a]?e.append(a,t[a]?1:0):e.append(a,t[a]));return e}function c(t){var e={};for(var a in t)t[a]&&("object"===n()(t[a])&&t[a].hasOwnProperty("id")?e[a]=t[a].id:e[a]=t[a]);return e}function l(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t):new Intl.NumberFormat("ban",{style:"currency",currency:"XAF"}).format(t)}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"es";return t?"es"===e?o["b"].formatDate(t,"DD/MM/YYYY"):o["b"].formatDate(t,"YYYY/MM/DD"):null}function d(t){return o["b"].formatDate(t,"DD/MM/YYYY hh:mmA ")}function p(t,e){var a={};for(var s in t)if(e.hasOwnProperty(s))if([0,1].includes(e[s])&&!s.includes("_id")&&"id"!==s)a[s]=e[s];else if(s.includes("_id")){var n=s.split("_id")[0];e.hasOwnProperty(n)?a[s]=e[n]:a[s]=e[s]}else{var o;a[s]=null!==(o=e[s])&&void 0!==o?o:""}return a}},ffc9:function(t,e,a){"use strict";a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{class:t.fullWidth?"full-width":"",attrs:{dense:"",label:"Agregar nueva categoría",color:"dark-blue","no-caps":""},on:{click:function(e){t.adding=!0}}}),e("q-dialog",{model:{value:t.adding,callback:function(e){t.adding=e},expression:"adding"}},[e("q-card",{staticClass:"bg-dark-blue",staticStyle:{"max-width":"40vw",width:"38vw"}},[e("q-bar",{staticClass:"text-red q-py-sm",staticStyle:{height:"auto"}},[e("div",{staticStyle:{"font-weight":"600"}},[t._v("Agregando nueva categoría")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),e("q-form",{on:{submit:t.submit}},[e("q-card-section",[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-3 text-center text-white"},[t._v("\n              Categoría\n            ")]),e("div",{staticClass:"col"},[e("q-input",{staticClass:"bordered",attrs:{"label-color":"white",placeholder:"Bebidas alcohólicas",color:"white",outlined:"","input-class":"text-white",dense:""},model:{value:t.category.name,callback:function(e){t.$set(t.category,"name",e)},expression:"category.name"}})],1)])]),e("FormCardAction",{attrs:{"custom-label":"Agregar"}})],1)],1)],1)],1)},n=[],o=a("7ec2"),i=a.n(o),r=a("c973"),c=a.n(r),l=a("4425"),u=a("2b26"),d={components:{FormCardAction:l["a"]},props:{fullWidth:{type:Boolean,default:!1}},data:function(){return{adding:!1,category:{name:""}}},methods:{submit:function(){var t=this;return c()(i()().mark((function e(){var a;return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["b"])(t.category);case 2:a=e.sent,t.adding=!1,t.$emit("newCategory",a);case 5:case"end":return e.stop()}}),e)})))()}}},p=d,f=a("2877"),m=a("9c40"),h=a("24e8"),v=a("f09f"),b=a("d847"),g=a("2c91"),_=a("0378"),C=a("a370"),w=a("27f9"),q=a("7f67"),x=a("eebe"),y=a.n(x),k=Object(f["a"])(p,s,n,!1,null,null,null);e["a"]=k.exports;y()(k,"components",{QBtn:m["a"],QDialog:h["a"],QCard:v["a"],QBar:b["a"],QSpace:g["a"],QForm:_["a"],QCardSection:C["a"],QInput:w["a"]}),y()(k,"directives",{ClosePopup:q["a"]})}});