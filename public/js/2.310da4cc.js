(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"09b6":function(t,e,s){"use strict";s("f6a1")},1265:function(t,e,s){},"1bf7":function(t,e,s){},"218b":function(t,e,s){"use strict";s.r(e);var a=function(){var t,e,s=this,a=s._self._c;return a("q-page",[a("div",{staticClass:"row q-pa-lg"},[a("div",{staticClass:"col-12 bg-dark-blue q-py-sm q-mr-lg"},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col-4 q-pl-sm text-red text-bold"},[s._v("Listado de productos")]),a("div",{staticClass:"col text-right q-mr-sm q-gutter-x-xs"},[a("div",{staticClass:"row items-center q-gutter-xs justify-end"},[s.loggedin&&(null===(t=s.user)||void 0===t?void 0:t.role_id)<3?a("ProductAdd",{attrs:{categories_all:s.categories},on:{updated:s.updateList}}):s._e(),s.loggedin&&(null===(e=s.user)||void 0===e?void 0:e.role_id)<3?a("ProductSell",{on:{updated:s.updateList}}):s._e(),a("ProductSearch",{attrs:{categories:s.categories},on:{updated:s.updateList}})],1)])])]),a("div",{key:s.getKey,staticClass:"col-12 q-mt-sm"},[a("ProductList",{attrs:{categories_all:s.categories}})],1)])])},o=[],c=s("7ec2"),r=s.n(c),i=s("c973"),n=s.n(i),l=s("ded3"),d=s.n(l),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row",class:t.products.length<3?"":"items-center justify-center"},[t.products.length?t._l(t.products,(function(s,a){return e("div",{key:s.id,staticClass:"col-12 col-sm-6 col-md-4 q-py-xs bg-darkless-blue"},[e("ProductItem",{attrs:{categories_all:t.categories_all,index:a,product:s},on:{updated:t.findProducts}})],1)})):e("div",{staticClass:"col-12"},[e("NoData")],1)],2)},p=[],m=(s("b0c0"),s("fb6a"),s("a4d3"),s("e01a"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"row",class:t.isInIndex?"q-mx-sm":""},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"my-card bg-dark-blue",attrs:{flat:"",bordered:"",square:""}},[e("q-card-section",[e("div",{staticClass:"row items-center no-wrap"},[e("div",{staticClass:"col text-center"},[e("q-avatar",{attrs:{size:"5rem"}},[e("img",{attrs:{src:t.image}})])],1),e("div",{staticClass:"col"},[e("span",{staticClass:"text-white"},[t._v(t._s(t.product.name))]),e("br"),e("span",{staticClass:"text-white"},[t._v(t._s(t.product.description.slice(0,10)||"-"))]),e("br"),e("span",{staticClass:"text-red text-bold q-mt-md"},[t._v(t._s(t.formatterCurrency(t.product.sell_price)))])]),e("div",{staticClass:"col-auto"},[t.logged?e("q-btn",{staticClass:"absolute-top-right",attrs:{color:"white",round:"",flat:"",icon:"more_vert"}},[e("q-popup-proxy",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down",breakpoint:"400"}},[e("div",{staticClass:"row bg-dark-blue borderx",staticStyle:{border:"2px solid red",width:"20vw"}},[t.user&&1===t.user.role_id?e("TagPrint",{staticClass:"col-12 borderx"}):t._e(),t.user&&1===t.user.role_id?e("ProductEdit",{staticClass:"col-12 borderx",attrs:{"product-new":t.product,categories_all:t.categories_all},on:{updated:function(e){return t.$emit("updated")}}}):t._e(),t.user&&1===t.user.role_id?e("ProductDelete",{staticClass:"col-12 borderx",attrs:{"product-new":t.product,categories_all:t.categories_all},on:{updated:function(e){return t.$emit("updated")}}}):t._e(),t.user&&t.user.role_id<3?e("ProductSell",{staticClass:"col-12 borderx",attrs:{lite_mode:!0,product:t.product}}):t._e(),t.user&&1===t.user.role_id?e("StockAdd",{staticClass:"col-12 borderx"}):t._e()],1)])],1):t._e()],1)])])],1)],1)])}),f=[],v=s("448a"),h=s.n(v),g=(s("a9e3"),s("d81d"),s("e260"),s("d3b7"),s("ddb0"),s("caad"),s("2532"),s("fa7d")),b=s("57fb"),C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start full-width"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.showing=!0}},scopedSlots:t._u([{key:"default",fn:function(){return[e("q-icon",{attrs:{name:"mdi-square-edit-outline",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Editar producto")])]},proxy:!0}])}),e("q-dialog",{ref:"mymodal",model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Editar producto")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs"},[e("div",{staticClass:"col-12 col-md-3 text-center"},[e("q-btn",{staticClass:"q-pa-md text-white",staticStyle:{background:"#2B2E36"},attrs:{round:"",size:"xl","no-caps":""},on:{click:function(e){return t.$refs.photofile.$el.click()}}},[t.photo_url?t._e():e("span",{staticStyle:{"font-size":"14px"}},[t._v("Añadir foto")]),t.photo_url?e("q-avatar",{attrs:{size:"8rem"}},[e("img",{attrs:{src:t.photo_url,alt:"dsdsd"}})]):t._e()],1),e("q-file",{ref:"photofile",staticClass:"hidden",attrs:{hidden:"",accept:".jpg, image/*"},on:{input:t.urlImage},model:{value:t.product.photo,callback:function(e){t.$set(t.product,"photo",e)},expression:"product.photo"}})],1),e("div",{staticClass:"col-12 col-md q-mt-sm q-mt-none-md text-white"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-4"},[t._v("\n                      Nombre:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.required()]},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1)]),e("div",{staticClass:"row items-center justify-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Precio Coste:\n                    ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"row justify-center q-mt-md"},[e("div",{staticClass:"col"},[e("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"34.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()]},model:{value:t.product.cost_price,callback:function(e){t.$set(t.product,"cost_price",e)},expression:"product.cost_price"}})],1),e("div",{staticClass:"col-4 text-center q-pt-sm"},[t._v(" Precio Venta:")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"44.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()]},model:{value:t.product.sell_price,callback:function(e){t.$set(t.product,"sell_price",e)},expression:"product.sell_price"}})],1)])])]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Categoría:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.categories,"options-dense":"","option-label":function(t){return t.name},"label-color":"white",outlined:"",dense:"","use-input":"",clearable:"","popup-content-class":t.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue",placeholder:t.product.category_id?"":"Seleccione una categoría",color:"white",rules:[t.$rules.required()]},on:{filter:t.fnCategories},scopedSlots:t._u([{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[e("CategoryAdd",{staticClass:"full-width",attrs:{"full-width":!0},on:{newCategory:t.addCategory}})],1)],1)]},proxy:!0}]),model:{value:t.product.category_id,callback:function(e){t.$set(t.product,"category_id",e)},expression:"product.category_id"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Descripción:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:t.$q.screen.gt.sm?"Moet con sabor a fresa para invitados VIP.":"Descripción",color:"white",outlined:"","input-class":"text-white",dense:"",autogrow:"",type:"textarea"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Impresión etiqueta:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.tags,"options-dense":"","label-color":"white",outlined:"",dense:"","use-input":"","popup-content-class":"bg-dark-blue text-white"},model:{value:t.product.tag,callback:function(e){t.$set(t.product,"tag",e)},expression:"product.tag"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Stock disponible:\n                    ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("q-input",{staticClass:"bordered",attrs:{"label-color":"white",outlined:"",dense:"",suffix:t.$q.screen.gt.sm?"unidades":"u","input-class":"text-white",rules:[t.$rules.required(),t.$rules.numeric()]},model:{value:t.product.stock,callback:function(e){t.$set(t.product,"stock",e)},expression:"product.stock"}})],1),t.$q.screen.gt.sm?e("div",{staticClass:"col text-center q-px-sm"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:t.$q.screen.gt.sm?"Editar producto":"Crear","no-caps":"",color:"red-5",size:"sm",rounded:"",dense:""}})],1):t._e()])])]),t.$q.screen.lt.md?e("div",{staticClass:"row q-pt-md"},[e("div",{staticClass:"col-12 text-center"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:"Editar producto","no-caps":"",color:"red-5",size:"md",rounded:"",dense:""}})],1)]):t._e()]),e("div",{staticClass:"col-1"})])])],1)],1)],1)])])],1)},_=[],w=(s("4de4"),s("3ca3"),s("2b3d"),s("9861"),s("e6cf"),s("758b")),q=s("f508"),x=s("1e4c");function y(){return q["a"].show(),new Promise((function(t,e){w["a"].get("products").then((function(e){q["a"].hide(),t(e)})).catch((function(t){q["a"].hide(),Object(x["n"])("Los productos no están disponibles en estos momentos"),e(t)}))}))}function k(t){var e;q["a"].show();var s=null!==(e=t.get("name"))&&void 0!==e?e:t.name;return new Promise((function(e,a){w["a"].post("products",t).then((function(t){Object(x["p"])("Producto ".concat(s," agregado correctamente")),q["a"].hide(),e(t.data.data)})).catch((function(e){var s;q["a"].hide(),Object(x["n"])("El producto ".concat(null!==(s=t.name)&&void 0!==s?s:""," no pudo ser agregado en estos momentos")),a(e)}))}))}function Q(t){var e,s;q["a"].show();var a=null!==(e=t.get("name"))&&void 0!==e?e:t.name,o=null!==(s=t.get("id"))&&void 0!==s?s:t.id;return t.append("_method","put"),new Promise((function(e,s){w["a"].post("products/".concat(o),t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){Object(x["p"])("Producto ".concat(a," actualizado correctamente")),q["a"].hide(),e(t.data.data)})).catch((function(e){var a;q["a"].hide(),Object(x["n"])("El producto ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser actualizado en estos momentos")),s(e)}))}))}function $(t){q["a"].show();var e=t.name,s=t.id;return new Promise((function(a,o){w["a"].delete("products/".concat(s),{_method:"delete"}).then((function(t){Object(x["p"])("Producto ".concat(e," eliminado correctamente")),q["a"].hide(),a(t.data.data)})).catch((function(e){var s;q["a"].hide(),Object(x["n"])("El producto ".concat(null!==(s=t.name)&&void 0!==s?s:""," no pudo ser eliminado en estos momentos")),o(e)}))}))}function P(t){var e;q["a"].show();var s=null!==(e=t.name)&&void 0!==e?e:t.get("name");return new Promise((function(e,a){w["a"].post("sellProduct",t).then((function(t){Object(x["p"])("Producto ".concat(s," en stock actualizado correctamente")),q["a"].hide(),e(t.data.data)})).catch((function(e){var s;q["a"].hide(),Object(x["n"])("El producto ".concat(null!==(s=t.name)&&void 0!==s?s:""," en stock no pudo ser actualizado en estos momentos")),a(e)}))}))}function S(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&q["a"].show(),new Promise((function(t,e){w["a"].get("categories").then((function(e){q["a"].hide(),t(e.data.data)})).catch((function(t){q["a"].hide(),Object(x["n"])("Las categorías no están disponible en estos momentos"),e(t)}))}))}function j(t){return q["a"].show(),new Promise((function(e,s){w["a"].post("categories",t).then((function(s){Object(x["p"])("Categoría ".concat(t.name," agregada correctamente")),q["a"].hide(),e(s.data.data)})).catch((function(e){var a;q["a"].hide(),Object(x["n"])("La Categoría ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser agregada en estos momentos")),s(e)}))}))}var O=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{class:t.fullWidth?"full-width":"",attrs:{dense:"",label:"Agregar nueva categoría",color:"dark-blue","no-caps":""},on:{click:function(e){t.adding=!0}}}),e("q-dialog",{model:{value:t.adding,callback:function(e){t.adding=e},expression:"adding"}},[e("q-card",{staticClass:"bg-dark-blue",staticStyle:{"max-width":"40vw",width:"38vw"}},[e("q-bar",{staticClass:"text-red q-py-sm",staticStyle:{height:"auto"}},[e("div",{staticStyle:{"font-weight":"600"}},[t._v("Agregando nueva categoría")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),e("q-form",{on:{submit:t.submit}},[e("q-card-section",[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-3 text-center text-white"},[t._v("\n              Categoría\n            ")]),e("div",{staticClass:"col"},[e("q-input",{staticClass:"bordered",attrs:{"label-color":"white",placeholder:"Bebidas alcohólicas",color:"white",outlined:"","input-class":"text-white",dense:""},model:{value:t.category.name,callback:function(e){t.$set(t.category,"name",e)},expression:"category.name"}})],1)])]),e("FormCardAction",{attrs:{"custom-label":"Agregar"}})],1)],1)],1)],1)},I=[],A=s("4425"),L={components:{FormCardAction:A["a"]},props:{fullWidth:{type:Boolean,default:!1}},data:function(){return{adding:!1,category:{name:""}}},methods:{submit:function(){var t=this;return n()(r()().mark((function e(){var s;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j(t.category);case 2:s=e.sent,t.adding=!1,t.$emit("newCategory",s);case 5:case"end":return e.stop()}}),e)})))()}}},R=L,F=s("2877"),N=s("9c40"),z=s("24e8"),B=s("f09f"),V=s("d847"),D=s("2c91"),E=s("0378"),T=s("a370"),M=s("27f9"),U=s("7f67"),X=s("eebe"),W=s.n(X),J=Object(F["a"])(R,O,I,!1,null,null,null),K=J.exports;W()(J,"components",{QBtn:N["a"],QDialog:z["a"],QCard:B["a"],QBar:V["a"],QSpace:D["a"],QForm:E["a"],QCardSection:T["a"],QInput:M["a"]}),W()(J,"directives",{ClosePopup:U["a"]});var G={components:{CategoryAdd:K},props:{productNew:{type:Object},liteVersion:{type:Boolean,default:!1},categories_all:{type:Array}},data:function(){return{showing:!1,product:{id:null,name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:null},tags:["Todas las unidades","Sin etiqueta"],photo_url:null,categories:[]}},methods:{submit:function(){var t=this;return n()(r()().mark((function e(){var s;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.photo_url){e.next=3;break}return t.$notify.n("Debe agregar la foto del producto"),e.abrupt("return",!1);case 3:return s=Object(g["c"])(t.product),s.get("photo")||s.delete("photo"),e.next=7,Q(s);case 7:e.sent,t.showing=!1,t.$emit("updated");case 10:case"end":return e.stop()}}),e)})))()},setItems:function(){this.product=Object(g["a"])(this.product,this.productNew),this.photo_url="https://lovebeta.thecloudgroup.tech/"+this.product.photo,this.product.photo=[]},fnCategories:function(t,e,s){var a=this;e((function(){if(""===t)a.categories=a.categories_all;else{var e=t.toLowerCase();a.categories=a.categories_all.filter((function(t){var s;return null===t||void 0===t||null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},findCategories:function(t){var e=this;return n()(r()().mark((function s(){return r()().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,S(t);case 2:e.categories=e.categories_all=s.sent;case 3:case"end":return s.stop()}}),s)})))()},urlImage:function(){this.photo_url=URL.createObjectURL(this.product.photo)},addCategory:function(t){this.categories_all.push(t),this.product.category_id=t},cleanProduct:function(){this.product={name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:"Sin etiqueta"},this.photo_url=""}},mounted:function(){this.setItems()}},H=G,Y=(s("dbec"),s("0016")),Z=s("65c6"),tt=s("cb32"),et=s("7d53"),st=s("ddd8"),at=s("66e5"),ot=s("4074"),ct=s("8572"),rt=s("b047"),it=Object(F["a"])(H,C,_,!1,null,null,null),nt=it.exports;W()(it,"components",{QBtn:N["a"],QIcon:Y["a"],QDialog:z["a"],QCard:B["a"],QToolbar:Z["a"],QSpace:D["a"],QCardSection:T["a"],QForm:E["a"],QAvatar:tt["a"],QFile:et["a"],QInput:M["a"],QSelect:st["a"],QItem:at["a"],QItemSection:ot["a"],QField:ct["a"],QChip:rt["a"]}),W()(it,"directives",{ClosePopup:U["a"]});var lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start full-width"},[e("q-btn",{staticClass:"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"}},[e("q-icon",{attrs:{name:"mdi-printer",color:"red",size:"sm"}}),e("span",{staticClass:"q-pl-sm"},[t._v("Imprimir etiqueta")])],1)],1)},dt=[],ut={data:function(){return{}}},pt=ut,mt=Object(F["a"])(pt,lt,dt,!1,null,null,null),ft=mt.exports;W()(mt,"components",{QBtn:N["a"],QIcon:Y["a"]});var vt=s("2f62"),ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start full-width"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.showing=!0}},scopedSlots:t._u([{key:"default",fn:function(){return[e("q-icon",{attrs:{name:"mdi-trash-can",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Eliminar producto")])]},proxy:!0}])}),e("q-dialog",{ref:"mymodal",model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Eliminar producto")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs text-white"},[e("div",{staticClass:"col-12"},[t._v('¿Seguro que desea eliminar el producto con nombre "'+t._s(t.product.name)+'"?')]),e("div",{staticClass:"col-12 text-right q-gutter-xs"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"darkless-blue"}}),e("q-btn",{attrs:{label:"Eliminar",color:"dark",type:"submit"}})],1)])])],1)],1)],1)])])],1)},gt=[],bt={components:{FormCardAction:A["a"],CategoryAdd:K},props:{productNew:{type:Object},categories_all:{type:Array},liteVersion:{type:Boolean,default:!1}},data:function(){return{showing:!1,product:{id:null,name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:null},tags:["Todas las unidades","Sin etiqueta"],photo_url:null,categories:[]}},methods:{submit:function(){var t=this;return n()(r()().mark((function e(){return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$(t.product);case 2:e.sent,t.showing=!1,t.$emit("updated");case 5:case"end":return e.stop()}}),e)})))()},setItems:function(){this.product=Object(g["a"])(this.product,this.productNew),this.photo_url="https://lovebeta.thecloudgroup.tech/"+this.product.photo,this.product.photo=[]},fnCategories:function(t,e,s){var a=this;e((function(){if(""===t)a.categories=a.categories_all;else{var e=t.toLowerCase();a.categories=a.categories_all.filter((function(t){var s;return null===t||void 0===t||null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},findCategories:function(t){var e=this;return n()(r()().mark((function s(){return r()().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,S(t);case 2:e.categories=e.categories_all=s.sent;case 3:case"end":return s.stop()}}),s)})))()},urlImage:function(){this.photo_url=URL.createObjectURL(this.product.photo)},addCategory:function(t){this.categories_all.push(t),this.product.category_id=t},cleanProduct:function(){this.product={name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:"Sin etiqueta"},this.photo_url=""}},mounted:function(){this.setItems()}},Ct=bt,_t=(s("6650"),Object(F["a"])(Ct,ht,gt,!1,null,null,null)),wt=_t.exports;W()(_t,"components",{QBtn:N["a"],QIcon:Y["a"],QDialog:z["a"],QCard:B["a"],QToolbar:Z["a"],QSpace:D["a"],QCardSection:T["a"],QForm:E["a"],QField:ct["a"],QChip:rt["a"]}),W()(_t,"directives",{ClosePopup:U["a"]});var qt=s("9523"),xt=s.n(qt),yt=function(){var t,e=this,s=e._self._c;return s("div",[e.lite_mode?s("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(t){e.selling=!0}}},[s("q-icon",{attrs:{name:"fa fa-dollar-sign",color:"red",size:"sm"}}),s("span",{staticClass:"q-pl-sm"},[e._v("Nueva venta")])],1):s("q-btn",{staticClass:"q-px-sm",attrs:{color:"red-5",dense:"","no-caps":"",label:"Vender producto",rounded:""},on:{click:function(t){e.selling=!0}}}),s("q-dialog",{ref:"mymodal",on:{"before-hide":e.cleanSearch},model:{value:e.selling,callback:function(t){e.selling=t},expression:"selling"}},[s("div",{staticClass:"row justify-center",staticStyle:{"max-width":"75vw",width:"70vw"}},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[s("q-toolbar",[s("span",{staticClass:"text-red"},[e._v("Venta de productos - Paso "+e._s(e.part)+" |")]),0===e.part?s("span",{staticClass:"text-red"},[e._v("  Seleccione un producto")]):e._e(),1===e.part?s("span",{staticClass:"text-red"},[e._v("  Cantidad de unidades a vender")]):e._e(),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),s("div",{staticClass:"col-12"},[0===e.part?s("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",{staticClass:"q-mt-sm"},[s("div",{staticClass:"row q-gutter-xs custom_css"},[s("div",{staticClass:"col-12"},[s("q-select",{staticClass:"col no-padding",attrs:(t={options:e.products,"options-dense":"","option-label":function(t){return t.name},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",dense:"","use-input":"",clearable:""},xt()(t,"popup-content-class",e.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),xt()(t,"label","Seleccione un producto"),xt()(t,"color","white"),xt()(t,"rules",[e.$rules.required()]),xt()(t,"autofocus",""),t),on:{filter:e.fnProducts,input:function(t){return e.changePart(1)}},model:{value:e.productReal,callback:function(t){e.productReal=t},expression:"productReal"}})],1),s("div",{staticClass:"col-12 text-right q-gutter-xs"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue"}})],1)])])],1):e._e(),1===e.part?s("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",{staticClass:"q-mt-sm"},[s("q-form",{on:{submit:e.submit}},[s("div",{staticClass:"row q-gutter-xs custom_css"},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",{staticClass:"q-mt-sm"},[s("div",{staticClass:"row q-gutter-xs"},[s("div",{staticClass:"col-12 col-md-3 text-center"},[s("q-btn",{staticClass:"q-pa-md text-white bg-darkless-blue",attrs:{round:"",size:"xl","no-caps":""}},[e.photo_url?s("q-avatar",{attrs:{size:"8rem"}},[s("img",{attrs:{src:e.photo_url,alt:"dsdsd"}})]):e._e()],1)],1),s("div",{staticClass:"col-12 col-md text-white"},[s("div",{staticClass:"row items-center"},[s("div",{staticClass:"col-4"},[e._v("\n                              Nombre:\n                            ")]),s("div",{staticClass:"col"},[s("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[e.$rules.required()],disable:""},model:{value:e.productReal.name,callback:function(t){e.$set(e.productReal,"name",t)},expression:"productReal.name"}})],1)]),s("div",{staticClass:"row items-center justify-center"},[s("div",{staticClass:"col-4"},[e._v("\n                              Precio Coste:\n                            ")]),s("div",{staticClass:"col"},[s("div",{staticClass:"row justify-center q-mt-md"},[s("div",{staticClass:"col"},[s("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"34.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[e.$rules.decimal(),e.$rules.required()],disable:""},model:{value:e.productReal.cost_price,callback:function(t){e.$set(e.productReal,"cost_price",t)},expression:"productReal.cost_price"}})],1),s("div",{staticClass:"col-4 text-center q-pt-sm"},[e._v(" Precio Venta:")]),s("div",{staticClass:"col"},[s("q-input",{attrs:{"label-color":"white",placeholder:"44.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",disable:"",rules:[e.$rules.decimal(),e.$rules.required()]},model:{value:e.productReal.sell_price,callback:function(t){e.$set(e.productReal,"sell_price",t)},expression:"productReal.sell_price"}})],1)])])]),s("div",{staticClass:"row items-center justify-center"},[s("div",{staticClass:"col-4"},[e._v("\n                              Stock disponible:\n                            ")]),s("div",{staticClass:"col q-pr-xs"},[s("div",{staticClass:"row q-pr-sm"},[s("div",{staticClass:"col"},[s("q-input",{staticClass:"bordered full-width",attrs:{"label-color":"white",outlined:"",dense:"","input-class":"text-white",rules:[e.$rules.required(),e.$rules.decimal(),e.$rules.maxValue(e.productReal.stock),e.$rules.minValue(1)],autofocus:""},model:{value:e.stock,callback:function(t){e.stock=t},expression:"stock"}})],1)])]),s("div",{staticClass:"col-5"},[e._v("\n                              Dispones de "+e._s(e.productReal.stock)+" unidades máximas\n                            ")])]),e.$q.screen.lt.md?s("div",{staticClass:"row q-pt-md"},[s("div",{staticClass:"col-12 text-center"},[s("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:"Crear producto","no-caps":"",color:"red-5",size:"md",rounded:"",dense:""}})],1)]):e._e()]),s("div",{staticClass:"col-1"})])])],1)],1),s("div",{staticClass:"col-12 text-center q-gutter-xs"},[s("q-btn",{attrs:{color:"red",rounded:"","no-caps":"",type:"submit",label:"Confirmar la venta y proceder a control de stock"}})],1)])])],1)],1):e._e()],1)])])],1)},kt=[],Qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col text-left"},[t._v(t._s(t.product.name))]),e("div",{staticClass:"col text-center"},[t._v(t._s(t.formatterCurrency(t.product.sell_price)))]),e("div",{staticClass:"col text-center"},[t._v(t._s(t.formatterCurrency(t.product.cost_price)))]),e("div",{staticClass:"col"},[t._v(t._s(t.product.category.name))]),t.loggedIn?e("div",{staticClass:"col-1 text-center"},[e("div",{staticClass:"row q-gutter-sm bg-darkless-blue text-center"},[1===t.user.role_id?e("ProductEdit",{staticClass:"col",attrs:{"lite-version":!0,"product-new":t.product},on:{updated:function(e){return t.$emit("updated")}}}):t._e(),1===t.user.role_id?e("ProductDelete",{staticClass:"col",attrs:{"lite-version":!0,"product-new":t.product},on:{updated:function(e){return t.$emit("updated")}}}):t._e()],1)]):t._e()])},$t=[],Pt={components:{ProductDelete:wt,ProductEdit:nt},props:{product:{type:Object}},computed:d()({},Object(vt["b"])({loggedIn:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{}},methods:{formatterCurrency:function(t){return Object(g["b"])(t)}}},St=Pt,jt=Object(F["a"])(St,Qt,$t,!1,null,null,null),Ot=jt.exports,It={components:{CategoryAdd:K,ProductSearchItem:Ot},props:{product:{type:Object,default:null},lite_mode:{type:Boolean,default:!1}},computed:d()({photo_url:function(){var t;return"https://lovebeta.thecloudgroup.tech/"+(null===(t=this.productReal)||void 0===t?void 0:t.photo)||!1}},Object(vt["b"])({logged:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{selling:!1,productReal:[],products:[],products_all:[],waiting:!1,part:0,stock:1}},methods:{changePart:function(t){this.part=t},fnProducts:function(t,e,s){var a=this;e((function(){if(""===t)a.products=a.products_all;else{var e=t.toLowerCase();a.products=a.products_all.filter((function(t){var s;return null===t||void 0===t||null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},cleanSearch:function(){this.$emit("updated")},submit:function(){var t=this;return n()(r()().mark((function e(){var s;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={id:t.productReal.id,name:t.productReal.name,stock:t.stock},e.next=3,P(s);case 3:t.part=0,t.stock=1,t.productReal=[],t.$emit("updated");case 7:case"end":return e.stop()}}),e)})))()},findProducts:function(){var t=this;return n()(r()().mark((function e(){var s;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:s=e.sent,s.status<400&&(t.products_all=s.data.data);case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.product?(this.part=1,this.productReal=this.product):this.findProducts()}},At=It,Lt=(s("09b6"),s("a12b")),Rt=Object(F["a"])(At,yt,kt,!1,null,null,null),Ft=Rt.exports;W()(Rt,"components",{QBtn:N["a"],QIcon:Y["a"],QDialog:z["a"],QCard:B["a"],QToolbar:Z["a"],QSpace:D["a"],QCardSection:T["a"],QSelect:st["a"],QForm:E["a"],QAvatar:tt["a"],QInput:M["a"],QField:ct["a"],QVirtualScroll:Lt["a"]}),W()(Rt,"directives",{ClosePopup:U["a"]});var Nt={components:{ProductSell:Ft,ProductDelete:wt,TagPrint:ft,ProductEdit:nt,StockAdd:b["a"]},props:{index:{type:Number},product:{type:Object},categories_all:{type:Array}},computed:d()({image:function(){return this.product.photo?"https://lovebeta.thecloudgroup.tech/"+this.product.photo:"/img/image.jpg"},isInIndex:function(){var t=h()(Array(50).keys()).map((function(t,e){return 1+3*e}));return t.includes(this.index)}},Object(vt["b"])({logged:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{}},methods:{formatterCurrency:function(t){return Object(g["b"])(t)}}},zt=Nt,Bt=(s("b982"),s("7cbe")),Vt=Object(F["a"])(zt,m,f,!1,null,null,null),Dt=Vt.exports;W()(Vt,"components",{QCard:B["a"],QCardSection:T["a"],QAvatar:tt["a"],QBtn:N["a"],QPopupProxy:Bt["a"]});var Et=s("37ee"),Tt={components:{NoData:Et["a"],ProductItem:Dt},props:{categories_all:{type:Array}},data:function(){return{products:[]}},methods:{findProducts:function(){var t=this;return n()(r()().mark((function e(){var s;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:s=e.sent,s.status<400&&(t.products=s.data.data);case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.findProducts()}},Mt=Tt,Ut=Object(F["a"])(Mt,u,p,!1,null,null,null),Xt=Ut.exports,Wt=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{staticClass:"q-px-sm",attrs:{color:"red-5",dense:"","no-caps":"",label:"Crear nuevo producto",rounded:""},on:{click:function(e){t.adding=!0}}}),e("q-dialog",{model:{value:t.adding,callback:function(e){t.adding=e},expression:"adding"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Crear nuevo producto")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs"},[e("div",{staticClass:"col-12 col-md-3 text-center"},[e("q-btn",{staticClass:"q-pa-md text-white",staticStyle:{background:"#2B2E36"},attrs:{round:"",size:"xl","no-caps":""},on:{click:function(e){return t.$refs.photofile.$el.click()}}},[t.photo_url?t._e():e("span",{staticStyle:{"font-size":"14px"}},[t._v("Añadir foto")]),t.photo_url?e("q-avatar",{attrs:{size:"8rem"}},[e("img",{attrs:{src:t.photo_url,alt:"dsdsd"}})]):t._e()],1),e("q-file",{ref:"photofile",staticClass:"hidden",attrs:{hidden:"",accept:".jpg, image/*"},on:{input:t.urlImage},model:{value:t.product.photo,callback:function(e){t.$set(t.product,"photo",e)},expression:"product.photo"}})],1),e("div",{staticClass:"col-12 col-md q-mt-sm q-mt-none-md text-white"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-4"},[t._v("\n                      Nombre:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.required()]},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1)]),e("div",{staticClass:"row items-center justify-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Precio Coste:\n                    ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"row justify-center q-mt-md"},[e("div",{staticClass:"col"},[e("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"34.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()]},model:{value:t.product.cost_price,callback:function(e){t.$set(t.product,"cost_price",e)},expression:"product.cost_price"}})],1),e("div",{staticClass:"col-4 text-center q-pt-sm"},[t._v(" Precio Venta:")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"44.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()]},model:{value:t.product.sell_price,callback:function(e){t.$set(t.product,"sell_price",e)},expression:"product.sell_price"}})],1)])])]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Categoría:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.categories,"options-dense":"","option-label":function(t){return t.name},"label-color":"white",outlined:"",dense:"","use-input":"",clearable:"","popup-content-class":t.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue",placeholder:t.product.category_id?"":"Seleccione una categoría",color:"white",rules:[t.$rules.required()]},on:{filter:t.fnCategories},scopedSlots:t._u([{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[e("CategoryAdd",{staticClass:"full-width",attrs:{"full-width":!0},on:{newCategory:t.addCategory}})],1)],1)]},proxy:!0}]),model:{value:t.product.category_id,callback:function(e){t.$set(t.product,"category_id",e)},expression:"product.category_id"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Descripción:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:t.$q.screen.gt.sm?"Moet con sabor a fresa para invitados VIP.":"Descripción",color:"white",outlined:"","input-class":"text-white",dense:"",autogrow:"",type:"textarea"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Impresión etiqueta:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.tags,"options-dense":"","label-color":"white",outlined:"",dense:"","use-input":"","popup-content-class":"bg-dark-blue text-white"},model:{value:t.product.tag,callback:function(e){t.$set(t.product,"tag",e)},expression:"product.tag"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Stock disponible:\n                    ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col"},[e("q-input",{staticClass:"bordered",attrs:{"label-color":"white",outlined:"",dense:"",suffix:t.$q.screen.gt.sm?"unidades":"u","input-class":"text-white",rules:[t.$rules.required(),t.$rules.decimal()]},model:{value:t.product.stock,callback:function(e){t.$set(t.product,"stock",e)},expression:"product.stock"}})],1),t.$q.screen.gt.sm?e("div",{staticClass:"col text-center q-px-sm"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:t.$q.screen.gt.sm?"Crear producto":"Crear","no-caps":"",color:"red-5",size:"sm",rounded:"",dense:""}})],1):t._e()])])]),t.$q.screen.lt.md?e("div",{staticClass:"row q-pt-md"},[e("div",{staticClass:"col-12 text-center"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:"Crear producto","no-caps":"",color:"red-5",size:"md",rounded:"",dense:""}})],1)]):t._e()]),e("div",{staticClass:"col-1"})])])],1)],1)],1)])])],1)},Jt=[],Kt={components:{CategoryAdd:K},props:{categories_all:{type:Array}},data:function(){return{adding:!1,product:{name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:"Sin etiqueta"},tags:["Todas las unidades","Sin etiqueta"],photo_url:null,categories:[]}},methods:{submit:function(){var t=this;return n()(r()().mark((function e(){var s;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.photo_url){e.next=3;break}return t.$notify.n("Debe agregar la foto del producto"),e.abrupt("return",!1);case 3:return s=Object(g["c"])(t.product),e.next=6,k(s);case 6:e.sent,t.adding=!1,t.cleanProduct(),t.$emit("updated");case 10:case"end":return e.stop()}}),e)})))()},cleanProduct:function(){this.product={name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:{label:"Sin etiqueta",value:0}},this.photo_url=""},urlImage:function(){this.photo_url=URL.createObjectURL(this.product.photo)},addCategory:function(t){this.categories_all.push(t),this.product.category_id=t},fnCategories:function(t,e,s){var a=this;e((function(){if(""===t)a.categories=a.categories_all;else{var e=t.toLowerCase();a.categories=a.categories_all.filter((function(t){var s;return null===t||void 0===t||null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))}},mounted:function(){this.categories=this.categories_all}},Gt=Kt,Ht=(s("39b7"),Object(F["a"])(Gt,Wt,Jt,!1,null,null,null)),Yt=Ht.exports;W()(Ht,"components",{QBtn:N["a"],QDialog:z["a"],QCard:B["a"],QToolbar:Z["a"],QSpace:D["a"],QCardSection:T["a"],QForm:E["a"],QAvatar:tt["a"],QFile:et["a"],QInput:M["a"],QSelect:st["a"],QItem:at["a"],QItemSection:ot["a"],QField:ct["a"],QChip:rt["a"]}),W()(Ht,"directives",{ClosePopup:U["a"]});var Zt=function(){var t,e=this,s=e._self._c;return s("div",[s("q-btn",{staticClass:"q-px-sm",attrs:{color:"red-5",dense:"","no-caps":"",label:"Buscar producto",rounded:""},on:{click:function(t){e.searching=!0}}}),s("q-dialog",{ref:"mymodal",on:{"before-hide":e.cleanSearch},model:{value:e.searching,callback:function(t){e.searching=t},expression:"searching"}},[s("div",{staticClass:"row justify-center",staticStyle:{"max-width":"65vw",width:"60vw"}},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[s("q-toolbar",[s("span",{staticClass:"text-red"},[e._v("Buscar producto")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",{staticClass:"q-mt-sm"},[s("q-form",{on:{submit:e.submit}},[s("div",{staticClass:"row q-gutter-xs custom_css"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row q-gutter-sm"},[s("q-input",{staticClass:"col no-padding",attrs:{label:"El nombre contiene...",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}}),s("q-select",{staticClass:"col no-padding",attrs:(t={options:e.categories,"options-dense":"","option-label":function(t){return t.name},"label-color":"white","input-class":"text-white","popup-content-class":"text-white",outlined:"",dense:"","use-input":"",clearable:"",multiple:""},xt()(t,"popup-content-class",e.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),xt()(t,"label","Seleccione una categoría"),xt()(t,"color","white"),xt()(t,"rules",[e.$rules.required()]),t),on:{filter:e.fnCategories,input:e.submit},scopedSlots:e._u([1===e.user.role_id?{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[s("CategoryAdd",{staticClass:"full-width",attrs:{"full-width":!0},on:{newCategory:function(t){return e.$emit("updated")}}})],1)],1)]},proxy:!0}:null],null,!0),model:{value:e.product.category_id,callback:function(t){e.$set(e.product,"category_id",t)},expression:"product.category_id"}})],1)]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"row q-gutter-sm"},[s("q-input",{staticClass:"col",attrs:{label:"Precio de venta costo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.cost_price_min,callback:function(t){e.$set(e.product,"cost_price_min",t)},expression:"product.cost_price_min"}}),s("q-input",{staticClass:"col",attrs:{label:"Precio de costo máximo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.cost_price_max,callback:function(t){e.$set(e.product,"cost_price_max",t)},expression:"product.cost_price_max"}})],1)]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"row q-gutter-sm"},[s("q-input",{staticClass:"col",attrs:{label:"Precio de venta mínimo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.sell_price_min,callback:function(t){e.$set(e.product,"sell_price_min",t)},expression:"product.sell_price_min"}}),s("q-input",{staticClass:"col",attrs:{label:"Precio de venta máximo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.sell_price_max,callback:function(t){e.$set(e.product,"sell_price_max",t)},expression:"product.sell_price_max"}})],1)]),s("div",{staticClass:"col-12 text-right q-gutter-xs"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue"}})],1),e.products.length?s("div",{staticClass:"col-12 q-py-xs text-white"},[s("div",{staticClass:"row bg-dark-blue"},[s("div",{staticClass:"col text-left"},[e._v("Nombre")]),s("div",{staticClass:"col text-center"},[e._v("Precio de venta")]),s("div",{staticClass:"col text-center"},[e._v("Precio de costo")]),s("div",{staticClass:"col text-left"},[e._v("Categoría")]),e.logged?s("div",{staticClass:"col-1 text-center"},[e._v("Acciones")]):e._e()])]):e._e(),s("div",{staticClass:"col-12 text-white"},e._l(e.products,(function(t){return s("ProductSearchItem",{key:t.id,attrs:{product:t},on:{updated:function(t){e.$emit("updated"),e.searching=!1}}})})),1)])])],1)],1)],1)])])],1)},te=[],ee={components:{CategoryAdd:K,ProductSearchItem:Ot},props:{categories:{type:Array}},computed:d()({},Object(vt["b"])({logged:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{searching:!1,product:{name:"",cost_price_min:"",cost_price_max:"",sell_price_min:"",sell_price_max:"",category_id:[],description:"",stock:"",tag:""},tags:["Todas las unidades","Sin etiqueta"],products:[],products_all:[],categoriesFiltered:[],waiting:!1}},methods:{fnCategories:function(t,e,s){var a=this;e((function(){if(""===t)a.categoriesFiltered=a.categories;else{var e=t.toLowerCase();a.categoriesFiltered=a.categories.filter((function(t){var s;return null===t||void 0===t||null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},cleanSearch:function(){this.product={name:"",cost_price_min:"",cost_price_max:"",sell_price_min:"",sell_price_max:"",category_id:null,description:"",stock:"",tag:""}},submit:function(){var t=this;this.waiting=!0;var e=this.products_all;this.product.name&&(e=e.filter((function(e){return e.name.toLowerCase().includes(t.product.name.toLowerCase())}))),this.product.category_id&&(e=e.filter((function(e){return t.product.category_id.map((function(t){return t.id})).includes(e.category_id)})),console.log(e.map((function(t){return t.category_id})))),this.product.sell_price_min&&(e=e.filter((function(e){return e.sell_price>=t.product.sell_price_min}))),this.product.sell_price_max&&(e=e.filter((function(e){return e.sell_price<=t.product.sell_price_max}))),this.product.cost_price_min&&(e=e.filter((function(e){return e.sell_price>=t.product.sell_price_min}))),this.product.cost_price_max&&(e=e.filter((function(e){return e.sell_price<=t.product.sell_price_max}))),this.products=e,this.waiting=!1},findProducts:function(){var t=this;return n()(r()().mark((function e(){var s;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:s=e.sent,s.status<400&&(t.products_all=s.data.data);case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.findProducts(),this.categoriesFiltered=this.categories}},se=ee,ae=(s("b029"),Object(F["a"])(se,Zt,te,!1,null,null,null)),oe=ae.exports;W()(ae,"components",{QBtn:N["a"],QDialog:z["a"],QCard:B["a"],QToolbar:Z["a"],QSpace:D["a"],QCardSection:T["a"],QForm:E["a"],QInput:M["a"],QSelect:st["a"],QItem:at["a"],QItemSection:ot["a"],QField:ct["a"],QVirtualScroll:Lt["a"]}),W()(ae,"directives",{ClosePopup:U["a"]});var ce={name:"PageIndex",components:{ProductSell:Ft,ProductSearch:oe,ProductAdd:Yt,ProductList:Xt},computed:d()({getKey:function(){return this.key}},Object(vt["b"])({user:"mystore/user",loggedin:"mystore/loggedIn"})),data:function(){return{key:0,categories:[]}},methods:{updateList:function(){this.key++},findCategories:function(){var t=this;return n()(r()().mark((function e(){return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t.categories=e.sent;case 3:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.findCategories()}},re=ce,ie=(s("fb75"),s("9989")),ne=Object(F["a"])(re,a,o,!1,null,null,null);e["default"]=ne.exports;W()(ne,"components",{QPage:ie["a"],QSelect:st["a"]})},"2ace":function(t,e,s){},"37ee":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 flex-center flex"},[e("LottiePlayer",{attrs:{path:"https://assets2.lottiefiles.com/private_files/lf30_e3pteeho.json"}})],1),t._m(0)])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-12 text-center"},[e("h5",{staticClass:"text-white"},[t._v("No hay elementos para mostrar")])])}],c=(s("b0c0"),function(){var t=this,e=t._self._c;return e("VueLottiePlayer",{attrs:{name:t.name,loop:"",path:t.path}})}),r=[],i=(s("a9e3"),s("7b07")),n={components:{VueLottiePlayer:i["a"]},props:{path:{type:String},name:{type:[String,Number],default:"image"+Math.random()}},data:function(){return{}}},l=n,d=s("2877"),u=Object(d["a"])(l,c,r,!1,null,null,null),p=u.exports,m={components:{LottiePlayer:p},data:function(){return{}}},f=m,v=Object(d["a"])(f,a,o,!1,null,null,null);e["a"]=v.exports},"39b7":function(t,e,s){"use strict";s("1265")},"4360a":function(t,e,s){},4425:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("q-card-actions",{attrs:{align:"right"}},[t.lite?t._e():e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue","no-caps":t.capittal_letters}}),t.lite?t._e():e("q-btn",{attrs:{disable:!t.available,label:t.customLabel?t.customLabel:t.update?"Actualizar":"Crear",type:"submit",color:t.color,"no-caps":t.capittal_letters}}),t.lite?e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!t.available,label:t.customLabel?t.customLabel:t.update?"Actualizar":"Crear",color:t.color,"no-caps":t.capittal_letters}}):t._e()],1)},o=[],c=(s("a9e3"),{name:"FormCardAction",props:{update:{type:Boolean,default:!1},capittal_letters:{type:Boolean,default:!0},lite:{type:Boolean,default:!1},available:{type:[Boolean,Number],default:!0},customLabel:{type:String,default:null},color:{type:String,default:"darkless-blue"}},data:function(){return{}}}),r=c,i=s("2877"),n=s("4b7e"),l=s("9c40"),d=s("7f67"),u=s("eebe"),p=s.n(u),m=Object(i["a"])(r,a,o,!1,null,null,null);e["a"]=m.exports;p()(m,"components",{QCardActions:n["a"],QBtn:l["a"]}),p()(m,"directives",{ClosePopup:d["a"]})},"57fb":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"}},[e("q-icon",{attrs:{name:"mdi-numeric-positive-1",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Añadir stock")])],1)],1)},o=[],c={props:{liteVersion:{type:Boolean,default:!1}},data:function(){return{}}},r=c,i=s("2877"),n=s("9c40"),l=s("0016"),d=s("eebe"),u=s.n(d),p=Object(i["a"])(r,a,o,!1,null,null,null);e["a"]=p.exports;u()(p,"components",{QBtn:n["a"],QIcon:l["a"]})},6650:function(t,e,s){"use strict";s("2ace")},b029:function(t,e,s){"use strict";s("d1d8")},b982:function(t,e,s){"use strict";s("1bf7")},be17:function(t,e,s){},d1d8:function(t,e,s){},dbec:function(t,e,s){"use strict";s("4360a")},f6a1:function(t,e,s){},fb75:function(t,e,s){"use strict";s("be17")}}]);