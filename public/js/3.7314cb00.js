(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"00ff":function(t,e,s){"use strict";s("8f3b")},2415:function(t,e,s){},"5d4c":function(t,e,s){"use strict";var a=s("9523"),l=s.n(a),o=(s("b0c0"),function(){var t,e=this,s=e._self._c;return s("div",[e.menu_mode?s("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(t){e.searching=!0}}},[s("q-icon",{attrs:{name:"mdi-file-search",color:"white",size:"sm"}}),s("span",{staticClass:"q-pl-sm"},[e._v("Buscar producto")])],1):e._e(),e.products_all.length&&!e.menu_mode?s("q-btn",{staticClass:"q-px-sm",attrs:{color:"red-5",dense:"","no-caps":"",label:"Buscar producto",rounded:""},on:{click:function(t){e.searching=!0}}}):e._e(),s("q-dialog",{ref:"mymodal",on:{"before-hide":e.cleanSearch},model:{value:e.searching,callback:function(t){e.searching=t},expression:"searching"}},[s("div",{staticClass:"row justify-center",staticStyle:{"max-width":"65vw",width:"60vw"}},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[s("q-toolbar",[s("span",{staticClass:"text-red"},[e._v("Buscar producto")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[s("q-card-section",{staticClass:"q-mt-sm"},[s("q-form",{on:{submit:e.submit}},[s("div",{staticClass:"row q-gutter-xs custom_css"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row q-gutter-sm"},[s("q-input",{staticClass:"col no-padding",attrs:{label:"El nombre contiene...",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}}),s("q-select",{staticClass:"col no-padding",attrs:(t={options:e.categories,"options-dense":"","option-label":function(t){return t.name},"label-color":"white","input-class":"text-white","popup-content-class":"text-white",outlined:"",dense:"","use-input":"",clearable:"",multiple:""},l()(t,"popup-content-class",e.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),l()(t,"label","Seleccione una categoría"),l()(t,"color","white"),l()(t,"rules",[e.$rules.required()]),t),on:{filter:e.fnCategories,input:e.submit},scopedSlots:e._u([e.user&&1===e.user.role_id?{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[s("CategoryAdd",{staticClass:"full-width",attrs:{"full-width":!0},on:{newCategory:function(t){return e.$emit("updated")}}})],1)],1)]},proxy:!0}:null],null,!0),model:{value:e.product.category_id,callback:function(t){e.$set(e.product,"category_id",t)},expression:"product.category_id"}})],1)]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"row q-gutter-sm"},[s("q-input",{staticClass:"col",attrs:{label:"Precio de venta costo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.cost_price_min,callback:function(t){e.$set(e.product,"cost_price_min",t)},expression:"product.cost_price_min"}}),s("q-input",{staticClass:"col",attrs:{label:"Precio de costo máximo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.cost_price_max,callback:function(t){e.$set(e.product,"cost_price_max",t)},expression:"product.cost_price_max"}})],1)]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"row q-gutter-sm"},[s("q-input",{staticClass:"col",attrs:{label:"Precio de venta mínimo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.sell_price_min,callback:function(t){e.$set(e.product,"sell_price_min",t)},expression:"product.sell_price_min"}}),s("q-input",{staticClass:"col",attrs:{label:"Precio de venta máximo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.sell_price_max,callback:function(t){e.$set(e.product,"sell_price_max",t)},expression:"product.sell_price_max"}})],1)]),s("div",{staticClass:"col-12 text-right q-gutter-xs"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue"}})],1),e.products.length?s("div",{staticClass:"col-12 q-py-xs text-white"},[s("div",{staticClass:"row bg-dark-blue"},[s("div",{staticClass:"col text-left"},[e._v("Nombre")]),s("div",{staticClass:"col text-center"},[e._v("Precio de venta")]),s("div",{staticClass:"col text-center"},[e._v("Precio de costo")]),s("div",{staticClass:"col text-left"},[e._v("Categoría")]),e.logged?s("div",{staticClass:"col-1 text-center"},[e._v("Acciones")]):e._e()])]):e._e(),s("div",{staticClass:"col-12 text-white"},e._l(e.products,(function(t){return s("ProductSearchItem",{key:t.id,attrs:{product:t},on:{updated:function(t){e.$emit("updated"),e.searching=!1}}})})),1)])])],1)],1)],1)])])],1)}),i=[],c=s("7ec2"),r=s.n(c),n=s("c973"),u=s.n(n),d=s("ded3"),p=s.n(d),m=(s("4de4"),s("d3b7"),s("caad"),s("2532"),s("d81d"),s("920e")),f=s("e222"),h=s("2f62"),g=s("ffc9"),v={components:{CategoryAdd:g["a"],ProductSearchItem:f["a"]},props:{categories:{type:Array},menu_mode:{type:Boolean,default:!1}},computed:p()({},Object(h["b"])({logged:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{searching:!1,product:{name:"",cost_price_min:"",cost_price_max:"",sell_price_min:"",sell_price_max:"",category_id:[],description:"",stock:"",tag:""},tags:["Todas las unidades","Sin etiqueta"],products:[],products_all:[],categoriesFiltered:[],waiting:!1}},methods:{fnCategories:function(t,e,s){var a=this;e((function(){if(""===t)a.categoriesFiltered=a.categories;else{var e=t.toLowerCase();a.categoriesFiltered=a.categories.filter((function(t){var s;return null===t||void 0===t||null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},cleanSearch:function(){this.product={name:"",cost_price_min:"",cost_price_max:"",sell_price_min:"",sell_price_max:"",category_id:null,description:"",stock:"",tag:""}},submit:function(){var t=this;this.waiting=!0;var e=this.products_all;this.product.name&&(e=e.filter((function(e){return e.name.toLowerCase().includes(t.product.name.toLowerCase())}))),this.product.category_id&&(e=e.filter((function(e){return t.product.category_id.map((function(t){return t.id})).includes(e.category_id)})),console.log(e.map((function(t){return t.category_id})))),this.product.sell_price_min&&(e=e.filter((function(e){return e.sell_price>=t.product.sell_price_min}))),this.product.sell_price_max&&(e=e.filter((function(e){return e.sell_price<=t.product.sell_price_max}))),this.product.cost_price_min&&(e=e.filter((function(e){return e.sell_price>=t.product.sell_price_min}))),this.product.cost_price_max&&(e=e.filter((function(e){return e.sell_price<=t.product.sell_price_max}))),this.products=e,this.waiting=!1},findProducts:function(){var t=this;return u()(r()().mark((function e(){var s;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["c"])(!1);case 2:s=e.sent,s.status<400&&(t.products_all=s.data.data);case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.findProducts(),this.categoriesFiltered=this.categories}},b=v,_=(s("6b73"),s("2877")),w=s("9c40"),q=s("0016"),C=s("24e8"),x=s("f09f"),k=s("65c6"),y=s("2c91"),S=s("a370"),$=s("0378"),Q=s("27f9"),R=s("ddd8"),O=s("66e5"),P=s("4074"),I=s("8572"),j=s("a12b"),B=s("7f67"),L=s("eebe"),A=s.n(L),z=Object(_["a"])(b,o,i,!1,null,null,null);e["a"]=z.exports;A()(z,"components",{QBtn:w["a"],QIcon:q["a"],QDialog:C["a"],QCard:x["a"],QToolbar:k["a"],QSpace:y["a"],QCardSection:S["a"],QForm:$["a"],QInput:Q["a"],QSelect:R["a"],QItem:O["a"],QItemSection:P["a"],QField:I["a"],QVirtualScroll:j["a"]}),A()(z,"directives",{ClosePopup:B["a"]})},"6b73":function(t,e,s){"use strict";s("2415")},"713b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("q-layout",{staticClass:"bg-darkless-blue",attrs:{view:"hHh lpR fFf"}},[e("Header",{attrs:{side:t.left},on:{updated:t.updateSide}}),e("q-drawer",{staticClass:"q-mt-sm",attrs:{"show-if-above":"",side:"left","content-class":"bg-dark-blue"},model:{value:t.left,callback:function(e){t.left=e},expression:"left"}},[e("Menu",{on:{updated:function(e){t.key++}}})],1),e("q-page-container",{key:t.key},[e("router-view")],1)],1)},l=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row q-pt-sm"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row"},[e("q-btn",{staticClass:"full-width",attrs:{flat:"","no-caps":"",to:{name:"home"}}},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2 text-left"},[e("q-icon",{attrs:{name:"mdi-view-dashboard",color:"white"}})],1),e("div",{staticClass:"col q-pl-md text-white text-left"},[e("span",[t._v("Dashboard")])])])])],1),t.logged?e("q-expansion-item",{staticClass:"full-width text-white",attrs:{"expand-separator":"",icon:"mdi-storefront",label:"Gestión de stock","expand-icon-class":"text-white","default-opened":""}},[e("div",{staticClass:"bg-dark-blue q-pl-xl text-blue-1"},[e("StockListButton"),e("ProductSellA",{attrs:{menu_mode:!0},on:{updated:function(e){return t.$emit("updated")}}}),e("ProductSearch",{attrs:{categories:t.categories,menu_mode:!0}}),e("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(e){return t.$router.push({name:"operations"})}}},[e("q-icon",{attrs:{name:"mdi-format-list-checks",color:"white",size:"sm"}}),e("span",{staticClass:"q-pl-sm"},[t._v("Operaciones")])],1),e("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(e){return t.$router.push({name:"statics"})}}},[e("q-icon",{attrs:{name:"mdi-chart-bar",color:"white",size:"sm"}}),e("span",{staticClass:"q-pl-sm"},[t._v("Estadísticas")])],1),e("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(e){return t.$router.push({name:"incident"})}}},[e("q-icon",{attrs:{name:"mdi-format-list-text",color:"white",size:"sm"}}),e("span",{staticClass:"q-pl-sm"},[t._v("Incidentes")])],1)],1)]):t._e()],1)])},i=[],c=s("ded3"),r=s.n(c),n=s("2f62"),u=s("5d4c"),d=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",to:"/stock",flat:"","text-color":"white",color:"red",align:"left"}},[e("q-icon",{attrs:{name:"mdi-format-list-bulleted",color:"white",size:"sm"}}),e("span",{staticClass:"q-pl-sm"},[t._v("Listado de productos")])],1)],1)},p=[],m={data:function(){return{}}},f=m,h=s("2877"),g=s("9c40"),v=s("0016"),b=s("eebe"),_=s.n(b),w=Object(h["a"])(f,d,p,!1,null,null,null),q=w.exports;_()(w,"components",{QBtn:g["a"],QIcon:v["a"]});var C=s("9523"),x=s.n(C),k=(s("b0c0"),function(){var t,e,s=this,a=s._self._c;return a("div",[a("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(t){s.selling=!0}}},[a("q-icon",{attrs:{name:"fa fa-dollar-sign",color:"white",size:"sm"}}),a("span",{staticClass:"q-pl-sm"},[s._v("Vender producto")])],1),a("q-dialog",{ref:"mymodal",on:{"before-hide":s.cleanSearch},model:{value:s.selling,callback:function(t){s.selling=t},expression:"selling"}},[a("div",{staticClass:"row justify-center",staticStyle:{"max-width":"75vw",width:"70vw"}},[a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[a("q-toolbar",[a("div",{staticClass:"row"},[a("span",{staticClass:"text-red",class:s.$q.screen.lt.sm?"col-12":""},[s._v("Venta de productos - Paso\n                "+s._s(s.part)+" |")]),0===s.part?a("span",{staticClass:"text-red",class:s.$q.screen.lt.sm?"col-12":""},[s._v("  Seleccione un producto")]):s._e(),1===s.part?a("span",{staticClass:"text-red",class:s.$q.screen.lt.sm?"col-12":""},[s._v("  Cantidad de unidades a vender")]):s._e(),2===s.part?a("span",{staticClass:"text-red",class:s.$q.screen.lt.sm?"col-12":""},[s._v("  Marcar qué productos salen del stock")]):s._e()]),a("q-space"),a("q-btn",{attrs:{flat:"",round:"",dense:"",color:"info",icon:"mdi-keyboard-backspace",disable:0===s.part},on:{click:function(t){s.part=0}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),a("div",{staticClass:"col-12"},[0===s.part?a("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",{staticClass:"q-mt-sm"},[a("div",{staticClass:"row q-gutter-xs custom_css"},[a("div",{staticClass:"col-12"},[a("q-select",{staticClass:"col no-padding",attrs:(t={options:s.products_filtered,"options-dense":"","option-label":function(t){return t.name},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",loading:0===s.products_all.length&&!s.product,disable:0===s.products_all.length,dense:"","use-input":"",clearable:""},x()(t,"popup-content-class",s.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),x()(t,"label","Seleccione un producto"),x()(t,"color","white"),x()(t,"rules",[s.$rules.required()]),x()(t,"autofocus",""),t),on:{filter:s.filterProducts,input:s.setInitial,clear:function(t){s.tag=""},remove:function(t){s.tag=""}},model:{value:s.productSelect,callback:function(t){s.productSelect=t},expression:"productSelect"}})],1),a("div",{staticClass:"col-12"},[a("q-select",{staticClass:"col no-padding",attrs:(e={options:s.tagOptions,"options-dense":"","option-label":function(t){return t.tag},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",dense:"","use-input":"",clearable:""},x()(e,"popup-content-class",s.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),x()(e,"label","Seleccione una etiqueta"),x()(e,"color","white"),x()(e,"rules",[s.$rules.required()]),x()(e,"autofocus",""),x()(e,"disable",""===s.productSelect),e),on:{filter:s.fnProducts,input:s.changePart,clear:function(t){s.tag=""},remove:function(t){s.tag=""}},model:{value:s.tag,callback:function(t){s.tag=t},expression:"tag"}})],1),a("div",{staticClass:"col-12 text-right q-gutter-xs"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue"}})],1)])])],1):s._e(),1===s.part?a("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",{staticClass:"q-mt-sm"},[a("q-form",{on:{submit:s.secondPart}},[a("div",{staticClass:"row q-gutter-xs custom_css"},[a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",{staticClass:"q-mt-sm"},[a("div",{staticClass:"row q-gutter-xs"},[a("div",{staticClass:"col-12 col-md-3 text-center"},[a("q-btn",{staticClass:"q-pa-md text-white bg-darkless-blue",attrs:{round:"",size:"xl","no-caps":""}},[s.photo_url?a("q-avatar",{attrs:{size:"8rem"}},[a("img",{attrs:{src:s.photo_url,alt:"dsdsd"}})]):s._e()],1)],1),a("div",{staticClass:"col-12 col-md text-white"},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col-4"},[s._v("\n                              Nombre:\n                            ")]),a("div",{staticClass:"col"},[a("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[s.$rules.required()],disable:""},model:{value:s.productReal.name,callback:function(t){s.$set(s.productReal,"name",t)},expression:"productReal.name"}})],1)]),a("div",{staticClass:"row items-center justify-center"},[a("div",{staticClass:"col-4"},[s._v("\n                              Precio Coste:\n                            ")]),a("div",{staticClass:"col"},[a("div",{staticClass:"row justify-center q-mt-md"},[a("div",{staticClass:"col"},[a("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"34.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[s.$rules.decimal(),s.$rules.required()],disable:""},model:{value:s.productReal.cost_price,callback:function(t){s.$set(s.productReal,"cost_price",t)},expression:"productReal.cost_price"}})],1),a("div",{staticClass:"col-4 text-center q-pt-sm"},[s._v(" Precio Venta:")]),a("div",{staticClass:"col"},[a("q-input",{attrs:{"label-color":"white",placeholder:"44.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[s.$rules.decimal(),s.$rules.required()]},model:{value:s.productReal.sell_price,callback:function(t){s.$set(s.productReal,"sell_price",t)},expression:"productReal.sell_price"}})],1)])])]),a("div",{staticClass:"row items-center justify-center"},[a("div",{staticClass:"col-4"},[s._v("\n                              Stock disponible:\n                            ")]),a("div",{staticClass:"col q-pr-xs"},[a("div",{staticClass:"row q-pr-sm"},[a("div",{staticClass:"col"},[a("q-input",{staticClass:"bordered full-width",attrs:{"label-color":"white",outlined:"",dense:"","input-class":"text-white",rules:[s.$rules.required(),s.$rules.decimal(),s.$rules.maxValue(s.realQuantity),s.$rules.minValue(1)],autofocus:""},model:{value:s.stock,callback:function(t){s.stock=t},expression:"stock"}})],1)])]),a("div",{staticClass:"col-5"},[s._v("\n                              Dispones de "+s._s(s.realQuantity)+" unidades máximas\n                            ")])])]),a("div",{staticClass:"col-1"})])])],1)],1),a("div",{staticClass:"col-12 text-center q-gutter-xs"},[a("q-btn",{attrs:{color:"red",rounded:"","no-caps":"",type:"submit",label:"Confirmar la venta y proceder a control de stock"}})],1)])])],1),s._v("\n          z\n        ")],1):s._e(),2===s.part?a("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",{staticClass:"q-mt-sm"},[a("q-form",{on:{submit:s.submit}},[a("div",{staticClass:"row q-gutter-xs custom_css"},[s._l(s.sell,(function(t){var e;return a("div",{key:t.id,staticClass:"col-12"},[a("q-card",{staticClass:"bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",[a("div",{staticClass:"row q-gutter-xs"},[a("div",{staticClass:"col-12 col-md text-center"},[a("q-btn",{staticClass:"q-pa-md text-white bg-darkless-blue",attrs:{round:"",size:"md","no-caps":"",disable:""}},[s.photo_url?a("q-avatar",{attrs:{size:"6rem"}},[a("img",{attrs:{src:s.photo_url,alt:"dsdsd"}})]):s._e()],1)],1),a("div",{staticClass:"col-12 col-md-9 text-white",class:s.$q.screen.lt.sm?"text-center":""},[a("div",{staticClass:"row q-pa-sm items-center justify-center"},[a("div",{staticClass:"col-12 col-md-3"},[s._v("\n                              Nombre:\n                            ")]),a("div",{staticClass:"col-12 col-md text-white"},[a("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[s.$rules.required()],disable:""},model:{value:t.name,callback:function(e){s.$set(t,"name",e)},expression:"item.name"}})],1)]),a("div",{staticClass:"row q-pa-sm items-center justify-center"},[a("div",{staticClass:"col-12 col-md-3"},[s._v("\n                              Código de Barras:\n                            ")]),a("div",{staticClass:"col-12 col-md text-white"},[a("q-select",{staticClass:"col no-padding",attrs:(e={options:s.tagOptions,"options-dense":"","option-label":function(t){return t.tag},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",dense:"","use-input":"",clearable:""},x()(e,"popup-content-class",s.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),x()(e,"label","Seleccione un producto"),x()(e,"color","white"),x()(e,"rules",[s.$rules.required()]),x()(e,"autofocus",""),e),on:{filter:s.fnTagByroducts},model:{value:t.code,callback:function(e){s.$set(t,"code",e)},expression:"item.code"}})],1)])])])])],1),t.id<s.sell.length-1?a("q-separator",{staticClass:"q-mx-lg",attrs:{color:"white",size:"1px"}}):s._e()],1)})),a("div",{staticClass:"col-12 text-center q-gutter-xs"},[a("q-btn",{attrs:{color:"red",rounded:"","no-caps":"",type:"submit",label:"Confirmar la venta y reducir el stock"}})],1)],2)])],1)],1):s._e()],1)])])],1)}),y=[],S=s("7ec2"),$=s.n(S),Q=s("c973"),R=s.n(Q),O=s("448a"),P=s.n(O),I=(s("d81d"),s("0481"),s("4069"),s("caad"),s("2532"),s("4de4"),s("d3b7"),s("e260"),s("ddb0"),s("159b"),s("920e")),j=s("e222"),B=s("ffc9"),L=s("fa7d"),A={components:{CategoryAdd:B["a"],ProductSearchItem:j["a"]},props:{lite_mode:{type:Boolean,default:!1},menu_mode:{type:Boolean,default:!1},sign_mode:{type:Boolean,default:!1},product:{type:Object,default:null},lote:{type:Object,default:null},products:{type:Array,default:null},tags:{type:Array,default:null}},computed:r()({photo_url:function(){var t;return"https://lovebeta.thecloudgroup.tech/"+(null===(t=this.productReal)||void 0===t?void 0:t.photo)||!1},realQuantity:function(){var t,e;return this.loteReal?this.loteReal.quantityStock:null!==(t=null===(e=this.productReal)||void 0===e?void 0:e.quantity)&&void 0!==t?t:0},tagOptions:function(){if(this.productSelect.lotes){var t,e=this.productSelect.lotes.map((function(t){return t.id})),s=this.sell.map((function(t){return t.code.id})).flat(1),a=function(t){var s;return null!==(s=e.includes(t.lote_id))&&void 0!==s&&s},l=function(t){return!s.includes(t.id)};return this.tags_filtered=this.tags_all=this.productSelect.lotes.flat(1).map((function(t){return t.tags})).flat(1),null!==(t=this.tags_all.filter(a).filter(l))&&void 0!==t?t:[]}return[]}},Object(n["b"])({logged:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{selling:!1,productReal:{id:0,photo:null,sell_price:0,cost_price:0,quantity:0,name:"",tag:"",lotes:[],lite:!1},productSelect:"",waiting:!1,part:0,stock:1,products_all:[],products_filtered:[],tags_all:[],tags_filtered:[],tag:[],sell:[],loteReal:null}},methods:{setInitial:function(){"Todas las unidades"!==this.productSelect.tag&&(this.product||(this.productReal=this.productSelect,this.tags_filtered=this.tags_all=this.productReal.lotes.flat(1).map((function(t){return t.tags})).flat(1)),this.destructure(this.productSelect),this.part=1)},changePart:function(){var t,e=this,s=this.productSelect,a=null===(t=this.productSelect.lotes)||void 0===t?void 0:t.filter((function(t){return t.id===e.tag.lote_id}))[0];this.productReal=Object(L["a"])(this.productReal,s),this.destructure(s),a&&(this.productReal.cost_price=a.cost_price,this.productReal.sell_price=a.sell_price,this.productReal.quantity=a.tags.filter((function(t){return!t.deleted_at})).length),this.part=1},destructure:function(t){this.productReal.lotes=t.lotes,this.productReal.photo=t.photo,this.productReal.name=t.name,this.productReal.tag=t.tag},secondPart:function(){var t=this;if("Todas las unidades"!==this.productReal.tag)this.productReal.lite=!0,this.submit();else{var e=P()(Array(parseInt(this.stock)-1).keys());this.sell=[];var s={id:0,name:this.productReal.name,code:this.tag};this.sell.push(s),e.forEach((function(e){var s={id:e+1,name:t.productReal.name,code:""};t.sell.push(s)})),console.log(this.sell),this.part=2}},filterProducts:function(t,e,s){var a=this;e((function(){if(""===t)a.products_filtered=a.products_all;else{var e=t.toLowerCase();a.products_filtered=a.products_all.filter((function(t){var s;return null===t||void 0===t||null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},fnProducts:function(t,e,s){var a=this;e((function(){if(""===t)a.products_filtered=a.products_all;else{var e=t.toLowerCase();a.products_filtered=a.products_all.filter((function(t){var s;return null===t||void 0===t||null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},fnTagByroducts:function(t,e,s){var a=this,l=this.productReal.lotes.map((function(t){return t.id})),o=this.sell.map((function(t){return t.code.id})).flat(1),i=function(t){return l.includes(t.lote_id)},c=function(t){return!o.includes(t.id)};e((function(){if(""===t)a.tags_filtered=a.tags_all.filter(i);else{var e=t.toLowerCase();a.tags_filtered=a.tags_all.filter(i).filter(c).filter((function(t){var s;return null===t||void 0===t||null===(s=t.tag)||void 0===s?void 0:s.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},cleanSearch:function(){this.part=0,this.productSelect="",this.$emit("updated")},submit:function(){var t=this;return R()($()().mark((function e(){var s,a;return $()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={product:t.productReal,sell:t.sell,name:t.productReal.name,quantity:t.stock,lote:null!==(s=t.loteReal)&&void 0!==s?s:null},console.log(a),e.next=4,Object(I["h"])(Object(L["f"])(a));case 4:t.part=0,t.selling=!1,t.tag="",t.products_filtered=t.products_all=[],t.tags_filtered=t.tags_all=[],t.$emit("updated");case 10:case"end":return e.stop()}}),e)})))()},findProducts:function(){var t=arguments,e=this;return R()($()().mark((function s(){var a,l,o;return $()().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=!(t.length>0&&void 0!==t[0])||t[0],e.products_filtered=e.products_all=[],s.next=4,Object(I["c"])(a);case 4:l=s.sent,l.status<400&&(o=l.data.data,e.products_filtered=e.products_all=o,e.product&&("Sin etiqueta"!==e.product.tag&&(e.tags_filtered=e.tags_all=o.map((function(t){return t.lotes})).flat(1).map((function(t){return t.tags})).flat(1)),e.setItems()));case 6:case"end":return s.stop()}}),s)})))()},setItems:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.productSelect=t,this.productReal=Object(L["a"])(this.productReal,t),e?(this.productReal.lotes=this.productSelect.lotes=e,this.tags_filtered=this.tags_all=e.map((function(t){return t.tags})).flat(1)):(this.productReal.lotes=t.lotes,this.tags_filtered=this.tags_all=this.productReal.lotes.flat(1).map((function(t){return t.tags})).flat(1),console.log(this.productReal.lotes.map((function(t){return t.tags})).flat(1))),this.productReal.photo=t.photo,this.productReal.name=t.name,this.productReal.tag=t.tag,1===(null===e||void 0===e?void 0:e.length)&&(this.productReal.cost_price=e[0].cost_price,this.productReal.sell_price=e[0].sell_price)}},mounted:function(){this.findProducts()}},z=A,F=(s("9631"),s("24e8")),N=s("f09f"),T=s("65c6"),V=s("2c91"),D=s("a370"),E=s("ddd8"),M=s("0378"),H=s("cb32"),J=s("27f9"),U=s("eb85"),X=s("8572"),G=s("a12b"),K=s("7f67"),W=Object(h["a"])(z,k,y,!1,null,null,null),Y=W.exports;_()(W,"components",{QBtn:g["a"],QIcon:v["a"],QDialog:F["a"],QCard:N["a"],QToolbar:T["a"],QSpace:V["a"],QCardSection:D["a"],QSelect:E["a"],QForm:M["a"],QAvatar:H["a"],QInput:J["a"],QSeparator:U["a"],QField:X["a"],QVirtualScroll:G["a"]}),_()(W,"directives",{ClosePopup:K["a"]});var Z={components:{ProductSellA:Y,StockListButton:q,ProductSearch:u["a"]},computed:r()({},Object(n["b"])({logged:"mystore/loggedIn"})),data:function(){return{categories:[]}}},tt=Z,et=s("3b73"),st=Object(h["a"])(tt,o,i,!1,null,null,null),at=st.exports;_()(st,"components",{QBtn:g["a"],QIcon:v["a"],QExpansionItem:et["a"]});var lt=function(){var t=this,e=t._self._c;return e("q-header",{staticClass:"bg-dark-blue text-white",attrs:{elevated:"","height-hint":"98"}},[e("div",{staticClass:"row shadow-1 items-center"},[t.$q.screen.lt.md?e("div",{staticClass:"col-auto"},[e("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"menu"},on:{click:t.setLeft}})],1):t._e(),e("div",{staticClass:"col-2 q-pl-sm q-py-xs"},[e("img",{staticStyle:{"max-height":"2rem"},attrs:{src:"/icons/logo.png"},on:{click:function(e){return t.$router.push("/")}}})]),e("div",{staticClass:"col"},[e("ProductSearcher")],1),e("div",{staticClass:"col-6 q-pr-sm text-right"},[t.logged?e("ProfileLogo"):e("LoginButton")],1)])])},ot=[],it=function(){var t=this,e=t._self._c;return e("div",[e("q-input",{staticClass:"no-padding",attrs:{"bg-color":"darkless-blue",maxlength:"100",label:"Buscar un producto",dense:"",rounded:"","input-class":"text-white",outlined:"","label-color":"white"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"fa fa-search",color:"white",size:"15px"}})]},proxy:!0}]),model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)},ct=[],rt={data:function(){return{text:""}}},nt=rt,ut=(s("00ff"),Object(h["a"])(nt,it,ct,!1,null,"54bd9012",null)),dt=ut.exports;_()(ut,"components",{QInput:J["a"],QIcon:v["a"],QField:X["a"]});var pt=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{attrs:{rounded:"",dense:"",color:"negative",size:"sm"}},[e("q-avatar",{attrs:{size:"1.5rem"}},[e("img",{attrs:{src:"/img/image.jpg",alt:"foto perfil"}})])],1),t.user?e("span",[t._v(t._s(t.user.name))]):t._e(),e("q-btn",{attrs:{icon:"mdi-logout",dense:"",flat:""},on:{click:t.logOut}})],1)},mt=[],ft={computed:r()({},Object(n["b"])({user:"mystore/user"})),data:function(){return{}},methods:{logOut:function(){this.$store.dispatch("mystore/logoutUser")}},mounted:function(){}},ht=ft,gt=Object(h["a"])(ht,pt,mt,!1,null,null,null),vt=gt.exports;_()(gt,"components",{QBtn:g["a"],QAvatar:H["a"]});var bt=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{attrs:{label:"Iniciar sesión",color:"dark",rounded:""},on:{click:function(e){t.showing=!0}}}),e("q-dialog",{model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[e("q-card",{staticClass:"bg-dark-blue",style:t.$q.screen.lt.md?"width: 90vw":"width: 40vw",attrs:{flat:""}},[e("q-form",{on:{submit:t.submit}},[e("q-bar",{staticClass:"text-white bg-darkless-blue q-py-sm",staticStyle:{height:"auto"}},[e("div",{staticStyle:{"font-weight":"600"}},[t._v("Iniciar sesión")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),e("q-card-section",[e("q-input",{attrs:{rules:[t.$rules.required(),t.$rules.email()],label:"Email",dense:"","label-color":"white","input-class":"text-white"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),e("q-input",{attrs:{rules:[t.$rules.required(),t.$rules.minLength(8)],label:"Contraseña",dense:"",type:"password","label-color":"white","input-class":"text-white"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),e("FormCardAction",{attrs:{"custom-label":"Autenticar"}})],1)],1)],1)],1)},_t=[],wt=s("4425"),qt={components:{FormCardAction:wt["a"]},data:function(){return{showing:!1,user:{email:"admin@admin.love",password:"admin123"}}},methods:{submit:function(){var t=this;return R()($()().mark((function e(){return $()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$q.loading.show(),e.next=3,t.$store.dispatch("mystore/loginUser",t.user);case 3:e.sent,t.$q.loading.hide();case 5:case"end":return e.stop()}}),e)})))()}}},Ct=qt,xt=s("d847"),kt=Object(h["a"])(Ct,bt,_t,!1,null,null,null),yt=kt.exports;_()(kt,"components",{QBtn:g["a"],QDialog:F["a"],QCard:N["a"],QForm:M["a"],QBar:xt["a"],QSpace:V["a"],QCardSection:D["a"],QInput:J["a"]}),_()(kt,"directives",{ClosePopup:K["a"]});var St={components:{LoginButton:yt,ProfileLogo:vt,ProductSearcher:dt},props:{side:{type:Boolean}},computed:r()({},Object(n["b"])({logged:"mystore/loggedIn"})),data:function(){return{}},methods:{setLeft:function(){this.left=!this.side,this.$emit("updated",this.left)}}},$t=St,Qt=s("e359"),Rt=Object(h["a"])($t,lt,ot,!1,null,null,null),Ot=Rt.exports;_()(Rt,"components",{QHeader:Qt["a"],QBtn:g["a"]});var Pt={components:{Header:Ot,Menu:at},data:function(){return{left:!1,key:0}},methods:{updateSide:function(t){this.left=t}},mounted:function(){}},It=Pt,jt=s("4d5a"),Bt=s("9404"),Lt=s("09e3"),At=Object(h["a"])(It,a,l,!1,null,null,null);e["default"]=At.exports;_()(At,"components",{QLayout:jt["a"],QDrawer:Bt["a"],QPageContainer:Lt["a"]})},"722a":function(t,e,s){},"8f3b":function(t,e,s){},9631:function(t,e,s){"use strict";s("722a")}}]);