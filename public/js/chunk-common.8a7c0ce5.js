(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"03da":function(t,e,a){},"0905":function(t,e,a){"use strict";a("03da")},2415:function(t,e,a){},"2ace":function(t,e,a){},"2b26":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));a("d3b7"),a("e6cf"),a("b0c0");var s=a("758b"),o=a("1e4c"),c=a("f508");function i(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&c["a"].show(),new Promise((function(t,e){s["a"].get("categories").then((function(e){c["a"].hide(),t(e.data.data)})).catch((function(t){c["a"].hide(),Object(o["n"])("Las categorías no están disponible en estos momentos"),e(t)}))}))}function n(t){return c["a"].show(),new Promise((function(e,a){s["a"].post("categories",t).then((function(a){Object(o["p"])("Categoría ".concat(t.name," agregada correctamente")),c["a"].hide(),e(a.data.data)})).catch((function(e){var s;c["a"].hide(),Object(o["n"])("La Categoría ".concat(null!==(s=t.name)&&void 0!==s?s:""," no pudo ser agregada en estos momentos")),a(e)}))}))}},"2b9d":function(t,e,a){"use strict";var s=a("9523"),o=a.n(s),c=(a("b0c0"),function(){var t,e=this,a=e._self._c;return a("div",[e.sign_mode?a("q-btn",{attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(t){e.selling=!0}}},[a("q-icon",{attrs:{name:"fa fa-dollar-sign",color:"red",size:"sm"}}),a("q-tooltip",[e._v("Venta de producto")])],1):e.menu_mode?a("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(t){e.selling=!0}}},[a("q-icon",{attrs:{name:"fa fa-dollar-sign",color:"white",size:"sm"}}),a("span",{staticClass:"q-pl-sm"},[e._v("Vender producto")])],1):e.lite_mode?a("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(t){e.selling=!0}}},[a("q-icon",{attrs:{name:"fa fa-dollar-sign",color:"red",size:"sm"}}),a("span",{staticClass:"q-pl-sm"},[e._v("Nueva venta")])],1):a("q-btn",{staticClass:"q-px-sm",attrs:{color:"red-5",dense:"","no-caps":"",label:"Vender producto",rounded:""},on:{click:function(t){e.selling=!0}}}),a("q-dialog",{ref:"mymodal",on:{"before-hide":e.cleanSearch,"before-show":e.findProducts},model:{value:e.selling,callback:function(t){e.selling=t},expression:"selling"}},[a("div",{staticClass:"row justify-center",staticStyle:{"max-width":"75vw",width:"70vw"}},[a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[a("q-toolbar",[a("div",{staticClass:"row"},[a("span",{staticClass:"text-red",class:e.$q.screen.lt.sm?"col-12":""},[e._v("Venta de productos - Paso\n                "+e._s(e.part)+" |")]),0===e.part?a("span",{staticClass:"text-red",class:e.$q.screen.lt.sm?"col-12":""},[e._v("  Seleccione un producto")]):e._e(),1===e.part?a("span",{staticClass:"text-red",class:e.$q.screen.lt.sm?"col-12":""},[e._v("  Cantidad de unidades a vender")]):e._e(),2===e.part?a("span",{staticClass:"text-red",class:e.$q.screen.lt.sm?"col-12":""},[e._v("  Marcar qué productos salen del stock")]):e._e()]),a("q-space"),a("q-btn",{attrs:{flat:"",round:"",dense:"",color:"info",icon:"mdi-keyboard-backspace",disable:0===e.part},on:{click:function(t){e.part=e.part-1}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),a("div",{staticClass:"col-12"},[0===e.part?a("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",{staticClass:"q-mt-sm"},[a("div",{staticClass:"row q-gutter-xs custom_css"},[a("div",{staticClass:"col-12"},[a("q-select",{staticClass:"col no-padding",attrs:(t={options:e.tags,"options-dense":"","option-label":function(t){return t.tag},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",loading:0===e.tags_all.length,dense:"","use-input":"",clearable:""},o()(t,"popup-content-class",e.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),o()(t,"label","Seleccione un producto"),o()(t,"color","white"),o()(t,"rules",[e.$rules.required()]),o()(t,"autofocus",""),t),on:{filter:e.fnProducts,input:e.changePart,clear:function(t){e.tag=""},remove:function(t){e.tag=""}},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}})],1),a("div",{staticClass:"col-12 text-right q-gutter-xs"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue"}})],1)])])],1):e._e(),1===e.part?a("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",{staticClass:"q-mt-sm"},[a("q-form",{on:{submit:e.secondPart}},[a("div",{staticClass:"row q-gutter-xs custom_css"},[a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",{staticClass:"q-mt-sm"},[a("div",{staticClass:"row q-gutter-xs"},[a("div",{staticClass:"col-12 col-md-3 text-center"},[a("q-btn",{staticClass:"q-pa-md text-white bg-darkless-blue",attrs:{round:"",size:"xl","no-caps":""}},[e.photo_url?a("q-avatar",{attrs:{size:"8rem"}},[a("img",{attrs:{src:e.photo_url,alt:"dsdsd"}})]):e._e()],1)],1),a("div",{staticClass:"col-12 col-md text-white"},[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"col-4"},[e._v("\n                              Nombre:\n                            ")]),a("div",{staticClass:"col"},[a("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[e.$rules.required()],disable:""},model:{value:e.productReal.name,callback:function(t){e.$set(e.productReal,"name",t)},expression:"productReal.name"}})],1)]),a("div",{staticClass:"row items-center justify-center"},[a("div",{staticClass:"col-4"},[e._v("\n                              Precio Coste:\n                            ")]),a("div",{staticClass:"col"},[a("div",{staticClass:"row justify-center q-mt-md"},[a("div",{staticClass:"col"},[a("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"34.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[e.$rules.decimal(),e.$rules.required()],disable:""},model:{value:e.productReal.cost_price,callback:function(t){e.$set(e.productReal,"cost_price",t)},expression:"productReal.cost_price"}})],1),a("div",{staticClass:"col-4 text-center q-pt-sm"},[e._v(" Precio Venta:")]),a("div",{staticClass:"col"},[a("q-input",{attrs:{"label-color":"white",placeholder:"44.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[e.$rules.decimal(),e.$rules.required()]},model:{value:e.productReal.sell_price,callback:function(t){e.$set(e.productReal,"sell_price",t)},expression:"productReal.sell_price"}})],1)])])]),a("div",{staticClass:"row items-center justify-center"},[a("div",{staticClass:"col-4"},[e._v("\n                              Stock disponible:\n                            ")]),a("div",{staticClass:"col q-pr-xs"},[a("div",{staticClass:"row q-pr-sm"},[a("div",{staticClass:"col"},[a("q-input",{staticClass:"bordered full-width",attrs:{"label-color":"white",outlined:"",dense:"","input-class":"text-white",rules:[e.$rules.required(),e.$rules.decimal(),e.$rules.maxValue(e.productReal.quantity),e.$rules.minValue(1)],autofocus:""},model:{value:e.stock,callback:function(t){e.stock=t},expression:"stock"}})],1)])]),a("div",{staticClass:"col-5"},[e._v("\n                              Dispones de "+e._s(e.productReal.quantity)+" unidades máximas\n                            ")])])]),a("div",{staticClass:"col-1"})])])],1)],1),a("div",{staticClass:"col-12 text-center q-gutter-xs"},[a("q-btn",{attrs:{color:"red",rounded:"","no-caps":"",type:"submit",label:"Confirmar la venta y proceder a control de stock"}})],1)])])],1)],1):e._e(),2===e.part?a("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",{staticClass:"q-mt-sm"},[a("q-form",{on:{submit:e.submit}},[a("div",{staticClass:"row q-gutter-xs custom_css"},[e._l(e.sell,(function(t){var s;return a("div",{key:t.id,staticClass:"col-12"},[a("q-card",{staticClass:"bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",[a("div",{staticClass:"row q-gutter-xs"},[a("div",{staticClass:"col-12 col-md text-center"},[a("q-btn",{staticClass:"q-pa-md text-white bg-darkless-blue",attrs:{round:"",size:"md","no-caps":"",disable:""}},[e.photo_url?a("q-avatar",{attrs:{size:"6rem"}},[a("img",{attrs:{src:e.photo_url,alt:"dsdsd"}})]):e._e()],1)],1),a("div",{staticClass:"col-12 col-md-9 text-white",class:e.$q.screen.lt.sm?"text-center":""},[a("div",{staticClass:"row q-pa-sm items-center justify-center"},[a("div",{staticClass:"col-12 col-md-3"},[e._v("\n                              Nombre:\n                            ")]),a("div",{staticClass:"col-12 col-md text-white"},[a("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[e.$rules.required()],disable:""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1)]),a("div",{staticClass:"row q-pa-sm items-center justify-center"},[a("div",{staticClass:"col-12 col-md-3"},[e._v("\n                              Código de Barras:\n                            ")]),a("div",{staticClass:"col-12 col-md text-white"},[a("q-select",{staticClass:"col no-padding",attrs:(s={options:e.tagOptions,"options-dense":"","option-label":function(t){return t.tag},"label-color":"white","input-class":"text-white","popup-content-class":"text-white","options-selected-class":"text-white",outlined:"",dense:"","use-input":"",clearable:""},o()(s,"popup-content-class",e.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),o()(s,"label","Seleccione un producto"),o()(s,"color","white"),o()(s,"rules",[e.$rules.required()]),o()(s,"autofocus",""),s),on:{filter:e.fnTagByroducts},model:{value:t.code,callback:function(a){e.$set(t,"code",a)},expression:"item.code"}})],1)])])])])],1),t.id<e.sell.length-1?a("q-separator",{staticClass:"q-mx-lg",attrs:{color:"white",size:"1px"}}):e._e()],1)})),a("div",{staticClass:"col-12 text-center q-gutter-xs"},[a("q-btn",{attrs:{color:"red",rounded:"","no-caps":"",type:"submit",label:"Confirmar la venta y reducir el stock"}})],1)],2)])],1)],1):e._e()],1)])])],1)}),i=[],n=a("7ec2"),r=a.n(n),l=a("c973"),d=a.n(l),u=a("448a"),p=a.n(u),m=a("ded3"),f=a.n(m),h=(a("d81d"),a("0481"),a("4069"),a("caad"),a("2532"),a("4de4"),a("d3b7"),a("e260"),a("ddb0"),a("159b"),a("920e")),b=a("e222"),v=a("2f62"),g=a("ffc9"),_=a("fa7d"),w={components:{CategoryAdd:g["a"],ProductSearchItem:b["a"]},props:{lite_mode:{type:Boolean,default:!1},menu_mode:{type:Boolean,default:!1},sign_mode:{type:Boolean,default:!1},lote:{type:Object,default:null}},computed:f()({photo_url:function(){var t;return"https://lovebeta.thecloudgroup.tech/"+(null===(t=this.productReal)||void 0===t?void 0:t.photo)||!1},tagOptions:function(){var t=this.productReal.lotes.map((function(t){return t.id})),e=this.sell.map((function(t){return t.code.id})).flat(1),a=function(e){return t.includes(e.lote_id)},s=function(t){return!e.includes(t.id)};return this.tags_all.filter(a).filter(s)}},Object(v["b"])({logged:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{selling:!1,productReal:{id:0,photo:null,sell_price:0,cost_price:0,quantity:0,name:"",tag:"",lotes:[],lite:!1},waiting:!1,part:0,stock:1,products_all:[],products:[],tags_all:[],tags:[],tag:[],sell:[]}},methods:{changePart:function(){var t=this,e=this.products_all.map((function(t){return t.lotes})).flat(1).filter((function(e){return e.id===t.tag.lote_id}))[0],a=this.products_all.filter((function(t){return t.id===e.product_id}))[0];this.productReal=Object(_["a"])(this.productReal,a),this.productReal.sell_price=e.sell_price,this.productReal.lotes=a.lotes,this.productReal.photo=a.photo,this.productReal.name=a.name,this.productReal.cost_price=e.cost_price,this.productReal.quantity=e.tags.filter((function(t){return!t.deleted_at})).length,this.part=1},secondPart:function(){var t=this;if("Todas las unidades"!==this.productReal.tag)this.productReal.lite=!0,this.submit();else{var e=p()(Array(parseInt(this.stock)).keys());this.sell=[],e.forEach((function(e){var a={id:e,name:t.productReal.name,code:""};t.sell.push(a)})),this.part=2}},fnProducts:function(t,e,a){var s=this;e((function(){if(""===t)s.tags=s.tags_all;else{var e=t.toLowerCase();s.tags=s.tags_all.filter((function(t){var a;return null===t||void 0===t||null===(a=t.tag)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},fnTagByroducts:function(t,e,a){var s=this,o=this.productReal.lotes.map((function(t){return t.id})),c=this.sell.map((function(t){return t.code.id})).flat(1),i=function(t){return o.includes(t.lote_id)},n=function(t){return!c.includes(t.id)};e((function(){if(""===t)s.tags=s.tags_all.filter(i);else{var e=t.toLowerCase();s.tags=s.tags_all.filter(i).filter(n).filter((function(t){var a;return null===t||void 0===t||null===(a=t.tag)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},cleanSearch:function(){this.part=0,this.productReal={id:0,photo:null,sell_price:0,cost_price:0,quantity:0,name:"",lotes:[]},this.$emit("updated")},submit:function(){var t=this;return d()(r()().mark((function e(){var a;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={product:t.productReal,sell:t.sell,name:t.productReal.name,quantity:t.stock,lote:t.lote},e.next=3,Object(h["f"])(a);case 3:return t.part=0,t.selling=!1,t.productReal=[],t.tag=[],e.next=9,t.findProducts(!1);case 9:t.$emit("updated");case 10:case"end":return e.stop()}}),e)})))()},findProducts:function(){var t=arguments,e=this;return d()(r()().mark((function a(){var s,o,c;return r()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=!(t.length>0&&void 0!==t[0])||t[0],e.products=[],a.next=4,Object(h["c"])(s);case 4:o=a.sent,o.status<400&&(c=o.data.data,e.products=e.products_all=c,e.tags=e.tags_all=c.map((function(t){return t.lotes})).flat(1).map((function(t){return t.tags})).flat(1),e.lote&&e.setItems());case 6:case"end":return a.stop()}}),a)})))()},setItems:function(){var t=this,e=this.products_all.map((function(t){return t.lotes})).flat(1).filter((function(e){return e.id===t.lote.id}))[0],a=this.products_all.filter((function(t){return t.id===e.product_id}))[0];this.productReal=Object(_["a"])(this.productReal,a),this.productReal.sell_price=e.sell_price,this.productReal.lotes=a.lotes,this.productReal.photo=a.photo,this.productReal.name=a.name,this.productReal.cost_price=e.cost_price,this.productReal.quantity=e.quantityStock,this.part=1}},mounted:function(){}},C=w,q=(a("0905"),a("2877")),x=a("9c40"),y=a("0016"),k=a("05c0"),Q=a("24e8"),j=a("f09f"),$=a("65c6"),O=a("2c91"),S=a("a370"),P=a("ddd8"),I=a("0378"),R=a("cb32"),A=a("27f9"),B=a("eb85"),L=a("8572"),z=a("a12b"),N=a("7f67"),F=a("eebe"),V=a.n(F),E=Object(q["a"])(C,c,i,!1,null,null,null);e["a"]=E.exports;V()(E,"components",{QBtn:x["a"],QIcon:y["a"],QTooltip:k["a"],QDialog:Q["a"],QCard:j["a"],QToolbar:$["a"],QSpace:O["a"],QCardSection:S["a"],QSelect:P["a"],QForm:I["a"],QAvatar:R["a"],QInput:A["a"],QSeparator:B["a"],QField:L["a"],QVirtualScroll:z["a"]}),V()(E,"directives",{ClosePopup:N["a"]})},3789:function(t,e,a){"use strict";a("b0c0"),a("a4d3"),a("e01a");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.showing=!0}}},[e("q-icon",{attrs:{name:"mdi-square-edit-outline",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Editar producto")])],1),e("q-dialog",{ref:"mymodal",model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Editar producto")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs"},[e("div",{staticClass:"col-12 col-md-3 text-center"},[e("q-btn",{staticClass:"q-pa-md text-white",staticStyle:{background:"#2B2E36"},attrs:{round:"",size:"xl","no-caps":""},on:{click:function(e){return t.$refs.photofile.$el.click()}}},[t.photo_url?t._e():e("span",{staticStyle:{"font-size":"14px"}},[t._v("Añadir foto")]),t.photo_url?e("q-avatar",{attrs:{size:"8rem"}},[e("img",{attrs:{src:t.photo_url,alt:"dsdsd"}})]):t._e()],1),e("q-file",{ref:"photofile",staticClass:"hidden",attrs:{hidden:"",accept:".jpg, image/*"},on:{input:t.urlImage},model:{value:t.product.photo,callback:function(e){t.$set(t.product,"photo",e)},expression:"product.photo"}})],1),e("div",{staticClass:"col-12 col-md q-mt-sm q-mt-none-md text-white"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-4"},[t._v("\n                      Nombre:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.required()]},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Categoría:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.categories,"options-dense":"","option-label":function(t){return t.name},"label-color":"white",outlined:"",dense:"","use-input":"",clearable:"","popup-content-class":t.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue",placeholder:t.product.category_id?"":"Seleccione una categoría",color:"white",rules:[t.$rules.required()]},on:{filter:t.fnCategories},scopedSlots:t._u([{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[e("CategoryAdd",{staticClass:"full-width",attrs:{"full-width":!0},on:{newCategory:t.addCategory}})],1)],1)]},proxy:!0}]),model:{value:t.product.category_id,callback:function(e){t.$set(t.product,"category_id",e)},expression:"product.category_id"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Descripción:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:t.$q.screen.gt.sm?"Moet con sabor a fresa para invitados VIP.":"Descripción",color:"white",outlined:"","input-class":"text-white",dense:"",autogrow:"",type:"textarea"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Impresión etiqueta:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.tags,"options-dense":"","label-color":"white",outlined:"",dense:"","use-input":"","popup-content-class":"bg-dark-blue text-white"},model:{value:t.product.tag,callback:function(e){t.$set(t.product,"tag",e)},expression:"product.tag"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col"},[e("div",{staticClass:"row items-center"},[t.$q.screen.gt.sm?e("div",{staticClass:"col text-center q-px-sm"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:t.$q.screen.gt.sm?"Editar producto":"Crear","no-caps":"",color:"red-5",size:"sm",rounded:"",dense:""}})],1):t._e()])])]),t.$q.screen.lt.md?e("div",{staticClass:"row q-pt-md"},[e("div",{staticClass:"col-12 text-center"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:"Editar producto","no-caps":"",color:"red-5",size:"md",rounded:"",dense:""}})],1)]):t._e()]),e("div",{staticClass:"col-1"})])])],1)],1)],1)])])],1)},o=[],c=a("7ec2"),i=a.n(c),n=a("c973"),r=a.n(n),l=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("e260"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("fa7d")),d=a("920e"),u=a("2b26"),p=a("ffc9"),m={components:{CategoryAdd:p["a"]},props:{productNew:{type:Object},liteVersion:{type:Boolean,default:!1},categories_all:{type:Array}},data:function(){return{showing:!1,product:{id:null,name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:null},tags:["Todas las unidades","Sin etiqueta"],photo_url:null,categories:[]}},methods:{submit:function(){var t=this;return r()(i()().mark((function e(){var a;return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.photo_url){e.next=3;break}return t.$notify.n("Debe agregar la foto del producto"),e.abrupt("return",!1);case 3:return a=Object(l["d"])(t.product),a.get("photo")||a.delete("photo"),e.next=7,Object(d["e"])(a);case 7:e.sent,t.showing=!1,t.$emit("updated");case 10:case"end":return e.stop()}}),e)})))()},setItems:function(){this.product=Object(l["a"])(this.product,this.productNew),this.photo_url="https://lovebeta.thecloudgroup.tech/"+this.product.photo,this.product.photo=[]},fnCategories:function(t,e,a){var s=this;e((function(){if(""===t)s.categories=s.categories_all;else{var e=t.toLowerCase();s.categories=s.categories_all.filter((function(t){var a;return null===t||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},findCategories:function(t){var e=this;return r()(i()().mark((function a(){return i()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["a"])(t);case 2:e.categories=e.categories_all=a.sent;case 3:case"end":return a.stop()}}),a)})))()},urlImage:function(){this.photo_url=URL.createObjectURL(this.product.photo)},addCategory:function(t){this.categories_all.push(t),this.product.category_id=t},cleanProduct:function(){this.product={name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:"Sin etiqueta"},this.photo_url=""}},mounted:function(){this.setItems()}},f=m,h=(a("ea85"),a("2877")),b=a("9c40"),v=a("0016"),g=a("24e8"),_=a("f09f"),w=a("65c6"),C=a("2c91"),q=a("a370"),x=a("0378"),y=a("cb32"),k=a("7d53"),Q=a("27f9"),j=a("ddd8"),$=a("66e5"),O=a("4074"),S=a("8572"),P=a("b047"),I=a("7f67"),R=a("eebe"),A=a.n(R),B=Object(h["a"])(f,s,o,!1,null,null,null);e["a"]=B.exports;A()(B,"components",{QBtn:b["a"],QIcon:v["a"],QDialog:g["a"],QCard:_["a"],QToolbar:w["a"],QSpace:C["a"],QCardSection:q["a"],QForm:x["a"],QAvatar:y["a"],QFile:k["a"],QInput:Q["a"],QSelect:j["a"],QItem:$["a"],QItemSection:O["a"],QField:S["a"],QChip:P["a"]}),A()(B,"directives",{ClosePopup:I["a"]})},"37ee":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 flex-center flex"},[e("LottiePlayer",{attrs:{path:"https://assets2.lottiefiles.com/private_files/lf30_e3pteeho.json"}})],1),t._m(0)])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-12 text-center"},[e("h5",{staticClass:"text-white"},[t._v("No hay elementos para mostrar")])])}],c=(a("b0c0"),function(){var t=this,e=t._self._c;return e("VueLottiePlayer",{attrs:{name:t.name,loop:"",path:t.path}})}),i=[],n=(a("a9e3"),a("7b07")),r={components:{VueLottiePlayer:n["a"]},props:{path:{type:String},name:{type:[String,Number],default:"image"+Math.random()}},data:function(){return{}}},l=r,d=a("2877"),u=Object(d["a"])(l,c,i,!1,null,null,null),p=u.exports,m={components:{LottiePlayer:p},data:function(){return{}}},f=m,h=Object(d["a"])(f,s,o,!1,null,null,null);e["a"]=h.exports},4425:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("q-card-actions",{attrs:{align:"right"}},[t.lite?t._e():e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue","no-caps":t.capittal_letters}}),t.lite?t._e():e("q-btn",{attrs:{disable:!t.available,label:t.customLabel?t.customLabel:t.update?"Actualizar":"Crear",type:"submit",color:t.color,"no-caps":t.capittal_letters}}),t.lite?e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!t.available,label:t.customLabel?t.customLabel:t.update?"Actualizar":"Crear",color:t.color,"no-caps":t.capittal_letters}}):t._e()],1)},o=[],c=(a("a9e3"),{name:"FormCardAction",props:{update:{type:Boolean,default:!1},capittal_letters:{type:Boolean,default:!0},lite:{type:Boolean,default:!1},available:{type:[Boolean,Number],default:!0},customLabel:{type:String,default:null},color:{type:String,default:"darkless-blue"}},data:function(){return{}}}),i=c,n=a("2877"),r=a("4b7e"),l=a("9c40"),d=a("7f67"),u=a("eebe"),p=a.n(u),m=Object(n["a"])(i,s,o,!1,null,null,null);e["a"]=m.exports;p()(m,"components",{QCardActions:r["a"],QBtn:l["a"]}),p()(m,"directives",{ClosePopup:d["a"]})},"4f65":function(t,e,a){},"57fb":function(t,e,a){"use strict";a("b0c0"),a("a4d3"),a("e01a");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.adding=!0}}},[e("q-icon",{attrs:{name:"mdi-numeric-positive-1",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Añadir stock")])],1),e("q-dialog",{ref:"mymodal",model:{value:t.adding,callback:function(e){t.adding=e},expression:"adding"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v('Agregar al stock del producto "'+t._s(t.product.name)+'"')]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs"},[e("div",{staticClass:"col-12 col-md-3 text-center"},[e("q-btn",{staticClass:"q-pa-md text-white",staticStyle:{background:"#2B2E36"},attrs:{round:"",size:"xl","no-caps":""}},[t.photo_url?e("q-avatar",{attrs:{size:"8rem"}},[e("img",{attrs:{src:t.photo_url,alt:"dsdsd"}})]):t._e()],1)],1),e("div",{staticClass:"col-12 col-md q-mt-sm q-mt-none-md text-white"},[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-4"},[t._v("\n                      Nombre:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"Moet Ice Rosé",color:"white",outlined:"","input-class":"text-white",dense:"",disable:"",rules:[t.$rules.required()]},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Descripción:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:t.$q.screen.gt.sm?"Moet con sabor a fresa para invitados VIP.":"Descripción",color:"white",outlined:"","input-class":"text-white",dense:"",autogrow:"",disable:"",type:"textarea"},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1)]),e("div",{staticClass:"row items-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Impresión etiqueta:\n                    ")]),e("div",{staticClass:"col"},[e("q-select",{staticClass:"bordered",attrs:{options:t.tags,"options-dense":"","label-color":"white",outlined:"",dense:"","use-input":"",disable:"","popup-content-class":"bg-dark-blue text-white"},model:{value:t.product.tag,callback:function(e){t.$set(t.product,"tag",e)},expression:"product.tag"}})],1)]),e("div",{staticClass:"row items-center justify-center q-pt-sm"},[e("div",{staticClass:"col-4"},[t._v("\n                      Precio Coste:\n                    ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"row justify-center q-mt-md"},[e("div",{staticClass:"col"},[e("q-input",{staticClass:"no-padding",attrs:{"label-color":"white",placeholder:"34.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()]},model:{value:t.product.cost_price,callback:function(e){t.$set(t.product,"cost_price",e)},expression:"product.cost_price"}})],1),e("div",{staticClass:"col-4 text-center q-pt-sm"},[t._v(" Precio Venta:")]),e("div",{staticClass:"col"},[e("q-input",{attrs:{"label-color":"white",placeholder:"44.000 XAF",color:"white",outlined:"","input-class":"text-white",dense:"",rules:[t.$rules.decimal(),t.$rules.required()]},model:{value:t.product.sell_price,callback:function(e){t.$set(t.product,"sell_price",e)},expression:"product.sell_price"}})],1)])])]),e("div",{staticClass:"row items-center justify-center"},[e("div",{staticClass:"col-4"},[t._v("\n                      Unidades a agregar:\n                    ")]),e("div",{staticClass:"col"},[e("q-input",{staticClass:"bordered",attrs:{"label-color":"white",outlined:"",dense:"",suffix:t.$q.screen.gt.sm?"unidades":"u","input-class":"text-white",rules:[t.$rules.required(),t.$rules.decimal()]},model:{value:t.product.quantity,callback:function(e){t.$set(t.product,"quantity",e)},expression:"product.quantity"}})],1)]),e("div",{staticClass:"row q-pt-md"},[e("div",{staticClass:"col-12 text-center"},[e("q-btn",{staticClass:"q-px-lg q-py-xs",attrs:{type:"submit",label:"Agregar al stock","no-caps":"",color:"red-5",size:"md",rounded:"",dense:""}})],1)])]),e("div",{staticClass:"col-1"})])])],1)],1)],1)])])],1)},o=[],c=a("7ec2"),i=a.n(c),n=a("c973"),r=a.n(n),l=a("fa7d"),d=a("83b90"),u={props:{liteVersion:{type:Boolean,default:!1},productNew:{type:Object}},computed:{photo_url:function(){return"https://lovebeta.thecloudgroup.tech/"+this.product.photo}},data:function(){return{adding:!1,product:{id:"",name:"",photo:"",description:"",quantity:1,cost_price:"",sell_price:"",tag:""},tags:["Todas las unidades","Sin etiqueta"]}},methods:{submit:function(){var t=this;return r()(i()().mark((function e(){return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["b"])(t.product);case 2:e.sent,t.adding=!1,t.$emit("updated");case 5:case"end":return e.stop()}}),e)})))()},setItems:function(){this.product=Object(l["a"])(this.product,this.productNew),this.product.quantity=1}},mounted:function(){this.setItems()}},p=u,m=a("2877"),f=a("9c40"),h=a("0016"),b=a("24e8"),v=a("f09f"),g=a("65c6"),_=a("2c91"),w=a("a370"),C=a("0378"),q=a("cb32"),x=a("27f9"),y=a("ddd8"),k=a("7f67"),Q=a("eebe"),j=a.n(Q),$=Object(m["a"])(p,s,o,!1,null,null,null);e["a"]=$.exports;j()($,"components",{QBtn:f["a"],QIcon:h["a"],QDialog:b["a"],QCard:v["a"],QToolbar:g["a"],QSpace:_["a"],QCardSection:w["a"],QForm:C["a"],QAvatar:q["a"],QInput:x["a"],QSelect:y["a"]}),j()($,"directives",{ClosePopup:k["a"]})},"5d4c":function(t,e,a){"use strict";var s=a("9523"),o=a.n(s),c=(a("b0c0"),function(){var t,e=this,a=e._self._c;return a("div",[e.menu_mode?a("q-btn",{staticClass:"full-width",attrs:{dense:"","no-caps":"",flat:"","text-color":"white",color:"red",align:"left"},on:{click:function(t){e.searching=!0}}},[a("q-icon",{attrs:{name:"mdi-file-search",color:"white",size:"sm"}}),a("span",{staticClass:"q-pl-sm"},[e._v("Buscar producto")])],1):e._e(),e.products_all.length&&!e.menu_mode?a("q-btn",{staticClass:"q-px-sm",attrs:{color:"red-5",dense:"","no-caps":"",label:"Buscar producto",rounded:""},on:{click:function(t){e.searching=!0}}}):e._e(),a("q-dialog",{ref:"mymodal",on:{"before-hide":e.cleanSearch},model:{value:e.searching,callback:function(t){e.searching=t},expression:"searching"}},[a("div",{staticClass:"row justify-center",staticStyle:{"max-width":"65vw",width:"60vw"}},[a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[a("q-toolbar",[a("span",{staticClass:"text-red"},[e._v("Buscar producto")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[a("q-card-section",{staticClass:"q-mt-sm"},[a("q-form",{on:{submit:e.submit}},[a("div",{staticClass:"row q-gutter-xs custom_css"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-gutter-sm"},[a("q-input",{staticClass:"col no-padding",attrs:{label:"El nombre contiene...",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}}),a("q-select",{staticClass:"col no-padding",attrs:(t={options:e.categories,"options-dense":"","option-label":function(t){return t.name},"label-color":"white","input-class":"text-white","popup-content-class":"text-white",outlined:"",dense:"","use-input":"",clearable:"",multiple:""},o()(t,"popup-content-class",e.$q.screen.gt.sm?"bg-dark-blue dark-blue text-white":"bg-dark-blue"),o()(t,"label","Seleccione una categoría"),o()(t,"color","white"),o()(t,"rules",[e.$rules.required()]),t),on:{filter:e.fnCategories,input:e.submit},scopedSlots:e._u([e.user&&1===e.user.role_id?{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[a("CategoryAdd",{staticClass:"full-width",attrs:{"full-width":!0},on:{newCategory:function(t){return e.$emit("updated")}}})],1)],1)]},proxy:!0}:null],null,!0),model:{value:e.product.category_id,callback:function(t){e.$set(e.product,"category_id",t)},expression:"product.category_id"}})],1)]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-gutter-sm"},[a("q-input",{staticClass:"col",attrs:{label:"Precio de venta costo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.cost_price_min,callback:function(t){e.$set(e.product,"cost_price_min",t)},expression:"product.cost_price_min"}}),a("q-input",{staticClass:"col",attrs:{label:"Precio de costo máximo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.cost_price_max,callback:function(t){e.$set(e.product,"cost_price_max",t)},expression:"product.cost_price_max"}})],1)]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-gutter-sm"},[a("q-input",{staticClass:"col",attrs:{label:"Precio de venta mínimo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.sell_price_min,callback:function(t){e.$set(e.product,"sell_price_min",t)},expression:"product.sell_price_min"}}),a("q-input",{staticClass:"col",attrs:{label:"Precio de venta máximo",dense:"","label-color":"white","input-class":"text-white",debounce:"500",loading:e.waiting,autofocus:""},on:{input:e.submit},model:{value:e.product.sell_price_max,callback:function(t){e.$set(e.product,"sell_price_max",t)},expression:"product.sell_price_max"}})],1)]),a("div",{staticClass:"col-12 text-right q-gutter-xs"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"dark-blue"}})],1),e.products.length?a("div",{staticClass:"col-12 q-py-xs text-white"},[a("div",{staticClass:"row bg-dark-blue"},[a("div",{staticClass:"col text-left"},[e._v("Nombre")]),a("div",{staticClass:"col text-center"},[e._v("Precio de venta")]),a("div",{staticClass:"col text-center"},[e._v("Precio de costo")]),a("div",{staticClass:"col text-left"},[e._v("Categoría")]),e.logged?a("div",{staticClass:"col-1 text-center"},[e._v("Acciones")]):e._e()])]):e._e(),a("div",{staticClass:"col-12 text-white"},e._l(e.products,(function(t){return a("ProductSearchItem",{key:t.id,attrs:{product:t},on:{updated:function(t){e.$emit("updated"),e.searching=!1}}})})),1)])])],1)],1)],1)])])],1)}),i=[],n=a("7ec2"),r=a.n(n),l=a("c973"),d=a.n(l),u=a("ded3"),p=a.n(u),m=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("d81d"),a("920e")),f=a("e222"),h=a("2f62"),b=a("ffc9"),v={components:{CategoryAdd:b["a"],ProductSearchItem:f["a"]},props:{categories:{type:Array},menu_mode:{type:Boolean,default:!1}},computed:p()({},Object(h["b"])({logged:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{searching:!1,product:{name:"",cost_price_min:"",cost_price_max:"",sell_price_min:"",sell_price_max:"",category_id:[],description:"",stock:"",tag:""},tags:["Todas las unidades","Sin etiqueta"],products:[],products_all:[],categoriesFiltered:[],waiting:!1}},methods:{fnCategories:function(t,e,a){var s=this;e((function(){if(""===t)s.categoriesFiltered=s.categories;else{var e=t.toLowerCase();s.categoriesFiltered=s.categories.filter((function(t){var a;return null===t||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},cleanSearch:function(){this.product={name:"",cost_price_min:"",cost_price_max:"",sell_price_min:"",sell_price_max:"",category_id:null,description:"",stock:"",tag:""}},submit:function(){var t=this;this.waiting=!0;var e=this.products_all;this.product.name&&(e=e.filter((function(e){return e.name.toLowerCase().includes(t.product.name.toLowerCase())}))),this.product.category_id&&(e=e.filter((function(e){return t.product.category_id.map((function(t){return t.id})).includes(e.category_id)})),console.log(e.map((function(t){return t.category_id})))),this.product.sell_price_min&&(e=e.filter((function(e){return e.sell_price>=t.product.sell_price_min}))),this.product.sell_price_max&&(e=e.filter((function(e){return e.sell_price<=t.product.sell_price_max}))),this.product.cost_price_min&&(e=e.filter((function(e){return e.sell_price>=t.product.sell_price_min}))),this.product.cost_price_max&&(e=e.filter((function(e){return e.sell_price<=t.product.sell_price_max}))),this.products=e,this.waiting=!1},findProducts:function(){var t=this;return d()(r()().mark((function e(){var a;return r()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["c"])(!1);case 2:a=e.sent,a.status<400&&(t.products_all=a.data.data);case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.findProducts(),this.categoriesFiltered=this.categories}},g=v,_=(a("6b73"),a("2877")),w=a("9c40"),C=a("0016"),q=a("24e8"),x=a("f09f"),y=a("65c6"),k=a("2c91"),Q=a("a370"),j=a("0378"),$=a("27f9"),O=a("ddd8"),S=a("66e5"),P=a("4074"),I=a("8572"),R=a("a12b"),A=a("7f67"),B=a("eebe"),L=a.n(B),z=Object(_["a"])(g,c,i,!1,null,null,null);e["a"]=z.exports;L()(z,"components",{QBtn:w["a"],QIcon:C["a"],QDialog:q["a"],QCard:x["a"],QToolbar:y["a"],QSpace:k["a"],QCardSection:Q["a"],QForm:j["a"],QInput:$["a"],QSelect:O["a"],QItem:S["a"],QItemSection:P["a"],QField:I["a"],QVirtualScroll:R["a"]}),L()(z,"directives",{ClosePopup:A["a"]})},"64b2":function(t,e,a){"use strict";a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row items-start justify-start full-width"},[e("q-btn",{class:t.liteVersion?"":"full-width",attrs:{"no-caps":"",align:"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:function(e){t.showing=!0}},scopedSlots:t._u([{key:"default",fn:function(){return[e("q-icon",{attrs:{name:"mdi-trash-can",color:"red",size:"sm"}}),t.liteVersion?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Eliminar producto")])]},proxy:!0}])}),e("q-dialog",{ref:"mymodal",model:{value:t.showing,callback:function(e){t.showing=e},expression:"showing"}},[e("div",{staticClass:"row justify-center justWhite",staticStyle:{"max-width":"75vw",width:"70vw"}},[e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"bg-darkless-blue no-padding",attrs:{flat:"",square:""}},[e("q-toolbar",[e("span",{staticClass:"text-red"},[t._v("Eliminar producto")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",color:"red",icon:"close"}})],1)],1)],1),e("div",{staticClass:"col-12"},[e("q-card",{staticClass:"q-mt-sm bg-darkless-blue",attrs:{square:"",flat:""}},[e("q-card-section",{staticClass:"q-mt-sm"},[e("q-form",{on:{submit:t.submit}},[e("div",{staticClass:"row q-gutter-xs text-white"},[e("div",{staticClass:"col-12"},[t._v('¿Seguro que desea eliminar el producto con nombre "'+t._s(t.product.name)+'"?')]),e("div",{staticClass:"col-12 text-right q-gutter-xs"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancelar",color:"darkless-blue"}}),e("q-btn",{attrs:{label:"Eliminar",color:"dark",type:"submit"}})],1)])])],1)],1)],1)])])],1)},o=[],c=a("7ec2"),i=a.n(c),n=a("c973"),r=a.n(n),l=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("e260"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("fa7d")),d=a("920e"),u=a("2b26"),p=a("ffc9"),m=a("4425"),f={components:{FormCardAction:m["a"],CategoryAdd:p["a"]},props:{productNew:{type:Object},categories_all:{type:Array},liteVersion:{type:Boolean,default:!1}},data:function(){return{showing:!1,product:{id:null,name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:null},tags:["Todas las unidades","Sin etiqueta"],photo_url:null,categories:[]}},methods:{submit:function(){var t=this;return r()(i()().mark((function e(){return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["a"])(t.product);case 2:e.sent,t.showing=!1,t.$emit("updated");case 5:case"end":return e.stop()}}),e)})))()},setItems:function(){this.product=Object(l["a"])(this.product,this.productNew),this.photo_url="https://lovebeta.thecloudgroup.tech/"+this.product.photo,this.product.photo=[]},fnCategories:function(t,e,a){var s=this;e((function(){if(""===t)s.categories=s.categories_all;else{var e=t.toLowerCase();s.categories=s.categories_all.filter((function(t){var a;return null===t||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e)}))}}),(function(e){""!==t&&e.options.length>0&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))},findCategories:function(t){var e=this;return r()(i()().mark((function a(){return i()().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["a"])(t);case 2:e.categories=e.categories_all=a.sent;case 3:case"end":return a.stop()}}),a)})))()},urlImage:function(){this.photo_url=URL.createObjectURL(this.product.photo)},addCategory:function(t){this.categories_all.push(t),this.product.category_id=t},cleanProduct:function(){this.product={name:"",photo:[],cost_price:"",sell_price:"",category_id:null,description:"",stock:"",tag:"Sin etiqueta"},this.photo_url=""}},mounted:function(){this.setItems()}},h=f,b=(a("6650"),a("2877")),v=a("9c40"),g=a("0016"),_=a("24e8"),w=a("f09f"),C=a("65c6"),q=a("2c91"),x=a("a370"),y=a("0378"),k=a("8572"),Q=a("b047"),j=a("7f67"),$=a("eebe"),O=a.n($),S=Object(b["a"])(h,s,o,!1,null,null,null);e["a"]=S.exports;O()(S,"components",{QBtn:v["a"],QIcon:g["a"],QDialog:_["a"],QCard:w["a"],QToolbar:C["a"],QSpace:q["a"],QCardSection:x["a"],QForm:y["a"],QField:k["a"],QChip:Q["a"]}),O()(S,"directives",{ClosePopup:j["a"]})},6650:function(t,e,a){"use strict";a("2ace")},"6b73":function(t,e,a){"use strict";a("2415")},"6f7b":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row",class:t.lite_mode?"":"full-width"},[e("q-btn",{class:t.lite_mode?"":"full-width",attrs:{disable:t.disabled,"no-caps":"",align:t.lite_mode?"center":"left",flat:"",dense:"","text-color":"white",color:"red"},on:{click:t.printTags}},[e("q-icon",{attrs:{name:"mdi-printer",color:"red",size:"sm"}}),t.lite_mode?t._e():e("span",{staticClass:"q-pl-sm"},[t._v("Imprimir etiqueta")]),e("q-tooltip",[t._v("Impresión de etiquetas")])],1)],1)},o=[],c=a("7ec2"),i=a.n(c),n=a("c973"),r=a.n(n),l=a("920e"),d={props:{lote:{type:Object},lite_mode:{type:Boolean,default:!1}},computed:{disabled:function(){return"Todas las unidades"!==this.lote.product.tag}},data:function(){return{}},methods:{printTags:function(){var t=this;return r()(i()().mark((function e(){var a,s;return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={lote_id:t.lote.id},e.next=3,Object(l["b"])(a);case 3:s=e.sent,console.log(s);case 5:case"end":return e.stop()}}),e)})))()}}},u=d,p=a("2877"),m=a("9c40"),f=a("0016"),h=a("05c0"),b=a("eebe"),v=a.n(b),g=Object(p["a"])(u,s,o,!1,null,null,null);e["a"]=g.exports;v()(g,"components",{QBtn:m["a"],QIcon:f["a"],QTooltip:h["a"]})},"83b90":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));a("d3b7"),a("e6cf"),a("b0c0");var s=a("758b"),o=a("f508"),c=a("1e4c");function i(){return o["a"].show(),new Promise((function(t,e){s["a"].get("lotes").then((function(e){o["a"].hide(),t(e)})).catch((function(t){o["a"].hide(),Object(c["n"])("El stock no están disponibles en estos momentos"),e(t)}))}))}function n(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";o["a"].show();var i=null!==(e=t[a])&&void 0!==e?e:t.get(a);return new Promise((function(e,a){s["a"].post("lotes",t).then((function(t){Object(c["p"])("Lote ".concat(i," agregado correctamente")),o["a"].hide(),e(t.data.data)})).catch((function(e){var s;o["a"].hide(),Object(c["n"])("El lote ".concat(null!==(s=t.name)&&void 0!==s?s:""," no pudo ser agregado en estos momentos")),a(e)}))}))}},"920e":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return l})),a.d(e,"f",(function(){return d})),a.d(e,"b",(function(){return u}));a("d3b7"),a("e6cf"),a("b0c0"),a("e260"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861");var s=a("758b"),o=a("f508"),c=a("1e4c");function i(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&o["a"].show(),new Promise((function(t,e){s["a"].get("products").then((function(e){o["a"].hide(),t(e)})).catch((function(t){o["a"].hide(),Object(c["n"])("Los productos no están disponibles en estos momentos"),e(t)}))}))}function n(t){var e;o["a"].show();var a=null!==(e=t.get("name"))&&void 0!==e?e:t.name;return new Promise((function(e,i){s["a"].post("products",t).then((function(t){Object(c["p"])("Producto ".concat(a," agregado correctamente")),o["a"].hide(),e(t.data.data)})).catch((function(e){var a;o["a"].hide(),Object(c["n"])("El producto ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser agregado en estos momentos")),i(e)}))}))}function r(t){var e,a;o["a"].show();var i=null!==(e=t.get("name"))&&void 0!==e?e:t.name,n=null!==(a=t.get("id"))&&void 0!==a?a:t.id;return t.append("_method","put"),new Promise((function(e,a){s["a"].post("products/".concat(n),t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){Object(c["p"])("Producto ".concat(i," actualizado correctamente")),o["a"].hide(),e(t.data.data)})).catch((function(e){var s;o["a"].hide(),Object(c["n"])("El producto ".concat(null!==(s=t.name)&&void 0!==s?s:""," no pudo ser actualizado en estos momentos")),a(e)}))}))}function l(t){o["a"].show();var e=t.name,a=t.id;return new Promise((function(i,n){s["a"].delete("products/".concat(a),{_method:"delete"}).then((function(t){Object(c["p"])("Producto ".concat(e," eliminado correctamente")),o["a"].hide(),i(t.data.data)})).catch((function(e){var a;o["a"].hide(),Object(c["n"])("El producto ".concat(null!==(a=t.name)&&void 0!==a?a:""," no pudo ser eliminado en estos momentos")),n(e)}))}))}function d(t){var e;o["a"].show();var a=null!==(e=t.name)&&void 0!==e?e:t.get("name");return new Promise((function(e,i){s["a"].post("sellProduct",t).then((function(t){Object(c["p"])("Producto ".concat(a," en stock actualizado correctamente")),o["a"].hide(),e(t.data.data)})).catch((function(e){var a;o["a"].hide(),e.response.data.data?Object(c["n"])(e.response.data.data):Object(c["n"])("El producto ".concat(null!==(a=t.name)&&void 0!==a?a:""," en stock no pudo ser actualizado en estos momentos")),i(e)}))}))}function u(t){var e=this;o["a"].show();var a="lote ".concat(t.id);return new Promise((function(c,i){s["a"].post("tag-download",t,{responseType:"blob"}).then((function(t){if(e.$q.loading.hide(),t.status<400){var s=URL.createObjectURL(new Blob([t.data],{type:"application/pdf"})),o=document.createElement("a");o.href=s,o.setAttribute("download","".concat(a,".pdf")),document.body.appendChild(o),o.click();var i=new Blob([t.data],{type:t.data.type}),n=window.URL.createObjectURL(i);c(n)}})).catch((function(t){o["a"].hide(),i(t)}))}))}},e222:function(t,e,a){"use strict";a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col text-left"},[t._v(t._s(t.product.name))]),e("div",{staticClass:"col text-center"},[t._v(t._s(t.formatterCurrency(t.product.sell_price)))]),e("div",{staticClass:"col text-center"},[t._v(t._s(t.formatterCurrency(t.product.cost_price)))]),e("div",{staticClass:"col"},[t._v(t._s(t.product.category.name))]),t.loggedIn?e("div",{staticClass:"col-1 text-center"},[e("div",{staticClass:"row q-gutter-sm bg-darkless-blue text-center"},[1===t.user.role_id?e("ProductEdit",{staticClass:"col",attrs:{"lite-version":!0,"product-new":t.product},on:{updated:function(e){return t.$emit("updated")}}}):t._e(),1===t.user.role_id?e("ProductDelete",{staticClass:"col",attrs:{"lite-version":!0,"product-new":t.product},on:{updated:function(e){return t.$emit("updated")}}}):t._e()],1)]):t._e()])},o=[],c=a("ded3"),i=a.n(c),n=a("fa7d"),r=a("3789"),l=a("64b2"),d=a("2f62"),u={components:{ProductDelete:l["a"],ProductEdit:r["a"]},props:{product:{type:Object}},computed:i()({},Object(d["b"])({loggedIn:"mystore/loggedIn",user:"mystore/user"})),data:function(){return{}},methods:{formatterCurrency:function(t){return Object(n["b"])(t)}}},p=u,m=a("2877"),f=Object(m["a"])(p,s,o,!1,null,null,null);e["a"]=f.exports},ea85:function(t,e,a){"use strict";a("4f65")},ffc9:function(t,e,a){"use strict";a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",[e("q-btn",{class:t.fullWidth?"full-width":"",attrs:{dense:"",label:"Agregar nueva categoría",color:"dark-blue","no-caps":""},on:{click:function(e){t.adding=!0}}}),e("q-dialog",{model:{value:t.adding,callback:function(e){t.adding=e},expression:"adding"}},[e("q-card",{staticClass:"bg-dark-blue",staticStyle:{"max-width":"40vw",width:"38vw"}},[e("q-bar",{staticClass:"text-red q-py-sm",staticStyle:{height:"auto"}},[e("div",{staticStyle:{"font-weight":"600"}},[t._v("Agregando nueva categoría")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),e("q-form",{on:{submit:t.submit}},[e("q-card-section",[e("div",{staticClass:"row items-center"},[e("div",{staticClass:"col-3 text-center text-white"},[t._v("\n              Categoría\n            ")]),e("div",{staticClass:"col"},[e("q-input",{staticClass:"bordered",attrs:{"label-color":"white",placeholder:"Bebidas alcohólicas",color:"white",outlined:"","input-class":"text-white",dense:""},model:{value:t.category.name,callback:function(e){t.$set(t.category,"name",e)},expression:"category.name"}})],1)])]),e("FormCardAction",{attrs:{"custom-label":"Agregar"}})],1)],1)],1)],1)},o=[],c=a("7ec2"),i=a.n(c),n=a("c973"),r=a.n(n),l=a("4425"),d=a("2b26"),u={components:{FormCardAction:l["a"]},props:{fullWidth:{type:Boolean,default:!1}},data:function(){return{adding:!1,category:{name:""}}},methods:{submit:function(){var t=this;return r()(i()().mark((function e(){var a;return i()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["b"])(t.category);case 2:a=e.sent,t.adding=!1,t.$emit("newCategory",a);case 5:case"end":return e.stop()}}),e)})))()}}},p=u,m=a("2877"),f=a("9c40"),h=a("24e8"),b=a("f09f"),v=a("d847"),g=a("2c91"),_=a("0378"),w=a("a370"),C=a("27f9"),q=a("7f67"),x=a("eebe"),y=a.n(x),k=Object(m["a"])(p,s,o,!1,null,null,null);e["a"]=k.exports;y()(k,"components",{QBtn:f["a"],QDialog:h["a"],QCard:b["a"],QBar:v["a"],QSpace:g["a"],QForm:_["a"],QCardSection:w["a"],QInput:C["a"]}),y()(k,"directives",{ClosePopup:q["a"]})}}]);